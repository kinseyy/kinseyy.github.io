<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="theme-color" content="#0078E7"><meta name="author" content="kinsey"><meta name="copyright" content="kinsey"><meta name="generator" content="Hexo 7.2.0"><meta name="theme" content="hexo-theme-yun"><title>rustå­¦ä¹  | åŒ—æ­Œ</title><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@900&amp;display=swap" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/star-markdown-css@0.4.1/dist/yun/yun-markdown.min.css"><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/prism-theme-vars/base.css"><script src="https://fastly.jsdelivr.net/npm/scrollreveal/dist/scrollreveal.min.js" defer></script><script>function initScrollReveal() {
  [".post-card",".markdown-body img"].forEach((target)=> {
    ScrollReveal().reveal(target);
  })
}
document.addEventListener("DOMContentLoaded", initScrollReveal);
document.addEventListener("pjax:success", initScrollReveal);
</script><link rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script defer src="https://fastly.jsdelivr.net/npm/katex@latest/dist/katex.min.js"></script><link rel="stylesheet" type="text/css" href="https://fastly.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.css"><script defer src="https://fastly.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js"></script><script defer src="https://fastly.jsdelivr.net/npm/katex@latest/dist/contrib/auto-render.min.js"></script><script type="module">import { renderKatex } from '/js/utils.js'
document.addEventListener("DOMContentLoaded", () => {
  renderKatex({
    ...{},
    ...undefined?.options,
  });
});</script><link rel="icon" type="image/svg+xml" href="/yun.svg"><link rel="mask-icon" href="/yun.svg" color="#0078E7"><link rel="preload" href="/css/hexo-theme-yun.css" as="style"><link rel="prefetch" href="/js/sidebar.js" as="script"><link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin><link rel="preconnect" href="https://fastly.jsdelivr.net/npm/" crossorigin><script id="yun-config">
    window.Yun = {}
    window.CONFIG = {"hostname":"kinseyy.github.io","root":"/","title":"åŒ—æ²åŸæ­Œ","version":"1.10.11","mode":"auto","copycode":true,"page":{"isPost":true},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}.","hits":"${hits} results found","hits_time":"${hits} results found in ${time} ms"},"anonymous_image":"https://cdn.yunyoujun.cn/img/avatar/none.jpg","say":{"api":"https://el-bot-api.vercel.app/api/words/young"},"algolia":{"appID":"LWKPDLFKV6","apiKey":"6f230e5e2cdf36415bd02b48c1138c08","indexName":"my-hexo-blog","hits":{"per_page":8}},"fireworks":{"colors":null},"waline":{"config":{"enable":true,"serverURL":"https://kinsey-six.vercel.app","comment":true,"visitor":true,"emoji":["https://fastly.jsdelivr.net/gh/walinejs/emojis@latest/bilibili/","https://fastly.jsdelivr.net/gh/walinejs/emojis@latest/weibo/","https://fastly.jsdelivr.net/gh/walinejs/emojis@latest/qq/"],"locale":{"placeholder":"å¡«å†™é‚®ç®±ï¼Œå¯ä»¥æ”¶åˆ°å›å¤é€šçŸ¥å“¦ï½"},"requiredMeta":["nick"],"el":"#waline","lang":"en"},"cdn":"https://fastly.jsdelivr.net/npm/@waline/client@v2/dist/waline.js","dark":"html.dark"},"vendors":{"host":"https://fastly.jsdelivr.net/npm/","darken":"https://fastly.jsdelivr.net/npm/darken@1.5.0"}};
  </script><link rel="stylesheet" href="/css/hexo-theme-yun.css"><script src="/js/hexo-theme-yun.js" type="module"></script><link rel="alternate" href="/atom.xml" title="åŒ—æ­Œ" type="application/atom+xml"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin><script async src="https://www.googletagmanager.com/gtag/js?id=G-1LL0D86CY9"></script><script>if (CONFIG.hostname === location.hostname) {
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-1LL0D86CY9');
}</script><script data-ad-client="ca-pub-2245427233262012" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><script>(function(){
  var bp = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  if (curProtocol === 'https') {
    bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
  }
  else {
    bp.src = 'http://push.zhanzhang.baidu.com/push.js';
  }
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(bp, s);
})();</script><!-- Google Tag Manager --><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-M9KWR9L');</script><!-- End Google Tag Manager --><script>CONFIG.leancloudVisitors = {"enable":true,"app_id":"S8MhECl1Bg6fZt5ulKgIlajS-MdYXbMMI","app_key":"eLIsYKPJFnSJdwmHLoigqBR4","server_url":"https://s8mhecl1.api.lncldglobal.com"}</script><script defer src="/js/analytics/leancloud-visitors.js" type="module"></script><meta name="description" content="åŸºæœ¬ä»‹ç»Rust æ˜¯ç”± Mozilla å›¢é˜Ÿäº 2010 å¹´æ¨å‡ºçš„ç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€ï¼Œä¸“æ³¨äº å®‰å…¨æ€§ã€æ€§èƒ½ å’Œ å¹¶å‘æ€§ã€‚å®ƒé€šè¿‡ç‹¬ç‰¹çš„ç¼–è¯‘æ—¶æ£€æŸ¥æœºåˆ¶ï¼ˆå¦‚æ‰€æœ‰æƒç³»ç»Ÿï¼‰ï¼Œåœ¨æ— éœ€åƒåœ¾å›æ”¶ï¼ˆGCï¼‰çš„å‰æä¸‹ä¿éšœå†…å­˜å®‰å…¨ï¼ŒåŒæ—¶æ€§èƒ½åª²ç¾ C&#x2F;C++ï¼Œè¢« Stack Overflow è¯„ä¸ºæœ€å—å¼€å‘è€…å–œçˆ±çš„è¯­è¨€ä¹‹ä¸€ï¼ˆ2016-2023 è¿ç»­å¤šå¹´ï¼‰ã€‚ æˆ‘ä»¬æ¥é€šè¿‡ä¸€æ®µä»£ç æ¥ç®€å•æµè§ˆä¸€ä¸‹Rustè¯­æ³• 12345678">
<meta property="og:type" content="article">
<meta property="og:title" content="rustå­¦ä¹ ">
<meta property="og:url" content="https://kinseyy.github.io/2025/03/26/rust%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="åŒ—æ­Œ">
<meta property="og:description" content="åŸºæœ¬ä»‹ç»Rust æ˜¯ç”± Mozilla å›¢é˜Ÿäº 2010 å¹´æ¨å‡ºçš„ç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€ï¼Œä¸“æ³¨äº å®‰å…¨æ€§ã€æ€§èƒ½ å’Œ å¹¶å‘æ€§ã€‚å®ƒé€šè¿‡ç‹¬ç‰¹çš„ç¼–è¯‘æ—¶æ£€æŸ¥æœºåˆ¶ï¼ˆå¦‚æ‰€æœ‰æƒç³»ç»Ÿï¼‰ï¼Œåœ¨æ— éœ€åƒåœ¾å›æ”¶ï¼ˆGCï¼‰çš„å‰æä¸‹ä¿éšœå†…å­˜å®‰å…¨ï¼ŒåŒæ—¶æ€§èƒ½åª²ç¾ C&#x2F;C++ï¼Œè¢« Stack Overflow è¯„ä¸ºæœ€å—å¼€å‘è€…å–œçˆ±çš„è¯­è¨€ä¹‹ä¸€ï¼ˆ2016-2023 è¿ç»­å¤šå¹´ï¼‰ã€‚ æˆ‘ä»¬æ¥é€šè¿‡ä¸€æ®µä»£ç æ¥ç®€å•æµè§ˆä¸€ä¸‹Rustè¯­æ³• 12345678">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503261937218.png">
<meta property="og:image" content="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503261939795.png">
<meta property="og:image" content="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503261950017.png">
<meta property="og:image" content="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503262007537.png">
<meta property="og:image" content="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503272205857.png">
<meta property="og:image" content="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503282101141.png">
<meta property="og:image" content="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202504091920787.png">
<meta property="og:image" content="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202504162034162.png">
<meta property="article:published_time" content="2025-03-26T11:07:14.000Z">
<meta property="article:modified_time" content="2025-04-20T12:37:53.937Z">
<meta property="article:author" content="kinsey">
<meta property="article:tag" content="rust">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503261937218.png"><script>(function() {
  if (CONFIG.mode !== 'auto') return
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
  const setting = localStorage.getItem('darken-mode') || 'auto'
  if (setting === 'dark' || (prefersDark && setting !== 'light'))
    document.documentElement.classList.toggle('dark', true)
})()</script></head><body><script src="https://code.iconify.design/2/2.1.1/iconify.min.js"></script><script>// Define global variable
IconifyProviders = {
  // Empty prefix: overwrite default API provider configuration
  '': {
    // Use custom API first, use Iconify public API as backup
    resources: [
        'https://api.iconify.design',
    ],
    // Wait for 1 second before switching API hosts
    rotate: 1000,
  },
};</script><script defer src="https://fastly.jsdelivr.net/npm/animejs@latest"></script><script defer src="/js/ui/fireworks.js" type="module"></script><canvas class="fireworks"></canvas><div class="container"><a class="sidebar-toggle hty-icon-button" id="menu-btn"><div class="hamburger hamburger--spin" type="button"><span class="hamburger-box"><span class="hamburger-inner"></span></span></div></a><div class="sidebar-toggle sidebar-overlay"></div><aside class="sidebar"><script src="/js/sidebar.js" type="module"></script><ul class="sidebar-nav"><li class="sidebar-nav-item sidebar-nav-toc hty-icon-button sidebar-nav-active" data-target="post-toc-wrap" title="Table of Contents"><span class="icon iconify" data-icon="ri:list-ordered"></span></li><li class="sidebar-nav-item sidebar-nav-overview hty-icon-button" data-target="site-overview-wrap" title="Overview"><span class="icon iconify" data-icon="ri:passport-line"></span></li></ul><div class="sidebar-panel" id="site-overview-wrap"><div class="site-info fix-top"><a class="site-author-avatar" href="/about/" title="kinsey"><img width="96" loading="lazy" src="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202405312004243.jpeg" alt="kinsey"><span class="site-author-status" title="Looking for dawn.">ğŸŒ‘</span></a><div class="site-author-name"><a href="/about/">kinsey</a></div><span class="site-name">åŒ—æ­Œ</span><sub class="site-subtitle"></sub><div class="site-description"></div></div><nav class="site-state"><a class="site-state-item hty-icon-button icon-home" href="/" title="Home"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:home-4-line"></span></span></a><div class="site-state-item"><a href="/archives/" title="Archives"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:archive-line"></span></span><span class="site-state-item-count">219</span></a></div><div class="site-state-item"><a href="/categories/" title="Categories"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:folder-2-line"></span></span><span class="site-state-item-count">7</span></a></div><div class="site-state-item"><a href="/tags/" title="Tags"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="site-state-item-count">101</span></a></div><a class="site-state-item hty-icon-button" href="/about/#comment" title="ç•™è¨€æ¿"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:clipboard-line"></span></span></a></nav><hr style="margin-bottom:0.5rem"><div class="links-of-author"><a class="links-of-author-item hty-icon-button" rel="noopener" href="/atom.xml" title="RSS" target="_blank" style="color:orange"><span class="icon iconify" data-icon="ri:rss-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://github.com/kinseyy" title="GitHub" target="_blank" style="color:#6e5494"><span class="icon iconify" data-icon="ri:github-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://music.163.com/#/user/home?id=3954596483" title="ç½‘æ˜“äº‘éŸ³ä¹" target="_blank" style="color:#C20C0C"><span class="icon iconify" data-icon="ri:netease-cloud-music-line"></span></a><a class="links-of-author-item hty-icon-button" rel="noopener" href="https://travellings.link" title="Travelling" target="_blank" style="color:var(--hty-text-color)"><span class="icon iconify" data-icon="ri:train-line"></span></a></div><hr style="margin:0.5rem 1rem"><div class="links"><a class="links-item hty-icon-button" href="/links/" title="æˆ‘çš„å°ä¼™ä¼´ä»¬" style="color:dodgerblue"><span class="icon iconify" data-icon="ri:genderless-line"></span></a><a class="links-item hty-icon-button" href="/girls/" title="å–œæ¬¢çš„å¥³å­©å­" style="color:hotpink"><span class="icon iconify" data-icon="ri:women-line"></span></a></div><br><a class="links-item hty-icon-button" id="toggle-mode-btn" href="javascript:;" title="Mode" style="color: #f1cb64"><span class="icon iconify" data-icon="ri:contrast-2-line"></span></a></div><div class="sidebar-panel sidebar-panel-active" id="post-toc-wrap"><div class="post-toc"><div class="post-toc-content"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.</span> <span class="toc-text">åŸºæœ¬ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%BB%91%E5%AE%9A%E4%B8%8E%E8%A7%A3%E6%9E%84"><span class="toc-number">2.</span> <span class="toc-text">å˜é‡ç»‘å®šä¸è§£æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%91%BD%E5%90%8D"><span class="toc-number">2.1.</span> <span class="toc-text">å˜é‡å‘½å</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%BB%91%E5%AE%9A"><span class="toc-number">2.2.</span> <span class="toc-text">å˜é‡ç»‘å®š</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E5%8F%AF%E5%8F%98%E6%80%A7"><span class="toc-number">2.3.</span> <span class="toc-text">å˜é‡çš„å¯å˜æ€§</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%B8%8B%E5%88%92%E7%BA%BF%E5%BC%80%E5%A4%B4%E5%BF%BD%E7%95%A5%E6%9C%AA%E4%BD%BF%E7%94%A8%E7%9A%84%E5%8F%98%E9%87%8F"><span class="toc-number">2.4.</span> <span class="toc-text">ä½¿ç”¨ä¸‹åˆ’çº¿å¼€å¤´å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E8%A7%A3%E6%9E%84"><span class="toc-number">2.5.</span> <span class="toc-text">å˜é‡è§£æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E5%BC%8F%E8%B5%8B%E5%80%BC"><span class="toc-number">2.5.1.</span> <span class="toc-text">è§£æ„å¼èµ‹å€¼</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E5%92%8C%E5%B8%B8%E9%87%8F%E4%B9%8B%E9%97%B4%E7%9A%84%E5%B7%AE%E5%BC%82"><span class="toc-number">2.6.</span> <span class="toc-text">å˜é‡å’Œå¸¸é‡ä¹‹é—´çš„å·®å¼‚</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%9A%84%E9%81%AE%E8%94%BD"><span class="toc-number">2.7.</span> <span class="toc-text">å˜é‡çš„é®è”½</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.</span> <span class="toc-text">åŸºæœ¬ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E5%80%BC%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.</span> <span class="toc-text">æ•°å€¼ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B4%E6%95%B0%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.1.</span> <span class="toc-text">æ•´æ•°ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%95%B4%E5%9E%8B%E6%BA%A2%E5%87%BA"><span class="toc-number">3.1.1.1.</span> <span class="toc-text">æ•´å‹æº¢å‡º</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B5%AE%E7%82%B9%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.1.2.</span> <span class="toc-text">æµ®ç‚¹ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#NaN"><span class="toc-number">3.1.2.1.</span> <span class="toc-text">NaN</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E5%AD%97%E8%BF%90%E7%AE%97"><span class="toc-number">3.1.3.</span> <span class="toc-text">æ•°å­—è¿ç®—</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%8D%E8%BF%90%E7%AE%97"><span class="toc-number">3.1.4.</span> <span class="toc-text">ä½è¿ç®—</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BA%8F%E5%88%97"><span class="toc-number">3.1.5.</span> <span class="toc-text">åºåˆ—</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-As-%E5%AE%8C%E6%88%90%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">3.1.6.</span> <span class="toc-text">ä½¿ç”¨ As å®Œæˆç±»å‹è½¬æ¢</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9C%89%E7%90%86%E6%95%B0%E5%92%8C%E5%A4%8D%E6%95%B0"><span class="toc-number">3.1.7.</span> <span class="toc-text">æœ‰ç†æ•°å’Œå¤æ•°</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E3%80%81%E5%B8%83%E5%B0%94%E3%80%81%E5%8D%95%E5%85%83%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.2.</span> <span class="toc-text">å­—ç¬¦ã€å¸ƒå°”ã€å•å…ƒç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%B1%BB%E5%9E%8B-char"><span class="toc-number">3.2.1.</span> <span class="toc-text">å­—ç¬¦ç±»å‹(char)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%B8%83%E5%B0%94-bool"><span class="toc-number">3.2.2.</span> <span class="toc-text">å¸ƒå°”(bool)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.2.3.</span> <span class="toc-text">å•å…ƒç±»å‹</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AF%AD%E5%8F%A5%E5%8F%8A%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.3.</span> <span class="toc-text">è¯­å¥åŠè¡¨è¾¾å¼</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AF%AD%E5%8F%A5"><span class="toc-number">3.3.1.</span> <span class="toc-text">è¯­å¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">3.3.2.</span> <span class="toc-text">è¡¨è¾¾å¼</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%87%BD%E6%95%B0"><span class="toc-number">3.4.</span> <span class="toc-text">å‡½æ•°</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E8%A6%81%E7%82%B9"><span class="toc-number">3.4.1.</span> <span class="toc-text">å‡½æ•°è¦ç‚¹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E"><span class="toc-number">3.4.2.</span> <span class="toc-text">å‡½æ•°è¿”å›</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Rust-%E4%B8%AD%E7%9A%84%E7%89%B9%E6%AE%8A%E8%BF%94%E5%9B%9E%E7%B1%BB%E5%9E%8B"><span class="toc-number">3.4.3.</span> <span class="toc-text">Rust ä¸­çš„ç‰¹æ®Šè¿”å›ç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%97%A0%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-number">3.4.3.1.</span> <span class="toc-text">æ— è¿”å›å€¼()</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%B0%B8%E4%B8%8D%E8%BF%94%E5%9B%9E%E7%9A%84%E5%8F%91%E6%95%A3%E5%87%BD%E6%95%B0"><span class="toc-number">3.4.3.2.</span> <span class="toc-text">æ°¸ä¸è¿”å›çš„å‘æ•£å‡½æ•° !</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%80%E6%9C%89%E6%9D%83%E5%92%8C%E5%80%9F%E7%94%A8"><span class="toc-number">4.</span> <span class="toc-text">æ‰€æœ‰æƒå’Œå€Ÿç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%80%E6%9C%89%E6%9D%83"><span class="toc-number">4.1.</span> <span class="toc-text">æ‰€æœ‰æƒ</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%88%E5%92%8C%E5%A0%86"><span class="toc-number">4.1.1.</span> <span class="toc-text">æ ˆå’Œå †</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%A0%88"><span class="toc-number">4.1.1.1.</span> <span class="toc-text">æ ˆ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A0%86"><span class="toc-number">4.1.1.2.</span> <span class="toc-text">å †</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%80%A7%E8%83%BD%E5%8C%BA%E5%88%AB"><span class="toc-number">4.1.1.3.</span> <span class="toc-text">æ€§èƒ½åŒºåˆ«</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%89%80%E6%9C%89%E6%9D%83%E5%92%8C%E5%A0%86%E6%A0%88"><span class="toc-number">4.1.1.4.</span> <span class="toc-text">æ‰€æœ‰æƒå’Œå †æ ˆ</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%89%80%E6%9C%89%E6%9D%83%E5%8E%9F%E5%88%99"><span class="toc-number">4.1.2.</span> <span class="toc-text">æ‰€æœ‰æƒåŸåˆ™</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-number">4.1.2.1.</span> <span class="toc-text">å˜é‡ä½œç”¨åŸŸ</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E7%BB%91%E5%AE%9A%E8%83%8C%E5%90%8E%E7%9A%84%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92"><span class="toc-number">4.1.3.</span> <span class="toc-text">å˜é‡ç»‘å®šèƒŒåçš„æ•°æ®äº¤äº’</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%BD%AC%E7%A7%BB%E6%89%80%E6%9C%89%E6%9D%83"><span class="toc-number">4.1.3.1.</span> <span class="toc-text">è½¬ç§»æ‰€æœ‰æƒ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%85%8B%E9%9A%86%EF%BC%88%E6%B7%B1%E6%8B%B7%E8%B4%9D%EF%BC%89"><span class="toc-number">4.1.3.2.</span> <span class="toc-text">å…‹éš†ï¼ˆæ·±æ‹·è´ï¼‰</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8B%B7%E8%B4%9D-%E6%B5%85%E6%8B%B7%E8%B4%9D"><span class="toc-number">4.1.3.3.</span> <span class="toc-text">æ‹·è´(æµ…æ‹·è´)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E4%B8%8E%E5%80%9F%E7%94%A8"><span class="toc-number">4.2.</span> <span class="toc-text">å¼•ç”¨ä¸å€Ÿç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E5%92%8C%E8%A7%A3%E5%BC%95%E7%94%A8"><span class="toc-number">4.2.1.</span> <span class="toc-text">å¼•ç”¨å’Œè§£å¼•ç”¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%8D%E5%8F%AF%E5%8F%98%E5%BC%95%E7%94%A8"><span class="toc-number">4.2.2.</span> <span class="toc-text">ä¸å¯å˜å¼•ç”¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%AF%E5%8F%98%E5%BC%95%E7%94%A8"><span class="toc-number">4.2.3.</span> <span class="toc-text">å¯å˜å¼•ç”¨</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%82%AC%E5%9E%82%E5%BC%95%E7%94%A8"><span class="toc-number">4.2.4.</span> <span class="toc-text">æ‚¬å‚å¼•ç”¨</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%A4%8D%E5%90%88%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.</span> <span class="toc-text">å¤åˆç±»å‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%8E%E5%88%87%E7%89%87"><span class="toc-number">5.1.</span> <span class="toc-text">å­—ç¬¦ä¸²ä¸åˆ‡ç‰‡</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%88%87%E7%89%87"><span class="toc-number">5.1.1.</span> <span class="toc-text">åˆ‡ç‰‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#String%E5%92%8C-str%E8%BD%AC%E6%8D%A2"><span class="toc-number">5.1.2.</span> <span class="toc-text">Stringå’Œ&amp;strè½¬æ¢</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#String%E5%92%8C-str%E5%8C%BA%E5%88%AB"><span class="toc-number">5.1.3.</span> <span class="toc-text">Stringå’Œ&amp;stråŒºåˆ«</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%B4%A2%E5%BC%95"><span class="toc-number">5.1.4.</span> <span class="toc-text">å­—ç¬¦ä¸²ç´¢å¼•</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2%E6%93%8D%E4%BD%9C"><span class="toc-number">5.1.5.</span> <span class="toc-text">å­—ç¬¦ä¸²æ“ä½œ</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%BF%BD%E5%8A%A0%EF%BC%88push%EF%BC%89"><span class="toc-number">5.1.5.1.</span> <span class="toc-text">è¿½åŠ ï¼ˆpushï¼‰</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%8F%92%E5%85%A5%EF%BC%88insert%EF%BC%89"><span class="toc-number">5.1.5.2.</span> <span class="toc-text">æ’å…¥ï¼ˆinsertï¼‰</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%9B%BF%E6%8D%A2%EF%BC%88replace%EF%BC%89"><span class="toc-number">5.1.5.3.</span> <span class="toc-text">æ›¿æ¢ï¼ˆreplaceï¼‰</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%EF%BC%88delete%EF%BC%89"><span class="toc-number">5.1.5.4.</span> <span class="toc-text">åˆ é™¤ï¼ˆdeleteï¼‰</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%BF%9E%E6%8E%A5-Concatenate"><span class="toc-number">5.1.5.5.</span> <span class="toc-text">è¿æ¥ (Concatenate)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%83%E7%BB%84"><span class="toc-number">5.2.</span> <span class="toc-text">å…ƒç»„</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E8%A7%A3%E6%9E%84%E5%85%83%E7%BB%84"><span class="toc-number">5.2.1.</span> <span class="toc-text">ç”¨æ¨¡å¼åŒ¹é…è§£æ„å…ƒç»„</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%94%A8-%E6%9D%A5%E8%AE%BF%E9%97%AE%E5%85%83%E7%BB%84"><span class="toc-number">5.2.2.</span> <span class="toc-text">ç”¨.æ¥è®¿é—®å…ƒç»„</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">5.3.</span> <span class="toc-text">ç»“æ„ä½“</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89"><span class="toc-number">5.3.1.</span> <span class="toc-text">å®šä¹‰</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E5%8C%96"><span class="toc-number">5.3.2.</span> <span class="toc-text">å®ä¾‹åŒ–</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%BF%E9%97%AE%E7%BB%93%E6%9E%84%E4%BD%93%E5%AD%97%E6%AE%B5"><span class="toc-number">5.3.3.</span> <span class="toc-text">è®¿é—®ç»“æ„ä½“å­—æ®µ</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%AE%80%E5%8C%96%E7%BB%93%E6%9E%84%E4%BD%93%E6%9E%84%E9%80%A0"><span class="toc-number">5.3.4.</span> <span class="toc-text">ç®€åŒ–ç»“æ„ä½“æ„é€ </span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E6%9B%B4%E6%96%B0%E8%AF%AD%E6%B3%95"><span class="toc-number">5.3.5.</span> <span class="toc-text">ç»“æ„ä½“æ›´æ–°è¯­æ³•</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%85%83%E7%BB%84%E7%BB%93%E6%9E%84%E4%BD%93%EF%BC%88tuple-struct%EF%BC%89"><span class="toc-number">5.3.6.</span> <span class="toc-text">å…ƒç»„ç»“æ„ä½“ï¼ˆtuple structï¼‰</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E5%85%83%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">5.3.7.</span> <span class="toc-text">å•å…ƒç»“æ„ä½“</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-derive-Debug-%E6%9D%A5%E6%89%93%E5%8D%B0%E7%BB%93%E6%9E%84%E4%BD%93%E7%9A%84%E4%BF%A1%E6%81%AF"><span class="toc-number">5.3.8.</span> <span class="toc-text">ä½¿ç”¨ #[derive(Debug)] æ¥æ‰“å°ç»“æ„ä½“çš„ä¿¡æ¯</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE"><span class="toc-number">5.4.</span> <span class="toc-text">æšä¸¾</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E5%80%BC"><span class="toc-number">5.4.1.</span> <span class="toc-text">æšä¸¾å€¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%90%8C%E4%B8%80%E5%8C%96%E7%B1%BB%E5%9E%8B"><span class="toc-number">5.4.2.</span> <span class="toc-text">åŒä¸€åŒ–ç±»å‹</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E7%BB%84"><span class="toc-number">5.5.</span> <span class="toc-text">æ•°ç»„</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E6%8E%A7%E5%88%B6%EF%BC%88%E8%AF%AD%E5%8F%A5%E5%AD%A6%E4%B9%A0%EF%BC%89"><span class="toc-number">6.</span> <span class="toc-text">æµç¨‹æ§åˆ¶ï¼ˆè¯­å¥å­¦ä¹ ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-if%E8%AF%AD%E5%8F%A5"><span class="toc-number">6.1.</span> <span class="toc-text">1.ifè¯­å¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-if-else%E8%AF%AD%E5%8F%A5"><span class="toc-number">6.2.</span> <span class="toc-text">2.if-elseè¯­å¥</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-for%E5%BE%AA%E7%8E%AF"><span class="toc-number">6.3.</span> <span class="toc-text">3.forå¾ªç¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#4-continue"><span class="toc-number">6.4.</span> <span class="toc-text">4.continue</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-break"><span class="toc-number">6.5.</span> <span class="toc-text">5.break</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-while%E5%BE%AA%E7%8E%AF"><span class="toc-number">6.6.</span> <span class="toc-text">6.whileå¾ªç¯</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#7-loop%E5%BE%AA%E7%8E%AF"><span class="toc-number">6.7.</span> <span class="toc-text">7.loopå¾ªç¯</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D"><span class="toc-number">7.</span> <span class="toc-text">æ¨¡å¼åŒ¹é…</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#match%E5%92%8Cif-let"><span class="toc-number">7.1.</span> <span class="toc-text">matchå’Œif let</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#match%E5%8C%B9%E9%85%8D"><span class="toc-number">7.1.1.</span> <span class="toc-text">matchåŒ¹é…</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E7%BB%91%E5%AE%9A"><span class="toc-number">7.1.2.</span> <span class="toc-text">æ¨¡å¼ç»‘å®š</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A9%B7%E5%B0%BD%E5%8C%B9%E9%85%8D"><span class="toc-number">7.1.3.</span> <span class="toc-text">ç©·å°½åŒ¹é…</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-number">7.1.4.</span> <span class="toc-text">_é€šé…ç¬¦</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#if-let%E5%8C%B9%E9%85%8D"><span class="toc-number">7.1.5.</span> <span class="toc-text">if letåŒ¹é…</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#matches-%E5%AE%8F"><span class="toc-number">7.1.6.</span> <span class="toc-text">matches!å®</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%98%E9%87%8F%E9%81%AE%E8%94%BD"><span class="toc-number">7.1.7.</span> <span class="toc-text">å˜é‡é®è”½</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84Option"><span class="toc-number">7.2.</span> <span class="toc-text">è§£æ„Option</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8C%B9%E9%85%8DOption"><span class="toc-number">7.2.1.</span> <span class="toc-text">åŒ¹é…Option&lt;T&gt;</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D%E9%80%82%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">7.3.</span> <span class="toc-text">æ¨¡å¼åŒ¹é…é€‚ç”¨åœºæ™¯</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#match%E5%88%86%E6%94%AF"><span class="toc-number">7.3.1.</span> <span class="toc-text">matchåˆ†æ”¯</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#if-let%E5%88%86%E6%94%AF"><span class="toc-number">7.3.2.</span> <span class="toc-text">if letåˆ†æ”¯</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#while-let%E6%9D%A1%E4%BB%B6%E5%BE%AA%E7%8E%AF"><span class="toc-number">7.3.3.</span> <span class="toc-text">while letæ¡ä»¶å¾ªç¯</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#for%E5%BE%AA%E7%8E%AF"><span class="toc-number">7.3.4.</span> <span class="toc-text">forå¾ªç¯</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#let%E8%AF%AD%E5%8F%A5"><span class="toc-number">7.3.5.</span> <span class="toc-text">letè¯­å¥</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">7.3.6.</span> <span class="toc-text">å‡½æ•°å‚æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#let%E5%92%8Cif-let"><span class="toc-number">7.3.7.</span> <span class="toc-text">letå’Œif let</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#let-else-Rust-1-65-%E6%96%B0%E5%A2%9E"><span class="toc-number">7.3.8.</span> <span class="toc-text">let-else(Rust 1.65 æ–°å¢)</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%A8%E6%A8%A1%E5%BC%8F%E5%88%97%E8%A1%A8%EF%BC%88%E6%80%BB%E7%BB%93%EF%BC%89"><span class="toc-number">7.4.</span> <span class="toc-text">å…¨æ¨¡å¼åˆ—è¡¨ï¼ˆæ€»ç»“ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E5%AD%97%E9%9D%A2%E5%80%BC"><span class="toc-number">7.4.1.</span> <span class="toc-text">åŒ¹é…å­—é¢å€¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E5%91%BD%E5%90%8D%E5%8F%98%E9%87%8F"><span class="toc-number">7.4.2.</span> <span class="toc-text">åŒ¹é…å‘½åå˜é‡</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8D%95%E6%94%AF%E5%A4%9A%E6%A8%A1%E5%BC%8F"><span class="toc-number">7.4.3.</span> <span class="toc-text">å•æ”¯å¤šæ¨¡å¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87-%E5%8C%B9%E9%85%8D%E5%80%BC%E7%9A%84%E8%8C%83%E5%9B%B4"><span class="toc-number">7.4.4.</span> <span class="toc-text">é€šè¿‡..&#x3D;åŒ¹é…å€¼çš„èŒƒå›´</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E5%B9%B6%E5%88%86%E8%A7%A3%E5%80%BC"><span class="toc-number">7.4.5.</span> <span class="toc-text">è§£æ„å¹¶åˆ†è§£å€¼</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E7%BB%93%E6%9E%84%E4%BD%93"><span class="toc-number">7.4.5.1.</span> <span class="toc-text">è§£æ„ç»“æ„ä½“</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E6%9E%9A%E4%B8%BE"><span class="toc-number">7.4.5.2.</span> <span class="toc-text">è§£æ„æšä¸¾</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E5%B5%8C%E5%A5%97%E7%9A%84%E7%BB%93%E6%9E%84%E4%BD%93%E5%92%8C%E6%9E%9A%E4%B8%BE"><span class="toc-number">7.4.5.3.</span> <span class="toc-text">è§£æ„åµŒå¥—çš„ç»“æ„ä½“å’Œæšä¸¾</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E7%BB%93%E6%9E%84%E4%BD%93%E5%92%8C%E5%85%83%E7%BB%84"><span class="toc-number">7.4.5.4.</span> <span class="toc-text">è§£æ„ç»“æ„ä½“å’Œå…ƒç»„</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84%E6%95%B0%E7%BB%84"><span class="toc-number">7.4.5.5.</span> <span class="toc-text">è§£æ„æ•°ç»„</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%BF%BD%E7%95%A5%E6%A8%A1%E5%BC%8F%E4%B8%AD%E7%9A%84%E5%80%BC"><span class="toc-number">7.4.6.</span> <span class="toc-text">å¿½ç•¥æ¨¡å¼ä¸­çš„å€¼</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-%E5%BF%BD%E7%95%A5%E6%95%B4%E4%B8%AA%E5%80%BC"><span class="toc-number">7.4.6.1.</span> <span class="toc-text">ä½¿ç”¨_å¿½ç•¥æ•´ä¸ªå€¼</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%B5%8C%E5%A5%97%E7%9A%84-%E5%BF%BD%E7%95%A5%E9%83%A8%E5%88%86%E5%80%BC"><span class="toc-number">7.4.6.2.</span> <span class="toc-text">ä½¿ç”¨åµŒå¥—çš„_å¿½ç•¥éƒ¨åˆ†å€¼</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E4%B8%8B%E5%88%92%E7%BA%BF%E5%BF%BD%E7%95%A5%E6%9C%AA%E4%BD%BF%E7%94%A8%E7%9A%84%E5%8F%98%E9%87%8F"><span class="toc-number">7.4.6.3.</span> <span class="toc-text">ä½¿ç”¨ä¸‹åˆ’çº¿å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8C%B9%E9%85%8D%E5%AE%88%E5%8D%AB%E6%8F%90%E4%BE%9B%E7%9A%84%E9%A2%9D%E5%A4%96%E6%9D%A1%E4%BB%B6"><span class="toc-number">7.4.7.</span> <span class="toc-text">åŒ¹é…å®ˆå«æä¾›çš„é¢å¤–æ¡ä»¶</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A"><span class="toc-number">7.4.8.</span> <span class="toc-text">@ç»‘å®š</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%89%8D%E7%BB%91%E5%AE%9A%E5%90%8E%E8%A7%A3%E6%9E%84-Rust-1-56-%E6%96%B0%E5%A2%9E"><span class="toc-number">7.4.8.1.</span> <span class="toc-text">@å‰ç»‘å®šåè§£æ„(Rust 1.56 æ–°å¢)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E6%96%B0%E7%89%B9%E6%80%A7-Rust-1-53-%E6%96%B0%E5%A2%9E"><span class="toc-number">7.4.8.2.</span> <span class="toc-text">@æ–°ç‰¹æ€§(Rust 1.53 æ–°å¢)</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95Method"><span class="toc-number">8.</span> <span class="toc-text">æ–¹æ³•Method</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95"><span class="toc-number">8.1.</span> <span class="toc-text">å®šä¹‰æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#self%E3%80%81-self%E5%92%8C-mut-self"><span class="toc-number">8.2.</span> <span class="toc-text">selfã€&amp;selfå’Œ&amp;mut self</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E5%90%8D%E8%B7%9F%E7%BB%93%E6%9E%84%E4%BD%93%E5%AD%97%E6%AE%B5%E5%90%8D%E7%9B%B8%E5%90%8C"><span class="toc-number">8.3.</span> <span class="toc-text">æ–¹æ³•åè·Ÿç»“æ„ä½“å­—æ®µåç›¸åŒ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B8%A6%E5%A4%9A%E4%B8%AA%E5%8F%82%E6%95%B0%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">8.4.</span> <span class="toc-text">å¸¦å¤šä¸ªå‚æ•°çš„æ–¹æ³•</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B3%E8%81%94%E5%87%BD%E6%95%B0"><span class="toc-number">8.5.</span> <span class="toc-text">å…³è”å‡½æ•°</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AAimpl%E5%AE%9A%E4%B9%89"><span class="toc-number">8.6.</span> <span class="toc-text">å¤šä¸ªimplå®šä¹‰.</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%BA%E6%9E%9A%E4%B8%BE%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-number">8.7.</span> <span class="toc-text">ä¸ºæšä¸¾å®ç°æ–¹æ³•</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E5%92%8C%E7%89%B9%E5%BE%81"><span class="toc-number">9.</span> <span class="toc-text">æ³›å‹å’Œç‰¹å¾</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8BGenerics"><span class="toc-number">9.1.</span> <span class="toc-text">æ³›å‹Generics</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F%E5%9C%B0%E6%8C%87%E5%AE%9A%E6%B3%9B%E5%9E%8B%E7%9A%84%E7%B1%BB%E5%9E%8B%E5%8F%82%E6%95%B0"><span class="toc-number">9.1.1.</span> <span class="toc-text">æ˜¾å¼åœ°æŒ‡å®šæ³›å‹çš„ç±»å‹å‚æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%93%E6%9E%84%E4%BD%93%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%B3%9B%E5%9E%8B"><span class="toc-number">9.1.2.</span> <span class="toc-text">ç»“æ„ä½“ä¸­ä½¿ç”¨æ³›å‹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%9E%9A%E4%B8%BE%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%B3%9B%E5%9E%8B"><span class="toc-number">9.1.3.</span> <span class="toc-text">æšä¸¾ä¸­ä½¿ç”¨æ³›å‹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%AD%E4%BD%BF%E7%94%A8%E6%B3%9B%E5%9E%8B"><span class="toc-number">9.1.4.</span> <span class="toc-text">æ–¹æ³•ä¸­ä½¿ç”¨æ³›å‹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E5%85%B7%E4%BD%93%E7%9A%84%E6%B3%9B%E5%9E%8B%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95"><span class="toc-number">9.1.5.</span> <span class="toc-text">ä¸ºå…·ä½“çš„æ³›å‹å®ç°æ–¹æ³•</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#const%E6%B3%9B%E5%9E%8B-Rust1-51%E7%89%88%E6%9C%AC%E5%BC%95%E5%85%A5%E7%9A%84%E4%B8%BB%E8%A6%81%E7%89%B9%E5%BE%81"><span class="toc-number">9.1.6.</span> <span class="toc-text">constæ³›å‹(Rust1.51ç‰ˆæœ¬å¼•å…¥çš„ä¸»è¦ç‰¹å¾)</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#const%E6%B3%9B%E5%9E%8B%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">9.1.7.</span> <span class="toc-text">constæ³›å‹è¡¨è¾¾å¼</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#const-fn"><span class="toc-number">9.1.8.</span> <span class="toc-text">const  fn</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#const-fn%E7%9A%84%E9%99%90%E5%88%B6"><span class="toc-number">9.1.9.</span> <span class="toc-text">const fnçš„é™åˆ¶</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%93%E5%90%88const-fn%E4%B8%8Econst%E6%B3%9B%E5%9E%8B"><span class="toc-number">9.1.10.</span> <span class="toc-text">ç»“åˆconst fnä¸constæ³›å‹</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B3%9B%E5%9E%8B%E7%9A%84%E6%80%A7%E8%83%BD"><span class="toc-number">9.1.11.</span> <span class="toc-text">æ³›å‹çš„æ€§èƒ½</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E5%BE%81Trait"><span class="toc-number">9.2.</span> <span class="toc-text">ç‰¹å¾Trait</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%AE%9A%E4%B9%89-1"><span class="toc-number">9.2.1.</span> <span class="toc-text">å®šä¹‰</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%B8%BA%E7%B1%BB%E5%9E%8B%E5%AE%9E%E7%8E%B0%E7%89%B9%E5%BE%81"><span class="toc-number">9.2.2.</span> <span class="toc-text">ä¸ºç±»å‹å®ç°ç‰¹å¾</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E7%89%B9%E6%80%A7%E5%AE%9A%E4%B9%89%E4%B8%8E%E5%AE%9E%E7%8E%B0%E7%9A%84%E4%BD%8D%E7%BD%AE-%E5%AD%A4%E5%84%BF%E6%B3%95%E5%88%99"><span class="toc-number">9.2.2.1.</span> <span class="toc-text">ç‰¹æ€§å®šä¹‰ä¸å®ç°çš„ä½ç½®(å­¤å„¿æ³•åˆ™)</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E5%AE%9E%E7%8E%B0"><span class="toc-number">9.2.2.2.</span> <span class="toc-text">é»˜è®¤å®ç°</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%89%B9%E5%BE%81%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0"><span class="toc-number">9.2.3.</span> <span class="toc-text">ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°å‚æ•°</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E5%BE%81%E7%BA%A6%E6%9D%9F"><span class="toc-number">9.2.4.</span> <span class="toc-text">ç‰¹å¾çº¦æŸ</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%A4%9A%E9%87%8D%E7%BA%A6%E6%9D%9F"><span class="toc-number">9.2.4.1.</span> <span class="toc-text">å¤šé‡çº¦æŸ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#Where%E7%BA%A6%E6%9D%9F"><span class="toc-number">9.2.4.2.</span> <span class="toc-text">Whereçº¦æŸ</span></a></li><li class="toc-item toc-level-6"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E7%89%B9%E5%BE%81%E7%BA%A6%E6%9D%9F%E6%9C%89%E6%9D%A1%E4%BB%B6%E5%9C%B0%E5%AE%9E%E7%8E%B0%E6%96%B9%E6%B3%95%E6%88%96%E7%89%B9%E5%BE%81"><span class="toc-number">9.2.4.3.</span> <span class="toc-text">ä½¿ç”¨ç‰¹å¾çº¦æŸæœ‰æ¡ä»¶åœ°å®ç°æ–¹æ³•æˆ–ç‰¹å¾</span></a></li></ol></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E8%BF%94%E5%9B%9E%E4%B8%AD%E7%9A%84impl-Trait"><span class="toc-number">9.2.5.</span> <span class="toc-text">å‡½æ•°è¿”å›ä¸­çš„impl Trait</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87derive%E6%B4%BE%E7%94%9F%E7%89%B9%E5%BE%81"><span class="toc-number">9.2.6.</span> <span class="toc-text">é€šè¿‡deriveæ´¾ç”Ÿç‰¹å¾</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E6%96%B9%E6%B3%95%E9%9C%80%E8%A6%81%E5%BC%95%E5%85%A5%E7%89%B9%E5%BE%81"><span class="toc-number">9.2.7.</span> <span class="toc-text">è°ƒç”¨æ–¹æ³•éœ€è¦å¼•å…¥ç‰¹å¾</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E5%BE%81%E5%AF%B9%E8%B1%A1"><span class="toc-number">9.3.</span> <span class="toc-text">ç‰¹å¾å¯¹è±¡</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E5%BE%81%E5%AF%B9%E8%B1%A1%E5%AE%9A%E4%B9%89"><span class="toc-number">9.3.1.</span> <span class="toc-text">ç‰¹å¾å¯¹è±¡å®šä¹‰</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E5%BE%81%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8A%A8%E6%80%81%E5%88%86%E5%8F%91"><span class="toc-number">9.3.2.</span> <span class="toc-text">ç‰¹å¾å¯¹è±¡çš„åŠ¨æ€åˆ†å‘</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#Self-%E4%B8%8E-self"><span class="toc-number">9.3.3.</span> <span class="toc-text">Self ä¸ self</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%89%B9%E5%BE%81%E5%AF%B9%E8%B1%A1%E7%9A%84%E9%99%90%E5%88%B6"><span class="toc-number">9.3.4.</span> <span class="toc-text">ç‰¹å¾å¯¹è±¡çš„é™åˆ¶</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E4%BA%86%E8%A7%A3%E7%89%B9%E5%BE%81"><span class="toc-number">9.3.5.</span> <span class="toc-text">æ·±å…¥äº†è§£ç‰¹å¾</span></a><ol class="toc-child"><li class="toc-item toc-level-6"><a class="toc-link" href="#%E5%85%B3%E8%81%94%E7%B1%BB%E5%9E%8B"><span class="toc-number">9.3.5.1.</span> <span class="toc-text">å…³è”ç±»å‹</span></a></li></ol></li></ol></li></ol></li></ol></div></div></div></aside><main class="sidebar-translate" id="content"><div id="post"><article class="hty-card post-block" itemscope itemtype="https://schema.org/Article" style="--smc-primary:#0078E7;"><link itemprop="mainEntityOfPage" href="https://kinseyy.github.io/2025/03/26/rust%E5%AD%A6%E4%B9%A0/"><span hidden itemprop="author" itemscope itemtype="https://schema.org/Person"><meta itemprop="name" content="kinsey"><meta itemprop="description"></span><span hidden itemprop="publisher" itemscope itemtype="https://schema.org/Organization"><meta itemprop="name" content="åŒ—æ­Œ"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">rustå­¦ä¹ <a class="post-edit-link" href="https://github.com/kinseyy/kinseyy.github.io/tree/master/2024/05/31/hello-world_posts/rustå­¦ä¹ .md" target="_blank" title="Edit this post" rel="noopener"><span class="icon iconify" data-icon="ri:edit-line"></span></a></h1><div class="post-meta"><div class="post-time" style="display:block"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-line"></span></span> <time title="Created: 2025-03-26 19:07:14" itemprop="dateCreated datePublished" datetime="2025-03-26T19:07:14+08:00">2025-03-26</time><span class="post-meta-divider">-</span><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:calendar-2-line"></span></span> <time title="Modified: 2025-04-20 20:37:53" itemprop="dateModified" datetime="2025-04-20T20:37:53+08:00">2025-04-20</time></div><span class="post-count"><span class="post-symbolcount"><span class="post-meta-item-icon" title="Word count in article"><span class="icon iconify" data-icon="ri:file-word-line"></span></span> <span title="Word count in article">33.6k</span><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="Reading time"><span class="icon iconify" data-icon="ri:timer-line"></span></span> <span title="Reading time">135m</span></span></span><span class="leancloud_visitors" id="/2025/03/26/rust%E5%AD%A6%E4%B9%A0/" data-flag-title="rustå­¦ä¹ "><span class="post-meta-divider">-</span><span class="post-meta-item-icon" title="Views"><span class="icon iconify" data-icon="ri:eye-line"></span> <span class="leancloud-visitors-count"></span></span></span><span class="post-meta-divider">-</span><a href="#comment"><span class="post-meta-item-icon" title="Comments"><span class="icon iconify" data-icon="ri:chat-3-line"></span> <span class="waline-comment-count" id="/2025/03/26/rust%E5%AD%A6%E4%B9%A0/"></span></span></a><div class="post-classify"><span class="post-category"> <span class="post-meta-item-icon" style="margin-right:3px;"><span class="icon iconify" data-icon="ri:folder-line"></span></span><span itemprop="about" itemscope itemtype="https://schema.org/Thing"><a class="category-item" href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="--text-color:var(--hty-text-color)" itemprop="url" rel="index"><span itemprop="text">å­¦ä¹ ç¬”è®°</span></a></span></span><span class="post-tag"><span class="post-meta-divider">-</span><a class="tag-item" href="/tags/rust/" style="--text-color:var(--hty-text-color)"><span class="post-meta-item-icon"><span class="icon iconify" data-icon="ri:price-tag-3-line"></span></span><span class="tag-name">rust</span></a></span></div></div></header><section class="post-body" itemprop="articleBody"><div class="post-content markdown-body"><h3 id="åŸºæœ¬ä»‹ç»"><a href="#åŸºæœ¬ä»‹ç»" class="headerlink" title="åŸºæœ¬ä»‹ç»"></a>åŸºæœ¬ä»‹ç»</h3><p><strong>Rust</strong> æ˜¯ç”± Mozilla å›¢é˜Ÿäº 2010 å¹´æ¨å‡ºçš„ç³»ç»Ÿçº§ç¼–ç¨‹è¯­è¨€ï¼Œä¸“æ³¨äº <strong>å®‰å…¨æ€§</strong>ã€<strong>æ€§èƒ½</strong> å’Œ <strong>å¹¶å‘æ€§</strong>ã€‚å®ƒé€šè¿‡ç‹¬ç‰¹çš„ç¼–è¯‘æ—¶æ£€æŸ¥æœºåˆ¶ï¼ˆå¦‚æ‰€æœ‰æƒç³»ç»Ÿï¼‰ï¼Œåœ¨æ— éœ€åƒåœ¾å›æ”¶ï¼ˆGCï¼‰çš„å‰æä¸‹ä¿éšœå†…å­˜å®‰å…¨ï¼ŒåŒæ—¶æ€§èƒ½åª²ç¾ C&#x2F;C++ï¼Œè¢« Stack Overflow è¯„ä¸ºæœ€å—å¼€å‘è€…å–œçˆ±çš„è¯­è¨€ä¹‹ä¸€ï¼ˆ2016-2023 è¿ç»­å¤šå¹´ï¼‰ã€‚</p>
<p>æˆ‘ä»¬æ¥é€šè¿‡ä¸€æ®µä»£ç æ¥ç®€å•æµè§ˆä¸€ä¸‹Rustè¯­æ³•</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Rust ç¨‹åºå…¥å£å‡½æ•°ï¼Œè·Ÿå…¶å®ƒè¯­è¨€ä¸€æ ·ï¼Œéƒ½æ˜¯ mainï¼Œè¯¥å‡½æ•°ç›®å‰æ— è¿”å›å€¼</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="comment">// ä½¿ç”¨letæ¥å£°æ˜å˜é‡ï¼Œè¿›è¡Œç»‘å®šï¼Œaæ˜¯ä¸å¯å˜çš„</span></span><br><span class="line">    <span class="comment">// æ­¤å¤„æ²¡æœ‰æŒ‡å®šaçš„ç±»å‹ï¼Œç¼–è¯‘å™¨ä¼šé»˜è®¤æ ¹æ®açš„å€¼ä¸ºaæ¨æ–­ç±»å‹ï¼ši32ï¼Œæœ‰ç¬¦å·32ä½æ•´æ•°</span></span><br><span class="line">    <span class="comment">// è¯­å¥çš„æœ«å°¾å¿…é¡»ä»¥åˆ†å·ç»“å°¾</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = <span class="number">10</span>;</span><br><span class="line">    <span class="comment">// ä¸»åŠ¨æŒ‡å®šbçš„ç±»å‹ä¸ºi32</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">b</span>: <span class="type">i32</span> = <span class="number">20</span>;</span><br><span class="line">    <span class="comment">// è¿™é‡Œæœ‰ä¸¤ç‚¹å€¼å¾—æ³¨æ„ï¼š</span></span><br><span class="line">    <span class="comment">// 1. å¯ä»¥åœ¨æ•°å€¼ä¸­å¸¦ä¸Šç±»å‹:30i32è¡¨ç¤ºæ•°å€¼æ˜¯30ï¼Œç±»å‹æ˜¯i32</span></span><br><span class="line">    <span class="comment">// 2. cæ˜¯å¯å˜çš„ï¼Œmutæ˜¯mutableçš„ç¼©å†™</span></span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">c</span> = <span class="number">30i32</span>;</span><br><span class="line">    <span class="comment">// è¿˜èƒ½åœ¨æ•°å€¼å’Œç±»å‹ä¸­é—´æ·»åŠ ä¸€ä¸ªä¸‹åˆ’çº¿ï¼Œè®©å¯è¯»æ€§æ›´å¥½</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">d</span> = <span class="number">30_i32</span>;</span><br><span class="line">    <span class="comment">// è·Ÿå…¶å®ƒè¯­è¨€ä¸€æ ·ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼æ¥ä½œä¸ºå¦ä¸€ä¸ªå‡½æ•°çš„å‚æ•°</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">e</span> = <span class="title function_ invoke__">add</span>(<span class="title function_ invoke__">add</span>(a, b), <span class="title function_ invoke__">add</span>(c, d));</span><br><span class="line"></span><br><span class="line">    <span class="comment">// println!æ˜¯å®è°ƒç”¨ï¼Œçœ‹èµ·æ¥åƒæ˜¯å‡½æ•°ä½†æ˜¯å®ƒè¿”å›çš„æ˜¯å®å®šä¹‰çš„ä»£ç å—</span></span><br><span class="line">    <span class="comment">// è¯¥å‡½æ•°å°†æŒ‡å®šçš„æ ¼å¼åŒ–å­—ç¬¦ä¸²è¾“å‡ºåˆ°æ ‡å‡†è¾“å‡ºä¸­(æ§åˆ¶å°)</span></span><br><span class="line">    <span class="comment">// &#123;&#125;æ˜¯å ä½ç¬¦ï¼Œåœ¨å…·ä½“æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šæŠŠeçš„å€¼ä»£å…¥è¿›æ¥</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;( a + b ) + ( c + d ) = &#123;&#125;&quot;</span>, e);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œè¾“å…¥ä¸¤ä¸ªi32ç±»å‹çš„32ä½æœ‰ç¬¦å·æ•´æ•°ï¼Œè¿”å›å®ƒä»¬çš„å’Œ</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">add</span>(i: <span class="type">i32</span>, j: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">    <span class="comment">// è¿”å›ç›¸åŠ å€¼ï¼Œè¿™é‡Œå¯ä»¥çœç•¥return</span></span><br><span class="line">    i + j</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š</p>
<ul>
<li>å­—ç¬¦ä¸²ä½¿ç”¨åŒå¼•å· <code>&quot;&quot;</code> è€Œä¸æ˜¯å•å¼•å· <code>&#39;&#39;</code>ï¼ŒRust ä¸­å•å¼•å·æ˜¯ç•™ç»™å•ä¸ªå­—ç¬¦ç±»å‹ï¼ˆ<code>char</code>ï¼‰ä½¿ç”¨çš„</li>
<li>Rust ä½¿ç”¨ <code>&#123;&#125;</code> æ¥ä½œä¸ºæ ¼å¼åŒ–è¾“å‡ºå ä½ç¬¦ï¼Œå…¶å®ƒè¯­è¨€å¯èƒ½ä½¿ç”¨çš„æ˜¯ <code>%s</code>ï¼Œ<code>%d</code>ï¼Œ<code>%p</code> ç­‰ï¼Œç”±äº <code>println!</code> ä¼šè‡ªåŠ¨æ¨å¯¼å‡ºå…·ä½“çš„ç±»å‹ï¼Œå› æ­¤æ— éœ€æ‰‹åŠ¨æŒ‡å®š</li>
</ul>
<h3 id="å˜é‡ç»‘å®šä¸è§£æ„"><a href="#å˜é‡ç»‘å®šä¸è§£æ„" class="headerlink" title="å˜é‡ç»‘å®šä¸è§£æ„"></a>å˜é‡ç»‘å®šä¸è§£æ„</h3><h4 id="å˜é‡å‘½å"><a href="#å˜é‡å‘½å" class="headerlink" title="å˜é‡å‘½å"></a>å˜é‡å‘½å</h4><p>rustå’Œå…¶å®ƒè¯­è¨€ä¸€æ ·ï¼Œéƒ½éœ€è¦éµå¾ª<a target="_blank" rel="noopener" href="https://course.rs/practice/naming.html">å‘½åè§„èŒƒ</a></p>
<p>ä¸‹é¢æ˜¯ä¸€äº›ä¾‹å­ï¼š</p>
<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>å‘½åé£æ ¼</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td>å˜é‡ã€å‡½æ•°ã€æ¨¡å—</td>
<td>è›‡å½¢å‘½åæ³•ï¼ˆsnake_caseï¼‰</td>
<td><code>calculate_length</code>, <code>user_name</code></td>
</tr>
<tr>
<td>ç»“æ„ä½“ã€æšä¸¾ã€ç‰¹æ€§</td>
<td>å¤§é©¼å³°å¼ï¼ˆPascalCaseï¼‰</td>
<td><code>String</code>, <code>HttpRequest</code>, <code>FromStr</code></td>
</tr>
<tr>
<td>å¸¸é‡å’Œé™æ€å˜é‡</td>
<td>å…¨å¤§å†™è›‡å½¢ï¼ˆSCREAMING_SNAKE_CASEï¼‰</td>
<td><code>MAX_CONNECTIONS</code>, <code>DEFAULT_PORT</code></td>
</tr>
<tr>
<td>ç”Ÿå‘½å‘¨æœŸå‚æ•°</td>
<td>çŸ­å°å†™å­—æ¯ + å•å¼•å·</td>
<td><code>&#39;a</code>, <code>&#39;ctx</code>, <code>&#39;static</code></td>
</tr>
<tr>
<td>æ³›å‹ç±»å‹å‚æ•°</td>
<td>ç®€æ˜çš„å¤§é©¼å³°å¼æˆ–å•å­—æ¯</td>
<td><code>T</code>, <code>K</code>, <code>V</code>, <code>Context</code></td>
</tr>
</tbody></table>
<h4 id="å˜é‡ç»‘å®š"><a href="#å˜é‡ç»‘å®š" class="headerlink" title="å˜é‡ç»‘å®š"></a>å˜é‡ç»‘å®š</h4><p>åœ¨å…¶ä»–çš„è¯­è¨€é‡Œï¼Œæˆ‘ä»¬ä½¿ç”¨<code>var a=&quot;hello world&quot;</code>çš„æ–¹å¼ç»™aå¤åˆ¶ï¼Œä¹Ÿå°±æ˜¯æŠŠç­‰å¼å³è¾¹çš„å­—ç¬¦ä¸²èµ‹ç»™äº†å˜é‡aï¼Œè€Œåœ¨rustä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨<code>let a=&quot;hello world&quot;</code>ï¼Œæˆ‘ä»¬åœ¨rustä¸­ç§°è¿™ä¸ªè¿‡ç¨‹ä¸ºå˜é‡ç»‘å®š</p>
<p>ä¸ºä»€ä¹ˆä½¿ç”¨å˜é‡ç»‘å®šå¿™ç€å“©è®¾è®¡äº†Rustæœ€æ ¸å¿ƒçš„åŸåˆ™â€”â€”æ‰€æœ‰æƒï¼Œç®€å•æ¥è®²ï¼Œä»»ä½•å†…å­˜å¯¹è±¡éƒ½æ˜¯æœ‰ä¸»äººçš„ï¼Œè€Œä¸”ä¸€èˆ¬æƒ…å†µå®Œå…¨å±äºå®ƒçš„ä¸»äººï¼Œç»‘å®šå°±æ˜¯æŠŠè¿™ä¸ªå¯¹è±¡ç»‘å®šç»™ä¸€ä¸ªå˜é‡ï¼Œè®©è¿™ä¸ªå˜é‡æˆä¸ºå®ƒçš„ä¸»äººï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯¥å¯¹è±¡ä¹‹å‰çš„ä¸»äººå°±ä¼šä¸§å¤±å¯¹è¯¥å¯¹è±¡çš„æ‰€æœ‰æƒï¼‰</p>
<p>ç»‘å®šå°±æ„å‘³ç€ä¸å¯å˜äº†å—ï¼Ÿ</p>
<h4 id="å˜é‡çš„å¯å˜æ€§"><a href="#å˜é‡çš„å¯å˜æ€§" class="headerlink" title="å˜é‡çš„å¯å˜æ€§"></a>å˜é‡çš„å¯å˜æ€§</h4><p>Rustä¸€èˆ¬æƒ…å†µä¸‹æ˜¯ä¸å¯å˜çš„ï¼Œä½†å¦‚æœå®åœ¨æƒ³å˜ï¼Œå¯ä»¥ä½¿ç”¨**<code>mut</code>**å…³é”®å­—æ¥ä½¿å˜é‡å¯å˜</p>
<p>å¦‚æœæˆ‘ä»¬ä¸ä½¿ç”¨<code>mut</code>ï¼Œé‚£ä¹ˆå˜é‡ä¸€æ—¦ç»‘å®šä¸€ä¸ªæ•°ï¼Œå°±ä¸èƒ½å†ç»‘å®šå¦ä¸€ä¸ªæ•°äº†</p>
<p>ä¾‹å¦‚æˆ‘ä»¬ä¸ä½¿ç”¨mut ï¼Œåœ¨æ–°å»ºçš„ <em>variables</em> ç›®å½•ä¸‹ï¼Œç¼–è¾‘ <em>src&#x2F;main.rs</em> ï¼Œæ”¹ä¸ºä¸‹é¢ä»£ç ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">    x = <span class="number">6</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¿å­˜æ–‡ä»¶ï¼Œå†ç”¨cargo runè¿è¡Œ</p>
<p><strong><img src="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503261937218.png" alt="image-20250326193653127" loading="lazy"></strong> </p>
<p>æŠ¥äº†ä¸€ä¸ªé”™ï¼Œå…·ä½“çš„é”™è¯¯åŸå› æ˜¯ <code>cannot assign twice to immutable variable x</code>ï¼ˆæ— æ³•å¯¹ä¸å¯å˜çš„å˜é‡è¿›è¡Œé‡å¤èµ‹å€¼ï¼‰ï¼Œå› ä¸ºæˆ‘ä»¬æƒ³ä¸ºä¸å¯å˜çš„ <code>x</code> å˜é‡å†æ¬¡èµ‹å€¼ã€‚</p>
<p>è¿™ç§é”™è¯¯æ˜¯ä¸ºäº†é¿å…æ— æ³•é¢„æœŸçš„é”™è¯¯å‘ç”Ÿåœ¨æˆ‘ä»¬çš„å˜é‡ä¸Šï¼šä¸€ä¸ªå˜é‡å¾€å¾€è¢«å¤šå¤„ä»£ç æ‰€ä½¿ç”¨ï¼Œå…¶ä¸­ä¸€éƒ¨åˆ†ä»£ç å‡å®šè¯¥å˜é‡çš„å€¼æ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œè€Œå¦å¤–ä¸€éƒ¨åˆ†ä»£ç å´æ— æƒ…çš„æ”¹å˜äº†è¿™ä¸ªå€¼ï¼Œåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªé”™è¯¯æ˜¯å¾ˆéš¾è¢«å‘ç°çš„ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤šçº¿ç¨‹ç¼–ç¨‹ä¸­ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬ä½¿ç”¨mutï¼Œä»£ç å°±èƒ½æˆåŠŸæ‰§è¡Œ</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">    x = <span class="number">6</span>;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong><img src="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503261939795.png" alt="image-20250326193919766" loading="lazy"></strong></p>
<p>æ‰€ä»¥é€‰æ‹©å¯å˜è¿˜æ˜¯ä¸å¯å˜ï¼Œå–å†³äºä½ çš„ä½¿ç”¨åœºæ™¯ï¼Œä¾‹å¦‚ä¸å¯å˜å¯ä»¥å¸¦æ¥å®‰å…¨æ€§ï¼Œä½†æ˜¯ä¸§å¤±äº†çµæ´»æ€§å’Œæ€§èƒ½ï¼ˆå¦‚æœä½ è¦æ”¹å˜ï¼Œå°±è¦é‡æ–°åˆ›å»ºä¸€ä¸ªæ–°çš„å˜é‡ï¼Œè¿™é‡Œæ¶‰åŠåˆ°å†…å­˜å¯¹è±¡çš„å†åˆ†é…ï¼‰ã€‚è€Œå¯å˜å˜é‡æœ€å¤§çš„å¥½å¤„å°±æ˜¯ä½¿ç”¨ä¸Šçš„çµæ´»æ€§å’Œæ€§èƒ½ä¸Šçš„æå‡ã€‚</p>
<h4 id="ä½¿ç”¨ä¸‹åˆ’çº¿å¼€å¤´å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡"><a href="#ä½¿ç”¨ä¸‹åˆ’çº¿å¼€å¤´å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡" class="headerlink" title="ä½¿ç”¨ä¸‹åˆ’çº¿å¼€å¤´å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡"></a>ä½¿ç”¨ä¸‹åˆ’çº¿å¼€å¤´å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡</h4><p>å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªå˜é‡å´ä¸åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨å®ƒï¼ŒRustå°±ä¼šç»™å‡ºä¸€ä¸ªè­¦å‘Šï¼Œå› ä¸ºè¿™å¯èƒ½ä¼šæ˜¯ä¸ª BUGï¼Œå¦‚æœä¸å¸Œæœ›rustç»™å‡ºè­¦å‘Šï¼Œå°±å¯ä»¥åœ¨rustå‰é¢åŠ ä¸€ä¸ªä¸‹åˆ’çº¿æ¥é¿å…å®ƒ</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>()&#123;</span><br><span class="line">	<span class="keyword">let</span> <span class="variable">_x</span>=<span class="number">10</span>;</span><br><span class="line">	<span class="keyword">let</span> <span class="variable">y</span>=<span class="number">10</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503261950017.png" alt="image-20250326195013988" loading="lazy"></p>
<p>å¯ä»¥çœ‹åˆ°ï¼Œä¸¤ä¸ªå˜é‡éƒ½æ˜¯åªæœ‰å£°æ˜ï¼Œæ²¡æœ‰ä½¿ç”¨ï¼Œä½†æ˜¯ç¼–è¯‘å™¨å´ç‹¬ç‹¬ç»™å‡ºäº† <code>y</code> æœªè¢«ä½¿ç”¨çš„è­¦å‘Šï¼Œå……åˆ†è¯´æ˜äº† <code>_</code> å˜é‡åå‰ç¼€åœ¨è¿™é‡Œå‘æŒ¥çš„ä½œç”¨ã€‚å¹¶ä¸”rustç»™å‡ºäº†ä¿®å¤çš„å»ºè®®</p>
<h4 id="å˜é‡è§£æ„"><a href="#å˜é‡è§£æ„" class="headerlink" title="å˜é‡è§£æ„"></a>å˜é‡è§£æ„</h4><p>let è¡¨è¾¾å¼ä¸ä»…ä»…ç”¨äºå˜é‡çš„ç»‘å®šï¼Œè€Œä¸”è¿˜èƒ½è¿›è¡Œå¤æ‚å˜é‡çš„è§£æ„:ä»ä¸€ä¸ªç›¸å¯¹å¤æ‚çš„å˜é‡é‡Œï¼ŒåŒ¹é…å‡ºè¯¥å˜é‡çš„ä¸€éƒ¨åˆ†.</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> (a, <span class="keyword">mut</span> b): (<span class="type">bool</span>,<span class="type">bool</span>) = (<span class="literal">true</span>, <span class="literal">false</span>);</span><br><span class="line">    <span class="comment">// a = true,ä¸å¯å˜; b = falseï¼Œå¯å˜</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a = &#123;:?&#125;, b = &#123;:?&#125;&quot;</span>, a, b);</span><br><span class="line"></span><br><span class="line">    b = <span class="literal">true</span>;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(a, b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="è§£æ„å¼èµ‹å€¼"><a href="#è§£æ„å¼èµ‹å€¼" class="headerlink" title="è§£æ„å¼èµ‹å€¼"></a>è§£æ„å¼èµ‹å€¼</h5><p>è§£æ„å¼èµ‹å€¼æ˜¯æŒ‡å°†ä¸€ä¸ªå¤åˆæ•°æ®ç±»å‹ï¼ˆå¦‚å…ƒç»„ã€æ•°ç»„ã€ç»“æ„ä½“ç­‰ï¼‰çš„å†…éƒ¨å€¼æå–å¹¶èµ‹å€¼ç»™å¤šä¸ªå˜é‡çš„æ“ä½œã€‚åœ¨ Rust ä¸­ï¼Œè§£æ„èµ‹å€¼é€šå¸¸ç”¨äºå°†ä¸€ä¸ªå¤æ‚çš„æ•°æ®ç»“æ„çš„å„ä¸ªéƒ¨åˆ†æå–åˆ°å•ç‹¬çš„å˜é‡ä¸­ã€‚</p>
<p>è§£æ„å¼èµ‹å€¼åœ¨ Rust ä¸­å¹¶ä¸ç›´æ¥ä½¿ç”¨â€œèµ‹å€¼â€çš„å½¢å¼ï¼ˆå¦‚ä¼ ç»Ÿç¼–ç¨‹è¯­è¨€ä¸­çš„è§£æ„èµ‹å€¼ï¼‰ï¼Œè€Œæ˜¯é€šè¿‡æ¨¡å¼åŒ¹é…æ¥å®ç°çš„ã€‚åœ¨ Rust ä¸­ï¼Œè¿™ç§è§£æ„é€šå¸¸æ˜¯é€šè¿‡ <code>let</code> è¯­å¥å’ŒåŒ¹é…æ¨¡å¼ï¼ˆå¦‚å…ƒç»„æ¨¡å¼ã€æ•°ç»„æ¨¡å¼ã€ç»“æ„ä½“æ¨¡å¼ç­‰ï¼‰æ¥å®Œæˆçš„ã€‚</p>
<p>åœ¨ <a target="_blank" rel="noopener" href="https://course.rs/appendix/rust-versions/1.59.html">Rust 1.59</a> ç‰ˆæœ¬åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨èµ‹å€¼è¯­å¥çš„å·¦å¼ä¸­ä½¿ç”¨å…ƒç»„ã€åˆ‡ç‰‡å’Œç»“æ„ä½“æ¨¡å¼äº†ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Struct</span> &#123;</span><br><span class="line">    e: <span class="type">i32</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> (a, b, c, d, e);</span><br><span class="line"></span><br><span class="line">    (a, b) = (<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="comment">// _ ä»£è¡¨åŒ¹é…ä¸€ä¸ªå€¼ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸å…³å¿ƒå…·ä½“çš„å€¼æ˜¯ä»€ä¹ˆï¼Œå› æ­¤æ²¡æœ‰ä½¿ç”¨ä¸€ä¸ªå˜é‡åè€Œæ˜¯ä½¿ç”¨äº† _</span></span><br><span class="line">    [c, .., d, _] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">    Struct &#123; e, .. &#125; = Struct &#123; e: <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">assert_eq!</span>([<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">4</span>, <span class="number">5</span>], [a, b, c, d, e]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ç§ä½¿ç”¨æ–¹å¼è·Ÿä¹‹å‰çš„ <code>let</code> ä¿æŒäº†ä¸€è‡´æ€§ï¼Œä½†æ˜¯ <code>let</code> ä¼šé‡æ–°ç»‘å®šï¼Œè€Œè¿™é‡Œä»…ä»…æ˜¯å¯¹ä¹‹å‰ç»‘å®šçš„å˜é‡è¿›è¡Œå†èµ‹å€¼ã€‚</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä½¿ç”¨ <code>+=</code> çš„èµ‹å€¼è¯­å¥è¿˜ä¸æ”¯æŒè§£æ„å¼èµ‹å€¼ã€‚</p>
<h4 id="å˜é‡å’Œå¸¸é‡ä¹‹é—´çš„å·®å¼‚"><a href="#å˜é‡å’Œå¸¸é‡ä¹‹é—´çš„å·®å¼‚" class="headerlink" title="å˜é‡å’Œå¸¸é‡ä¹‹é—´çš„å·®å¼‚"></a>å˜é‡å’Œå¸¸é‡ä¹‹é—´çš„å·®å¼‚</h4><p>å˜é‡çš„å€¼ä¸èƒ½æ›´æ”¹å¯èƒ½è®©ä½ æƒ³èµ·å…¶ä»–å¦ä¸€ä¸ªå¾ˆå¤šè¯­è¨€éƒ½æœ‰çš„ç¼–ç¨‹æ¦‚å¿µï¼š<strong>å¸¸é‡</strong>(<em>constant</em>)ã€‚ä¸ä¸å¯å˜å˜é‡ä¸€æ ·ï¼Œå¸¸é‡ä¹Ÿæ˜¯ç»‘å®šåˆ°ä¸€ä¸ªå¸¸é‡åä¸”ä¸å…è®¸æ›´æ”¹çš„å€¼ï¼Œä½†æ˜¯å¸¸é‡å’Œå˜é‡ä¹‹é—´å­˜åœ¨ä¸€äº›å·®å¼‚ï¼š</p>
<ul>
<li>å¸¸é‡ä¸å…è®¸ä½¿ç”¨ <code>mut</code>ã€‚<strong>å¸¸é‡ä¸ä»…ä»…é»˜è®¤ä¸å¯å˜ï¼Œè€Œä¸”è‡ªå§‹è‡³ç»ˆä¸å¯å˜</strong>ï¼Œå› ä¸ºå¸¸é‡åœ¨ç¼–è¯‘å®Œæˆåï¼Œå·²ç»ç¡®å®šå®ƒçš„å€¼ã€‚</li>
<li>å¸¸é‡ä½¿ç”¨ <code>const</code> å…³é”®å­—è€Œä¸æ˜¯ <code>let</code> å…³é”®å­—æ¥å£°æ˜ï¼Œå¹¶ä¸”å€¼çš„ç±»å‹<strong>å¿…é¡»</strong>æ ‡æ³¨ã€‚</li>
</ul>
<p>ä¸‹é¢æ˜¯ä¸€ä¸ªå¸¸é‡å£°æ˜çš„ä¾‹å­ï¼Œå…¶å¸¸é‡åä¸º <code>MAX_POINTS</code>ï¼Œå€¼è®¾ç½®ä¸º <code>100,000</code>ã€‚ï¼ˆRust å¸¸é‡çš„å‘½åçº¦å®šæ˜¯å…¨éƒ¨å­—æ¯éƒ½ä½¿ç”¨å¤§å†™ï¼Œå¹¶ä½¿ç”¨ä¸‹åˆ’çº¿åˆ†éš”å•è¯ï¼Œå¦å¤–å¯¹æ•°å­—å­—é¢é‡å¯æ’å…¥ä¸‹åˆ’çº¿ä»¥æé«˜å¯è¯»æ€§ï¼‰ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MAX_POINTS: <span class="type">u32</span> = <span class="number">100_000</span>;</span><br></pre></td></tr></table></figure>

<p>å¸¸é‡å¯ä»¥åœ¨ä»»æ„ä½œç”¨åŸŸå†…å£°æ˜ï¼ŒåŒ…æ‹¬å…¨å±€ä½œç”¨åŸŸï¼Œåœ¨å£°æ˜çš„ä½œç”¨åŸŸå†…ï¼Œå¸¸é‡åœ¨ç¨‹åºè¿è¡Œçš„æ•´ä¸ªè¿‡ç¨‹ä¸­éƒ½æœ‰æ•ˆã€‚å¯¹äºéœ€è¦åœ¨å¤šå¤„ä»£ç å…±äº«ä¸€ä¸ªä¸å¯å˜çš„å€¼æ—¶éå¸¸æœ‰ç”¨ï¼Œä¾‹å¦‚æ¸¸æˆä¸­å…è®¸ç©å®¶èµšå–çš„æœ€å¤§ç‚¹æ•°æˆ–å…‰é€Ÿã€‚</p>
<blockquote>
<p>åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œæœ€å¥½å°†ç¨‹åºä¸­ç”¨åˆ°çš„ç¡¬ç¼–ç å€¼éƒ½å£°æ˜ä¸ºå¸¸é‡ï¼Œå¯¹äºä»£ç åç»­çš„ç»´æŠ¤æœ‰è«å¤§çš„å¸®åŠ©ã€‚å¦‚æœå°†æ¥éœ€è¦æ›´æ”¹ç¡¬ç¼–ç çš„å€¼ï¼Œä½ ä¹Ÿåªéœ€è¦åœ¨ä»£ç ä¸­æ›´æ”¹ä¸€å¤„å³å¯ã€‚</p>
</blockquote>
<h4 id="å˜é‡çš„é®è”½"><a href="#å˜é‡çš„é®è”½" class="headerlink" title="å˜é‡çš„é®è”½"></a>å˜é‡çš„é®è”½</h4><p>rustå…è®¸å£°æ˜ç›¸åŒçš„å˜é‡åï¼Œä½†åé¢çš„å˜é‡åä¼šé®è”½æ‰å‰é¢çš„å˜é‡å</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line">    <span class="comment">// åœ¨mainå‡½æ•°çš„ä½œç”¨åŸŸå†…å¯¹ä¹‹å‰çš„xè¿›è¡Œé®è”½</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = x + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="comment">// åœ¨å½“å‰çš„èŠ±æ‹¬å·ä½œç”¨åŸŸå†…ï¼Œå¯¹ä¹‹å‰çš„xè¿›è¡Œé®è”½</span></span><br><span class="line">        <span class="keyword">let</span> <span class="variable">x</span> = x * <span class="number">2</span>;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;The value of x in the inner scope is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡º</p>
<p><img src="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503262007537.png" alt="image-20250326200735503" loading="lazy"></p>
<p>è¿™ä¸ªç¨‹åºé¦–å…ˆå°†æ•°å€¼ <code>5</code> ç»‘å®šåˆ° <code>x</code>ï¼Œç„¶åé€šè¿‡é‡å¤ä½¿ç”¨ <code>let x =</code> æ¥é®è”½ä¹‹å‰çš„ <code>x</code>ï¼Œå¹¶å–åŸæ¥çš„å€¼åŠ ä¸Š <code>1</code>ï¼Œæ‰€ä»¥ <code>x</code> çš„å€¼å˜æˆäº† <code>6</code>ã€‚ç¬¬ä¸‰ä¸ª <code>let</code> è¯­å¥åŒæ ·é®è”½å‰é¢çš„ <code>x</code>ï¼Œå–ä¹‹å‰çš„å€¼å¹¶ä¹˜ä¸Š <code>2</code>ï¼Œå¾—åˆ°çš„ <code>x</code> æœ€ç»ˆå€¼ä¸º <code>12</code>ã€‚</p>
<p>è¿™å’Œ <code>mut</code> å˜é‡çš„ä½¿ç”¨æ˜¯ä¸åŒçš„ï¼Œç¬¬äºŒä¸ª <code>let</code> ç”Ÿæˆäº†å®Œå…¨ä¸åŒçš„æ–°å˜é‡ï¼Œä¸¤ä¸ªå˜é‡åªæ˜¯æ°å¥½æ‹¥æœ‰åŒæ ·çš„åç§°ï¼Œæ¶‰åŠä¸€æ¬¡å†…å­˜å¯¹è±¡çš„å†åˆ†é… ï¼Œè€Œ <code>mut</code> å£°æ˜çš„å˜é‡ï¼Œå¯ä»¥ä¿®æ”¹åŒä¸€ä¸ªå†…å­˜åœ°å€ä¸Šçš„å€¼ï¼Œå¹¶ä¸ä¼šå‘ç”Ÿå†…å­˜å¯¹è±¡çš„å†åˆ†é…ï¼Œæ€§èƒ½è¦æ›´å¥½ã€‚</p>
<h3 id="åŸºæœ¬ç±»å‹"><a href="#åŸºæœ¬ç±»å‹" class="headerlink" title="åŸºæœ¬ç±»å‹"></a>åŸºæœ¬ç±»å‹</h3><p>Rust æ¯ä¸ªå€¼éƒ½æœ‰å…¶ç¡®åˆ‡çš„æ•°æ®ç±»å‹ï¼Œæ€»çš„æ¥è¯´å¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼šåŸºæœ¬ç±»å‹å’Œå¤åˆç±»å‹ã€‚ åŸºæœ¬ç±»å‹æ„å‘³ç€å®ƒä»¬å¾€å¾€æ˜¯ä¸€ä¸ªæœ€å°åŒ–åŸå­ç±»å‹ï¼Œæ— æ³•è§£æ„ä¸ºå…¶å®ƒç±»å‹ï¼ˆä¸€èˆ¬æ„ä¹‰ä¸Šæ¥è¯´ï¼‰ï¼Œç”±ä»¥ä¸‹ç»„æˆï¼š</p>
<ul>
<li>æ•°å€¼ç±»å‹ï¼šæœ‰ç¬¦å·æ•´æ•° (<code>i8</code>, <code>i16</code>, <code>i32</code>, <code>i64</code>, <code>isize</code>)ã€ æ— ç¬¦å·æ•´æ•° (<code>u8</code>, <code>u16</code>, <code>u32</code>, <code>u64</code>, <code>usize</code>) ã€æµ®ç‚¹æ•° (<code>f32</code>, <code>f64</code>)ã€ä»¥åŠæœ‰ç†æ•°ã€å¤æ•°</li>
<li>å­—ç¬¦ä¸²ï¼šå­—ç¬¦ä¸²å­—é¢é‡å’Œå­—ç¬¦ä¸²åˆ‡ç‰‡ <code>&amp;str</code></li>
<li>å¸ƒå°”ç±»å‹ï¼š<code>true</code> å’Œ <code>false</code></li>
<li>å­—ç¬¦ç±»å‹ï¼šè¡¨ç¤ºå•ä¸ª Unicode å­—ç¬¦ï¼Œå­˜å‚¨ä¸º 4 ä¸ªå­—èŠ‚</li>
<li>å•å…ƒç±»å‹ï¼šå³ <code>()</code> ï¼Œå…¶å”¯ä¸€çš„å€¼ä¹Ÿæ˜¯ <code>()</code></li>
</ul>
<h4 id="æ•°å€¼ç±»å‹"><a href="#æ•°å€¼ç±»å‹" class="headerlink" title="æ•°å€¼ç±»å‹"></a>æ•°å€¼ç±»å‹</h4><h5 id="æ•´æ•°ç±»å‹"><a href="#æ•´æ•°ç±»å‹" class="headerlink" title="æ•´æ•°ç±»å‹"></a>æ•´æ•°ç±»å‹</h5><p>æ•´æ•°æ˜¯æ²¡æœ‰å°æ•°éƒ¨åˆ†çš„æ•°å­—ï¼Œä¹‹å‰ä½¿ç”¨è¿‡çš„i32ç±»å‹ï¼Œè¡¨ç¤ºæœ‰ç¬¦å·çš„32ä¸ºæ•´æ•°(iæ˜¯è‹±æ–‡å•è¯integerçš„é¦–å­—æ¯ï¼Œä¸ä¹‹ç›¸åçš„æ˜¯uï¼Œä»£è¡¨æ— ç¬¦å·çš„unsignedç±»å‹ï¼‰ï¼Œä¸‹è¡¨æ˜¾ç¤ºäº†Rustä¸­çš„å†…ç½®å‡½æ•°æ•´æ•°ç±»å‹:</p>
<table>
<thead>
<tr>
<th>é•¿åº¦</th>
<th>æœ‰ç¬¦å·ç±»å‹</th>
<th>æ— ç¬¦å·ç±»å‹</th>
</tr>
</thead>
<tbody><tr>
<td>8 ä½</td>
<td><code>i8</code></td>
<td><code>u8</code></td>
</tr>
<tr>
<td>16 ä½</td>
<td><code>i16</code></td>
<td><code>u16</code></td>
</tr>
<tr>
<td>32 ä½</td>
<td><code>i32</code></td>
<td><code>u32</code></td>
</tr>
<tr>
<td>64 ä½</td>
<td><code>i64</code></td>
<td><code>u64</code></td>
</tr>
<tr>
<td>128 ä½</td>
<td><code>i128</code></td>
<td><code>u128</code></td>
</tr>
<tr>
<td>è§†æ¶æ„è€Œå®š</td>
<td><code>isize</code></td>
<td><code>usize</code></td>
</tr>
</tbody></table>
<p>ç±»å‹å®šä¹‰çš„å½¢å¼ç»Ÿä¸€ä¸ºï¼š<code>æœ‰æ— ç¬¦å· + ç±»å‹å¤§å°(ä½æ•°)</code>ã€‚<strong>æ— ç¬¦å·æ•°</strong>è¡¨ç¤ºæ•°å­—åªèƒ½å–æ­£æ•°å’Œ 0ï¼Œè€Œ<strong>æœ‰ç¬¦å·</strong>åˆ™è¡¨ç¤ºæ•°å­—å¯ä»¥å–æ­£æ•°ã€è´Ÿæ•°è¿˜æœ‰ 0ã€‚å°±åƒåœ¨çº¸ä¸Šå†™æ•°å­—ä¸€æ ·ï¼šå½“è¦å¼ºè°ƒç¬¦å·æ—¶ï¼Œæ•°å­—å‰é¢å¯ä»¥å¸¦ä¸Šæ­£å·æˆ–è´Ÿå·ï¼›ç„¶è€Œï¼Œå½“å¾ˆæ˜æ˜¾ç¡®å®šæ•°å­—ä¸ºæ­£æ•°æ—¶ï¼Œå°±ä¸éœ€è¦åŠ ä¸Šæ­£å·äº†ã€‚æœ‰ç¬¦å·æ•°å­—ä»¥<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Two's_complement">è¡¥ç </a>å½¢å¼å­˜å‚¨ã€‚</p>
<p>æ¯ä¸ªæœ‰ç¬¦å·ç±»å‹è§„å®šçš„æ•°å­—èŒƒå›´æ˜¯ -(2n - 1) ~ 2n - 1 - 1ï¼Œå…¶ä¸­ <code>n</code> æ˜¯è¯¥å®šä¹‰å½¢å¼çš„ä½é•¿åº¦ã€‚å› æ­¤ <code>i8</code> å¯å­˜å‚¨æ•°å­—èŒƒå›´æ˜¯ -(27) ~ 27 - 1ï¼Œå³ -128 ~ 127ã€‚æ— ç¬¦å·ç±»å‹å¯ä»¥å­˜å‚¨çš„æ•°å­—èŒƒå›´æ˜¯ 0 ~ 2n - 1ï¼Œæ‰€ä»¥ <code>u8</code> èƒ½å¤Ÿå­˜å‚¨çš„æ•°å­—ä¸º 0 ~ 28 - 1ï¼Œå³ 0 ~ 255ã€‚</p>
<p>æ­¤å¤–ï¼Œ<code>isize</code> å’Œ <code>usize</code> ç±»å‹å–å†³äºç¨‹åºè¿è¡Œçš„è®¡ç®—æœº CPU ç±»å‹ï¼š è‹¥ CPU æ˜¯ 32 ä½çš„ï¼Œåˆ™è¿™ä¸¤ä¸ªç±»å‹æ˜¯ 32 ä½çš„ï¼ŒåŒç†ï¼Œè‹¥ CPU æ˜¯ 64 ä½ï¼Œé‚£ä¹ˆå®ƒä»¬åˆ™æ˜¯ 64 ä½ã€‚</p>
<p>æ•´å‹å­—é¢é‡å¯ä»¥ç”¨ä¸‹è¡¨çš„å½¢å¼ä¹¦å†™ï¼š</p>
<table>
<thead>
<tr>
<th>æ•°å­—å­—é¢é‡</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td>åè¿›åˆ¶</td>
<td><code>98_222</code></td>
</tr>
<tr>
<td>åå…­è¿›åˆ¶</td>
<td><code>0xff</code></td>
</tr>
<tr>
<td>å…«è¿›åˆ¶</td>
<td><code>0o77</code></td>
</tr>
<tr>
<td>äºŒè¿›åˆ¶</td>
<td><code>0b1111_0000</code></td>
</tr>
<tr>
<td>å­—èŠ‚ (ä»…é™äº <code>u8</code>)</td>
<td><code>b&#39;A&#39;</code></td>
</tr>
</tbody></table>
<h6 id="æ•´å‹æº¢å‡º"><a href="#æ•´å‹æº¢å‡º" class="headerlink" title="æ•´å‹æº¢å‡º"></a>æ•´å‹æº¢å‡º</h6><p>å‡è®¾æˆ‘ä»¬æœ‰ä¸ªu8ç±»å‹çš„æ•°ï¼Œå®ƒå¯ä»¥å­˜æ”¾0åˆ°255çš„æ•°ï¼Œå¦‚æœæˆ‘ä»¬ä¿®æ”¹ä¸º256æˆ–æ›´å¤§ï¼Œå°±ä¼šå‘ç”Ÿæ•´å‹æº¢å‡ºï¼Œå…³äºè¿™ä¸€è¡Œä¸º Rust æœ‰ä¸€äº›æœ‰è¶£çš„è§„åˆ™ï¼šå½“åœ¨ debug æ¨¡å¼ç¼–è¯‘æ—¶ï¼ŒRust ä¼šæ£€æŸ¥æ•´å‹æº¢å‡ºï¼Œè‹¥å­˜åœ¨è¿™äº›é—®é¢˜ï¼Œåˆ™ä½¿ç¨‹åºåœ¨ç¼–è¯‘æ—¶ <em>panic</em>(å´©æºƒ,Rust ä½¿ç”¨è¿™ä¸ªæœ¯è¯­æ¥è¡¨æ˜ç¨‹åºå› é”™è¯¯è€Œé€€å‡º)ã€‚</p>
<p>åœ¨å½“ä½¿ç”¨ <code>--release</code> å‚æ•°è¿›è¡Œ release æ¨¡å¼æ„å»ºæ—¶ï¼ŒRust <strong>ä¸</strong>æ£€æµ‹æº¢å‡ºã€‚ç›¸åï¼Œå½“æ£€æµ‹åˆ°æ•´å‹æº¢å‡ºæ—¶ï¼ŒRust ä¼šæŒ‰ç…§è¡¥ç å¾ªç¯æº¢å‡ºï¼ˆ<em>twoâ€™s complement wrapping</em>ï¼‰çš„è§„åˆ™å¤„ç†ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¤§äºè¯¥ç±»å‹æœ€å¤§å€¼çš„æ•°å€¼ä¼šè¢«è¡¥ç è½¬æ¢æˆè¯¥ç±»å‹èƒ½å¤Ÿæ”¯æŒçš„å¯¹åº”æ•°å­—çš„æœ€å°å€¼ã€‚æ¯”å¦‚åœ¨ <code>u8</code> çš„æƒ…å†µä¸‹ï¼Œ256 å˜æˆ 0ï¼Œ257 å˜æˆ 1ï¼Œä¾æ­¤ç±»æ¨ã€‚ç¨‹åºä¸ä¼š <em>panic</em>ï¼Œä½†æ˜¯è¯¥å˜é‡çš„å€¼å¯èƒ½ä¸æ˜¯ä½ æœŸæœ›çš„å€¼ã€‚ä¾èµ–è¿™ç§é»˜è®¤è¡Œä¸ºçš„ä»£ç éƒ½åº”è¯¥è¢«è®¤ä¸ºæ˜¯é”™è¯¯çš„ä»£ç ã€‚</p>
<p>è¦æ˜¾å¼å¤„ç†å¯èƒ½çš„æº¢å‡ºï¼Œå¯ä»¥ä½¿ç”¨æ ‡å‡†åº“é’ˆå¯¹åŸå§‹æ•°å­—ç±»å‹æä¾›çš„è¿™äº›æ–¹æ³•ï¼š</p>
<ul>
<li>ä½¿ç”¨ <code>wrapping_*</code> æ–¹æ³•åœ¨æ‰€æœ‰æ¨¡å¼ä¸‹éƒ½æŒ‰ç…§è¡¥ç å¾ªç¯æº¢å‡ºè§„åˆ™å¤„ç†ï¼Œä¾‹å¦‚ <code>wrapping_add</code></li>
<li>å¦‚æœä½¿ç”¨ <code>checked_*</code> æ–¹æ³•æ—¶å‘ç”Ÿæº¢å‡ºï¼Œåˆ™è¿”å› <code>None</code> å€¼</li>
<li>ä½¿ç”¨ <code>overflowing_*</code> æ–¹æ³•è¿”å›è¯¥å€¼å’Œä¸€ä¸ªæŒ‡ç¤ºæ˜¯å¦å­˜åœ¨æº¢å‡ºçš„å¸ƒå°”å€¼</li>
<li>ä½¿ç”¨ <code>saturating_*</code> æ–¹æ³•ï¼Œå¯ä»¥é™å®šè®¡ç®—åçš„ç»“æœä¸è¶…è¿‡ç›®æ ‡ç±»å‹çš„æœ€å¤§å€¼æˆ–ä½äºæœ€å°å€¼ï¼Œä¾‹å¦‚:</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//101æ²¡æœ‰è¶…è¿‡u8çš„æœ€å¤§å€¼ï¼Œè¿‡å¯ä»¥è¿”å›101</span></span><br><span class="line"><span class="built_in">assert_eq!</span>(<span class="number">100u8</span>.<span class="title function_ invoke__">saturating_add</span>(<span class="number">1</span>), <span class="number">101</span>); </span><br><span class="line"></span><br><span class="line"><span class="comment">//å°è¯•å°† 255 åŠ ä¸Š 127 æ—¶ï¼Œç»“æœ 382 è¶…å‡ºäº† u8 èƒ½è¡¨ç¤ºçš„æœ€å¤§å€¼ï¼ˆ255ï¼‰ã€‚ä½†æ˜¯ï¼Œsaturating_add ä¼šç¡®ä¿ä¸ä¼šå‘ç”Ÿæº¢å‡ºï¼Œè€Œæ˜¯è¿”å› u8 ç±»å‹çš„æœ€å¤§å€¼ 255ã€‚</span></span><br><span class="line"><span class="built_in">assert_eq!</span>(<span class="type">u8</span>::MAX.<span class="title function_ invoke__">saturating_add</span>(<span class="number">127</span>), <span class="type">u8</span>::MAX);</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢æ˜¯ä¸€ä¸ªæ¼”ç¤ºwrapping_*æ–¹æ³•çš„ç¤ºä¾‹</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> : <span class="type">u8</span> = <span class="number">255</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">b</span> = a.<span class="title function_ invoke__">wrapping_add</span>(<span class="number">20</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, b);  <span class="comment">// 19</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºæ˜¯19ï¼Œç›¸å½“äºæ˜¯275mod256&#x3D;19</p>
<h5 id="æµ®ç‚¹ç±»å‹"><a href="#æµ®ç‚¹ç±»å‹" class="headerlink" title="æµ®ç‚¹ç±»å‹"></a>æµ®ç‚¹ç±»å‹</h5><p>æµ®ç‚¹ç±»å‹æ•°å­—æ˜¯å¸¦æœ‰å°æ•°ç‚¹çš„æ•°å­—ï¼Œåœ¨rustä¸­æµ®ç‚¹ç±»å‹ä¹Ÿæœ‰ä¸¤ç§åŸºæœ¬ç±»å‹:f32å’Œf64ï¼Œåˆ†åˆ«ä¸º32ä½å’Œ64ä½å¤§å°ã€‚é»˜è®¤æµ®ç‚¹ç±»å‹æ˜¯f64ï¼Œåœ¨çº¿ä»£çš„CPUä¸­å®ƒçš„é€Ÿåº¦ä¸f32å‡ ä¹ç›¸åŒï¼Œä½†ç²¾åº¦æ›´é«˜</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">2.0</span>; <span class="comment">// f64</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">y</span>: <span class="type">f32</span> = <span class="number">3.0</span>; <span class="comment">// f32</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>f32</code> ç±»å‹æ˜¯å•ç²¾åº¦æµ®ç‚¹å‹ï¼Œ<code>f64</code> ä¸ºåŒç²¾åº¦ã€‚</p>
<p>æ³¨æ„ï¼š1.<strong>æµ®ç‚¹æ•°å¾€å¾€æ˜¯ä½ æƒ³è¦æ•°å­—çš„è¿‘ä¼¼è¡¨è¾¾</strong> </p>
<p>â€‹			2.<strong>æµ®ç‚¹æ•°åœ¨æŸäº›ç‰¹æ€§ä¸Šæ˜¯åç›´è§‰çš„</strong></p>
<p>æ‰€ä»¥æœ‰äº›æµ®ç‚¹æ•°è™½ç„¶çœ‹ä¸Šå»ç›¸ç­‰ï¼Œä½†ç”±äºç²¾åº¦é—®é¢˜ï¼Œå¹¶ä¸ç›¸ç­‰</p>
<h6 id="NaN"><a href="#NaN" class="headerlink" title="NaN"></a>NaN</h6><p>å¯¹äºæ•°å­¦ä¸Šæœªå®šä¹‰çš„ç»“æœï¼Œä¾‹å¦‚å¯¹è´Ÿæ•°å–å¹³æ–¹æ ¹ <code>-42.1.sqrt()</code> ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªç‰¹æ®Šçš„ç»“æœï¼šRust çš„æµ®ç‚¹æ•°ç±»å‹ä½¿ç”¨ <code>NaN</code> (not a number) æ¥å¤„ç†è¿™äº›æƒ…å†µã€‚</p>
<p>**æ‰€æœ‰è·Ÿ <code>NaN</code> äº¤äº’çš„æ“ä½œï¼Œéƒ½ä¼šè¿”å›ä¸€ä¸ª <code>NaN</code>**ï¼Œè€Œä¸” <code>NaN</code> ä¸èƒ½ç”¨æ¥æ¯”è¾ƒï¼Œä¸‹é¢çš„ä»£ç ä¼šå´©æºƒï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="variable">x</span> = (-<span class="number">42.0_f32</span>).<span class="title function_ invoke__">sqrt</span>();</span><br><span class="line">  <span class="built_in">assert_eq!</span>(x, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å‡ºäºé˜²å¾¡æ€§ç¼–ç¨‹çš„è€ƒè™‘ï¼Œå¯ä»¥ä½¿ç”¨ <code>is_nan()</code> ç­‰æ–¹æ³•ï¼Œå¯ä»¥ç”¨æ¥åˆ¤æ–­ä¸€ä¸ªæ•°å€¼æ˜¯å¦æ˜¯ <code>NaN</code> ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = (-<span class="number">42.0_f32</span>).<span class="title function_ invoke__">sqrt</span>();</span><br><span class="line">    <span class="keyword">if</span> x.<span class="title function_ invoke__">is_nan</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;æœªå®šä¹‰çš„æ•°å­¦è¡Œä¸º&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥NaNçš„ç”¨å¤„å¤§æ¦‚æ˜¯ç”¨æ¥æŠ›å‡ºè®¡ç®—è¿‡ç¨‹ä¸­çš„å¼‚å¸¸çš„</p>
<h5 id="æ•°å­—è¿ç®—"><a href="#æ•°å­—è¿ç®—" class="headerlink" title="æ•°å­—è¿ç®—"></a>æ•°å­—è¿ç®—</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="comment">// åŠ æ³•</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">sum</span> = <span class="number">5</span> + <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// å‡æ³•</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">difference</span> = <span class="number">95.5</span> - <span class="number">4.3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä¹˜æ³•</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">product</span> = <span class="number">4</span> * <span class="number">30</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// é™¤æ³•</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">quotient</span> = <span class="number">56.7</span> / <span class="number">32.2</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// æ±‚ä½™</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">remainder</span> = <span class="number">43</span> % <span class="number">5</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™äº›è¯­å¥ä¸­çš„æ¯ä¸ªè¡¨è¾¾å¼éƒ½ä½¿ç”¨äº†æ•°å­¦è¿ç®—ç¬¦ï¼Œå¹¶ä¸”è®¡ç®—ç»“æœç»‘å®šåˆ°ä¸€ä¸ªå˜é‡ä¸Šï¼Œ<a target="_blank" rel="noopener" href="https://course.rs/appendix/operators.html#%E8%BF%90%E7%AE%97%E7%AC%A6">é™„å½• B</a> ä¸­ç»™å‡ºäº† Rust æä¾›çš„æ‰€æœ‰è¿ç®—ç¬¦çš„åˆ—è¡¨ã€‚</p>
<p>å†æ¥çœ‹ä¸€ä¸ªç»¼åˆæ€§çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">  <span class="comment">// ç¼–è¯‘å™¨ä¼šè¿›è¡Œè‡ªåŠ¨æ¨å¯¼ï¼Œç»™äºˆtwenty i32çš„ç±»å‹</span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">twenty</span> = <span class="number">20</span>;</span><br><span class="line">  <span class="comment">// ç±»å‹æ ‡æ³¨</span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">twenty_one</span>: <span class="type">i32</span> = <span class="number">21</span>;</span><br><span class="line">  <span class="comment">// é€šè¿‡ç±»å‹åç¼€çš„æ–¹å¼è¿›è¡Œç±»å‹æ ‡æ³¨ï¼š22æ˜¯i32ç±»å‹</span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">twenty_two</span> = <span class="number">22i32</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// åªæœ‰åŒæ ·ç±»å‹ï¼Œæ‰èƒ½è¿ç®—</span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">addition</span> = twenty + twenty_one + twenty_two;</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; + &#123;&#125; + &#123;&#125; = &#123;&#125;&quot;</span>, twenty, twenty_one, twenty_two, addition);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å¯¹äºè¾ƒé•¿çš„æ•°å­—ï¼Œå¯ä»¥ç”¨_è¿›è¡Œåˆ†å‰²ï¼Œæå‡å¯è¯»æ€§</span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">one_million</span>: <span class="type">i64</span> = <span class="number">1_000_000</span>;</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, one_million.<span class="title function_ invoke__">pow</span>(<span class="number">2</span>));</span><br><span class="line"></span><br><span class="line">  <span class="comment">// å®šä¹‰ä¸€ä¸ªf32æ•°ç»„ï¼Œå…¶ä¸­42.0ä¼šè‡ªåŠ¨è¢«æ¨å¯¼ä¸ºf32ç±»å‹</span></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">forty_twos</span> = [</span><br><span class="line">    <span class="number">42.0</span>,</span><br><span class="line">    <span class="number">42f32</span>,</span><br><span class="line">    <span class="number">42.0_f32</span>,</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="comment">// æ‰“å°æ•°ç»„ä¸­ç¬¬ä¸€ä¸ªå€¼ï¼Œå¹¶æ§åˆ¶å°æ•°ä½ä¸º2ä½</span></span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;&#123;:.2&#125;&quot;</span>, forty_twos[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="ä½è¿ç®—"><a href="#ä½è¿ç®—" class="headerlink" title="ä½è¿ç®—"></a>ä½è¿ç®—</h5><p>Rust çš„ä½è¿ç®—åŸºæœ¬ä¸Šå’Œå…¶ä»–è¯­è¨€ä¸€æ ·</p>
<table>
<thead>
<tr>
<th>è¿ç®—ç¬¦</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>&amp; ä½ä¸</td>
<td>ç›¸åŒä½ç½®å‡ä¸º1æ—¶åˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0</td>
</tr>
<tr>
<td>| ä½æˆ–</td>
<td>ç›¸åŒä½ç½®åªè¦æœ‰1æ—¶åˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0</td>
</tr>
<tr>
<td>^ å¼‚æˆ–</td>
<td>ç›¸åŒä½ç½®ä¸ç›¸åŒåˆ™ä¸º1ï¼Œç›¸åŒåˆ™ä¸º0</td>
</tr>
<tr>
<td>! ä½é</td>
<td>æŠŠä½ä¸­çš„0å’Œ1ç›¸äº’å–åï¼Œå³0ç½®ä¸º1ï¼Œ1ç½®ä¸º0</td>
</tr>
<tr>
<td>&lt;&lt; å·¦ç§»</td>
<td>æ‰€æœ‰ä½å‘å·¦ç§»åŠ¨æŒ‡å®šä½æ•°ï¼Œå³ä½è¡¥0</td>
</tr>
<tr>
<td>&gt;&gt; å³ç§»</td>
<td>æ‰€æœ‰ä½å‘å³ç§»åŠ¨æŒ‡å®šä½æ•°ï¼Œå¸¦ç¬¦å·ç§»åŠ¨ï¼ˆæ­£æ•°è¡¥0ï¼Œè´Ÿæ•°è¡¥1ï¼‰</td>
</tr>
</tbody></table>
<h5 id="åºåˆ—"><a href="#åºåˆ—" class="headerlink" title="åºåˆ—"></a>åºåˆ—</h5><p>ç”¨<code>..</code>æ¥è¡¨ç¤ºèŒƒå›´ï¼Œä¾‹å¦‚ <code>1..5</code>ï¼Œç”Ÿæˆä» 1 åˆ° 4 çš„è¿ç»­æ•°å­—ï¼Œä¸åŒ…å« 5 ï¼›<code>1..=5</code>ï¼Œç”Ÿæˆä» 1 åˆ° 5 çš„è¿ç»­æ•°å­—ï¼ŒåŒ…å« 5ï¼Œå®ƒçš„ç”¨é€”å¾ˆç®€å•ï¼Œå¸¸å¸¸ç”¨äºå¾ªç¯ä¸­ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">1</span>..=<span class="number">5</span> &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>,i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æœ€ç»ˆç¨‹åºè¾“å‡º1åˆ°5</p>
<p><strong>æ³¨æ„</strong>:åºåˆ—åªå…è®¸ç”¨äºæ•°å­—æˆ–å­—ç¬¦ç±»å‹ï¼ŒåŸå› æ˜¯ï¼šå®ƒä»¬å¯ä»¥è¿ç»­ï¼ŒåŒæ—¶ç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸå¯ä»¥æ£€æŸ¥è¯¥åºåˆ—æ˜¯å¦ä¸ºç©ºï¼Œå­—ç¬¦å’Œæ•°å­—å€¼æ˜¯ Rust ä¸­ä»…æœ‰çš„å¯ä»¥ç”¨äºåˆ¤æ–­æ˜¯å¦ä¸ºç©ºçš„ç±»å‹ã€‚</p>
<h5 id="ä½¿ç”¨-As-å®Œæˆç±»å‹è½¬æ¢"><a href="#ä½¿ç”¨-As-å®Œæˆç±»å‹è½¬æ¢" class="headerlink" title="ä½¿ç”¨ As å®Œæˆç±»å‹è½¬æ¢"></a>ä½¿ç”¨ As å®Œæˆç±»å‹è½¬æ¢</h5><p>Rust ä¸­å¯ä»¥ä½¿ç”¨ As æ¥å®Œæˆä¸€ä¸ªç±»å‹åˆ°å¦ä¸€ä¸ªç±»å‹çš„è½¬æ¢ï¼Œå…¶æœ€å¸¸ç”¨äºå°†åŸå§‹ç±»å‹è½¬æ¢ä¸ºå…¶ä»–åŸå§‹ç±»å‹ï¼Œä½†æ˜¯å®ƒä¹Ÿå¯ä»¥å®Œæˆè¯¸å¦‚å°†æŒ‡é’ˆè½¬æ¢ä¸ºåœ°å€ã€åœ°å€è½¬æ¢ä¸ºæŒ‡é’ˆä»¥åŠå°†æŒ‡é’ˆè½¬æ¢ä¸ºå…¶ä»–æŒ‡é’ˆç­‰åŠŸèƒ½ã€‚ä½ å¯ä»¥åœ¨<a target="_blank" rel="noopener" href="https://course.rs/advance/into-types/converse.html">è¿™é‡Œ</a>äº†è§£æ›´å¤šç›¸å…³çš„çŸ¥è¯†ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">a</span> = <span class="number">3.1</span> <span class="keyword">as</span> <span class="type">i8</span>;</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">b</span> = <span class="number">100_i8</span> <span class="keyword">as</span> <span class="type">i32</span>;</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">c</span> = <span class="string">&#x27;a&#x27;</span> <span class="keyword">as</span> <span class="type">u8</span>; <span class="comment">// å°†å­—ç¬¦&#x27;a&#x27;è½¬æ¢ä¸ºæ•´æ•°ï¼Œ97</span></span><br><span class="line"></span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;,&#123;&#125;,&#123;&#125;&quot;</span>,a,b,c)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="æœ‰ç†æ•°å’Œå¤æ•°"><a href="#æœ‰ç†æ•°å’Œå¤æ•°" class="headerlink" title="æœ‰ç†æ•°å’Œå¤æ•°"></a>æœ‰ç†æ•°å’Œå¤æ•°</h5><p>Rust çš„æ ‡å‡†åº“ç›¸æ¯”å…¶å®ƒè¯­è¨€ï¼Œå‡†å…¥é—¨æ§›è¾ƒé«˜ï¼Œå› æ­¤æœ‰ç†æ•°å’Œå¤æ•°å¹¶æœªåŒ…å«åœ¨æ ‡å‡†åº“ä¸­ï¼š</p>
<ul>
<li>æœ‰ç†æ•°å’Œå¤æ•°</li>
<li>ä»»æ„å¤§å°çš„æ•´æ•°å’Œä»»æ„ç²¾åº¦çš„æµ®ç‚¹æ•°</li>
<li>å›ºå®šç²¾åº¦çš„åè¿›åˆ¶å°æ•°ï¼Œå¸¸ç”¨äºè´§å¸ç›¸å…³çš„åœºæ™¯</li>
</ul>
<p>å¥½åœ¨ç¤¾åŒºå·²ç»å¼€å‘å‡ºé«˜è´¨é‡çš„ Rust æ•°å€¼åº“ï¼š<a target="_blank" rel="noopener" href="https://crates.io/crates/num">num</a>ã€‚</p>
<p>æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ¥å¼•å…¥ <code>num</code> åº“ï¼š</p>
<ol>
<li>åˆ›å»ºæ–°å·¥ç¨‹ <code>cargo new complex-num &amp;&amp; cd complex-num</code></li>
<li>åœ¨ <code>Cargo.toml</code> ä¸­çš„ <code>[dependencies]</code> ä¸‹æ·»åŠ ä¸€è¡Œ <code>num = &quot;0.4.0&quot;</code></li>
<li>å°† <code>src/main.rs</code> æ–‡ä»¶ä¸­çš„ <code>main</code> å‡½æ•°æ›¿æ¢ä¸ºä¸‹é¢çš„ä»£ç </li>
<li>è¿è¡Œ <code>cargo run</code></li>
</ol>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> num::complex::Complex;</span><br><span class="line"></span><br><span class="line"> <span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">a</span> = Complex &#123; re: <span class="number">2.1</span>, im: -<span class="number">1.2</span> &#125;;</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">b</span> = Complex::<span class="title function_ invoke__">new</span>(<span class="number">11.1</span>, <span class="number">22.2</span>);</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">result</span> = a + b;</span><br><span class="line"></span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; + &#123;&#125;i&quot;</span>, result.re, result.im)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>

<h4 id="å­—ç¬¦ã€å¸ƒå°”ã€å•å…ƒç±»å‹"><a href="#å­—ç¬¦ã€å¸ƒå°”ã€å•å…ƒç±»å‹" class="headerlink" title="å­—ç¬¦ã€å¸ƒå°”ã€å•å…ƒç±»å‹"></a>å­—ç¬¦ã€å¸ƒå°”ã€å•å…ƒç±»å‹</h4><h5 id="å­—ç¬¦ç±»å‹-char"><a href="#å­—ç¬¦ç±»å‹-char" class="headerlink" title="å­—ç¬¦ç±»å‹(char)"></a>å­—ç¬¦ç±»å‹(char)</h5><p>åœ¨rustä¸­ï¼Œä¸ä»…ä»…æ˜¯ASCIIï¼Œæ‰€æœ‰çš„Unicodeã€å˜ä¸ªä¸­æ–‡ï¼Œæ—¥æ–‡ã€éŸ©æ–‡ã€emoji è¡¨æƒ…ç¬¦å·ç­‰ç­‰ï¼Œéƒ½æ˜¯åˆæ³•çš„å­—ç¬¦ç±»å‹,å 4ä¸ªå­—èŠ‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">c</span> = <span class="string">&#x27;z&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">z</span> = <span class="string">&#x27;â„¤&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">g</span> = <span class="string">&#x27;å›½&#x27;</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">heart_eyed_cat</span> = &#x27;ğŸ˜»&#x27;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="å¸ƒå°”-bool"><a href="#å¸ƒå°”-bool" class="headerlink" title="å¸ƒå°”(bool)"></a>å¸ƒå°”(bool)</h5><p>æ‹¥æœ‰trueå’Œfalseï¼Œå 1ä¸ªå­—èŠ‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">t</span> = <span class="literal">true</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">f</span>: <span class="type">bool</span> = <span class="literal">false</span>; <span class="comment">// ä½¿ç”¨ç±»å‹æ ‡æ³¨,æ˜¾å¼æŒ‡å®šfçš„ç±»å‹</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> f &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;è¿™æ˜¯æ®µæ¯«æ— æ„ä¹‰çš„ä»£ç &quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="å•å…ƒç±»å‹"><a href="#å•å…ƒç±»å‹" class="headerlink" title="å•å…ƒç±»å‹"></a>å•å…ƒç±»å‹</h5><p>å•å…ƒç±»å‹å°±æ˜¯ <code>()</code></p>
<h4 id="è¯­å¥åŠè¡¨è¾¾å¼"><a href="#è¯­å¥åŠè¡¨è¾¾å¼" class="headerlink" title="è¯­å¥åŠè¡¨è¾¾å¼"></a>è¯­å¥åŠè¡¨è¾¾å¼</h4><p>Rust çš„å‡½æ•°ä½“æ˜¯ç”±ä¸€ç³»åˆ—è¯­å¥ç»„æˆï¼Œæœ€åç”±ä¸€ä¸ªè¡¨è¾¾å¼æ¥è¿”å›å€¼ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">add_with_extra</span>(x: <span class="type">i32</span>, y: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = x + <span class="number">1</span>; <span class="comment">// è¯­å¥</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">y</span> = y + <span class="number">5</span>; <span class="comment">// è¯­å¥</span></span><br><span class="line">   	x+y <span class="comment">//è¡¨è¾¾å¼</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¯­å¥ä¼šæ‰§è¡Œä¸€äº›æ“ä½œä½†æ˜¯ä¸ä¼šè¿”å›ä¸€ä¸ªå€¼ï¼Œè€Œè¡¨è¾¾å¼ä¼šåœ¨æ±‚å€¼åè¿”å›ä¸€ä¸ªå€¼ï¼Œå› æ­¤åœ¨ä¸Šè¿°å‡½æ•°ä½“çš„ä¸‰è¡Œä»£ç ä¸­ï¼Œå‰ä¸¤è¡Œæ˜¯è¯­å¥ï¼Œæœ€åä¸€è¡Œæ˜¯è¡¨è¾¾å¼ã€‚</p>
<p>å¯¹äº Rust è¯­è¨€è€Œè¨€ï¼Œ<strong>è¿™ç§åŸºäºè¯­å¥ï¼ˆstatementï¼‰å’Œè¡¨è¾¾å¼ï¼ˆexpressionï¼‰çš„æ–¹å¼æ˜¯éå¸¸é‡è¦çš„ï¼Œä½ éœ€è¦èƒ½æ˜ç¡®çš„åŒºåˆ†è¿™ä¸¤ä¸ªæ¦‚å¿µ</strong>ï¼Œä½†æ˜¯å¯¹äºå¾ˆå¤šå…¶å®ƒè¯­è¨€è€Œè¨€ï¼Œè¿™ä¸¤ä¸ªå¾€å¾€æ— éœ€åŒºåˆ†ã€‚åŸºäºè¡¨è¾¾å¼æ˜¯å‡½æ•°å¼è¯­è¨€çš„é‡è¦ç‰¹å¾ï¼Œ<strong>è¡¨è¾¾å¼æ€»è¦è¿”å›å€¼</strong>ã€‚</p>
<h5 id="è¯­å¥"><a href="#è¯­å¥" class="headerlink" title="è¯­å¥"></a>è¯­å¥</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = <span class="number">8</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">b</span>: <span class="type">Vec</span>&lt;<span class="type">f64</span>&gt; = <span class="type">Vec</span>::<span class="title function_ invoke__">new</span>();</span><br><span class="line"><span class="keyword">let</span> (a, c) = (<span class="string">&quot;hi&quot;</span>, <span class="literal">false</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šéƒ½æ˜¯è¯­å¥ï¼Œå®ƒä»¬å®Œæˆä¸€ä¸ªå…·ä½“çš„æ“ä½œï¼Œä½†æ˜¯å¹¶æ²¡æœ‰è¿”å›å€¼ï¼Œå› æ­¤æ˜¯è¯­å¥</p>
<p>ç”±äºletæ˜¯è¯­å¥ï¼Œé‚£å½“ç„¶ä¸èƒ½æŠŠä¸€ä¸ªè¯­å¥èµ‹ç»™å…¶ä»–å€¼</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">b</span> = (<span class="keyword">let</span> <span class="variable">a</span> = <span class="number">8</span>);</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°æ“ä½œä¼šæŠ¥é”™</p>
<h5 id="è¡¨è¾¾å¼"><a href="#è¡¨è¾¾å¼" class="headerlink" title="è¡¨è¾¾å¼"></a>è¡¨è¾¾å¼</h5><p>è¡¨è¾¾å¼ä¼šè¿›è¡Œæ±‚èŒï¼Œç„¶åè¿”å›ä¸€ä¸ªå€¼ï¼Œä¾‹å¦‚5+6åœ¨æ±‚å€¼åä¼šè¿”å›11ï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªè¡¨è¾¾å¼</p>
<p>è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ˜¯è¡¨è¾¾å¼ï¼Œå› ä¸ºä¼šè¿”å›ä¸€ä¸ªå€¼ï¼Œè°ƒç”¨å®ä¹Ÿæ˜¯è¡¨è¾¾å¼ï¼Œç”¨èŠ±æ‹¬å·åŒ…è£¹æœ€ç»ˆè¿”å›ä¸€ä¸ªå€¼çš„è¯­å¥å—ä¹Ÿæ˜¯è¡¨è¾¾å¼ï¼Œæ€»ä¹‹ï¼Œèƒ½è¿”å›å€¼ï¼Œå®ƒå°±æ˜¯è¡¨è¾¾å¼:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">y</span> = &#123;</span><br><span class="line">        <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">3</span>;</span><br><span class="line">        x + <span class="number">1</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of y is: &#123;&#125;&quot;</span>, y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä½¿ç”¨ä¸€ä¸ªè¯­å¥å—è¡¨è¾¾å¼å°†å€¼èµ‹ç»™ <code>y</code> å˜é‡ï¼Œè¯­å¥å—é•¿è¿™æ ·ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">let x=3ï¼›</span><br><span class="line">x+1</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ³¨æ„:<strong>è¡¨è¾¾å¼ä¸èƒ½åŒ…å«åˆ†å·</strong>ã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œä¸€æ—¦ä½ åœ¨è¡¨è¾¾å¼ååŠ ä¸Šåˆ†å·ï¼Œå®ƒå°±ä¼šå˜æˆä¸€æ¡è¯­å¥ï¼Œå†ä¹Ÿ<strong>ä¸ä¼š</strong>è¿”å›ä¸€ä¸ªå€¼</p>
<h4 id="å‡½æ•°"><a href="#å‡½æ•°" class="headerlink" title="å‡½æ•°"></a>å‡½æ•°</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">add</span>(i: <span class="type">i32</span>, j: <span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">   i + j</span><br><span class="line"> &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å£°æ˜å‡½æ•°çš„å…³é”®å­— <code>fn</code>ï¼Œå‡½æ•°å <code>add()</code>ï¼Œå‚æ•° <code>i</code> å’Œ <code>j</code>ï¼Œå‚æ•°ç±»å‹å’Œè¿”å›å€¼ç±»å‹éƒ½æ˜¯ <code>i32</code></p>
<p><img src="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503272205857.png" alt="image-20250327220537722" loading="lazy"></p>
<h5 id="å‡½æ•°è¦ç‚¹"><a href="#å‡½æ•°è¦ç‚¹" class="headerlink" title="å‡½æ•°è¦ç‚¹"></a>å‡½æ•°è¦ç‚¹</h5><ul>
<li>å‡½æ•°åå’Œå˜é‡åä½¿ç”¨<a target="_blank" rel="noopener" href="https://course.rs/practice/naming.html">è›‡å½¢å‘½åæ³•(snake case)</a>ï¼Œä¾‹å¦‚ <code>fn add_two() -&gt; &#123;&#125;</code></li>
<li>å‡½æ•°çš„ä½ç½®å¯ä»¥éšä¾¿æ”¾ï¼ŒRust ä¸å…³å¿ƒæˆ‘ä»¬åœ¨å“ªé‡Œå®šä¹‰äº†å‡½æ•°ï¼Œåªè¦æœ‰å®šä¹‰å³å¯</li>
<li>æ¯ä¸ªå‡½æ•°å‚æ•°éƒ½éœ€è¦æ ‡æ³¨å…·ä½“ç±»å‹</li>
</ul>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="title function_ invoke__">another_function</span>(<span class="number">5</span>, <span class="number">6.1</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">another_function</span>(x: <span class="type">i32</span>, y: <span class="type">f32</span>) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of y is: &#123;&#125;&quot;</span>, y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>x:i32çš„i32æ˜¯å¿…è¦çš„ï¼Œå»æ‰çš„è¯ä¼šæŠ¥é”™</p>
<h5 id="å‡½æ•°è¿”å›"><a href="#å‡½æ•°è¿”å›" class="headerlink" title="å‡½æ•°è¿”å›"></a>å‡½æ•°è¿”å›</h5><p>åœ¨rustä¸­ï¼Œå‡½æ•°å°±æ˜¯è¡¨è¾¾å¼ï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥æŠŠå‡½æ•°çš„è¿”å›å€¼ç›´æ¥ç»™è°ƒç”¨è€…ã€‚</p>
<p>å‡½æ•°çš„è¿”å›å€¼å°±æ˜¯å‡½æ•°ä½“æœ€åä¸€æ¡è¡¨è¾¾å¼çš„è¿”å›å€¼ï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>return</code> æå‰è¿”å›ï¼Œä¸‹é¢çš„å‡½æ•°ä½¿ç”¨æœ€åä¸€æ¡è¡¨è¾¾å¼æ¥è¿”å›ä¸€ä¸ªå€¼ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">plus_five</span>(x:<span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">    x + <span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="title function_ invoke__">plus_five</span>(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>x + 5</code> æ˜¯ä¸€æ¡è¡¨è¾¾å¼ï¼Œæ±‚å€¼åï¼Œè¿”å›ä¸€ä¸ªå€¼ï¼Œå› ä¸ºå®ƒæ˜¯å‡½æ•°çš„æœ€åä¸€è¡Œï¼Œå› æ­¤è¯¥è¡¨è¾¾å¼çš„å€¼ä¹Ÿæ˜¯å‡½æ•°çš„è¿”å›å€¼ã€‚</p>
<p>å†æ¥çœ‹ä¸¤ä¸ªé‡ç‚¹ï¼š</p>
<ol>
<li><code>let x = plus_five(5)</code>ï¼Œè¯´æ˜æˆ‘ä»¬ç”¨ä¸€ä¸ªå‡½æ•°çš„è¿”å›å€¼æ¥åˆå§‹åŒ– <code>x</code> å˜é‡ï¼Œå› æ­¤ä¾§é¢è¯´æ˜äº†åœ¨ Rust ä¸­å‡½æ•°ä¹Ÿæ˜¯è¡¨è¾¾å¼ï¼Œè¿™ç§å†™æ³•ç­‰åŒäº <code>let x = 5 + 5;</code></li>
<li><code>x + 5</code> æ²¡æœ‰åˆ†å·ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€æ¡è¡¨è¾¾å¼ï¼Œæ‰€ä»¥å‡½æ•°æœ€ç»ˆè¿”å›çš„ç»“æœæ˜¯x+5çš„ç»“æœ</li>
</ol>
<p>å†æ¥çœ‹ä¸€æ®µä»£ç ï¼ŒåŒæ—¶ä½¿ç”¨ <code>return</code> å’Œè¡¨è¾¾å¼ä½œä¸ºè¿”å›å€¼ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">plus_or_minus</span>(x:<span class="type">i32</span>) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> x &gt; <span class="number">5</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> x - <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    x + <span class="number">5</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="title function_ invoke__">plus_or_minus</span>(<span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of x is: &#123;&#125;&quot;</span>, x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>plus_or_minus</code> å‡½æ•°æ ¹æ®ä¼ å…¥ <code>x</code> çš„å¤§å°æ¥å†³å®šæ˜¯åšåŠ æ³•è¿˜æ˜¯å‡æ³•ï¼Œè‹¥ <code>x &gt; 5</code> åˆ™é€šè¿‡ <code>return</code> æå‰è¿”å› <code>x - 5</code> çš„å€¼,å¦åˆ™è¿”å› <code>x + 5</code> çš„å€¼ã€‚</p>
<h5 id="Rust-ä¸­çš„ç‰¹æ®Šè¿”å›ç±»å‹"><a href="#Rust-ä¸­çš„ç‰¹æ®Šè¿”å›ç±»å‹" class="headerlink" title="Rust ä¸­çš„ç‰¹æ®Šè¿”å›ç±»å‹"></a>Rust ä¸­çš„ç‰¹æ®Šè¿”å›ç±»å‹</h5><h6 id="æ— è¿”å›å€¼"><a href="#æ— è¿”å›å€¼" class="headerlink" title="æ— è¿”å›å€¼()"></a>æ— è¿”å›å€¼<code>()</code></h6><p>å¯¹äº Rust æ–°æ‰‹æ¥è¯´ï¼Œæœ‰äº›è¿”å›ç±»å‹å¾ˆéš¾ç†è§£ï¼Œè€Œä¸”å¦‚æœä½ æƒ³é€šè¿‡ç™¾åº¦æˆ–è€…è°·æ­Œå»æœç´¢ï¼Œéƒ½ä¸å¥½æŸ¥è¯¢ï¼Œå› ä¸ºè¿™äº›ç¬¦å·å¤ªå¸¸è§äº†ï¼Œæ ¹æœ¬éš¾ä»¥ç²¾ç¡®æœç´¢åˆ°ã€‚</p>
<p>ä¾‹å¦‚å•å…ƒç±»å‹ <code>()</code>ï¼Œæ˜¯ä¸€ä¸ªé›¶é•¿åº¦çš„å…ƒç»„ã€‚å®ƒæ²¡å•¥ä½œç”¨ï¼Œä½†æ˜¯å¯ä»¥ç”¨æ¥è¡¨è¾¾ä¸€ä¸ªå‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼š</p>
<ul>
<li>å‡½æ•°æ²¡æœ‰è¿”å›å€¼ï¼Œé‚£ä¹ˆè¿”å›ä¸€ä¸ª <code>()</code></li>
<li>é€šè¿‡ <code>;</code> ç»“å°¾çš„è¯­å¥è¿”å›ä¸€ä¸ª <code>()</code></li>
</ul>
<p>ä¾‹å¦‚ä¸‹é¢çš„ <code>report</code> å‡½æ•°ä¼šéšå¼è¿”å›ä¸€ä¸ª <code>()</code>ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fmt::<span class="built_in">Debug</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">report</span>&lt;T: <span class="built_in">Debug</span>&gt;(item: T) &#123;</span><br><span class="line">  <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, item);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ä¸Šé¢çš„å‡½æ•°è¿”å›å€¼ç›¸åŒï¼Œä½†æ˜¯ä¸‹é¢çš„å‡½æ•°æ˜¾å¼çš„è¿”å›äº† <code>()</code>ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">clear</span>(text: &amp;<span class="keyword">mut</span> <span class="type">String</span>) <span class="punctuation">-&gt;</span> () &#123;</span><br><span class="line">  *text = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨å®é™…ç¼–ç¨‹ä¸­ï¼Œä½ ä¼šç»å¸¸åœ¨é”™è¯¯æç¤ºä¸­çœ‹åˆ°è¯¥ <code>()</code> çš„èº«å½±å‡ºæ²¡ï¼Œå‡å¦‚ä½ çš„å‡½æ•°éœ€è¦è¿”å›ä¸€ä¸ª <code>u32</code> å€¼ï¼Œä½†æ˜¯å¦‚æœä½ ä¸å¹¸çš„ä»¥ <code>è¡¨è¾¾å¼;</code> çš„è¯­å¥å½¢å¼ä½œä¸ºå‡½æ•°çš„æœ€åä¸€è¡Œä»£ç ï¼Œå°±ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">add</span>(x:<span class="type">u32</span>,y:<span class="type">u32</span>) <span class="punctuation">-&gt;</span> <span class="type">u32</span> &#123;</span><br><span class="line">    x + y;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é”™è¯¯å¦‚ä¸‹ï¼š</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">error[E0308]: mismatched types // ç±»å‹ä¸åŒ¹é…</span><br><span class="line"><span class="meta prompt_"> --&gt; </span><span class="language-bash">src/main.rs:6:24</span></span><br><span class="line">  |</span><br><span class="line">6 | fn add(x:u32,y:u32) -&gt; u32 &#123;</span><br><span class="line">  |    ---                 ^^^ expected `u32`, found `()` // æœŸæœ›è¿”å›u32,å´è¿”å›()</span><br><span class="line">  |    |</span><br><span class="line">  |    implicitly returns `()` as its body has no tail or `return` expression</span><br><span class="line">7 |     x + y;</span><br><span class="line">  |          - help: consider removing this semicolon</span><br></pre></td></tr></table></figure>

<p><strong>æ³¨æ„ï¼šåªæœ‰è¡¨è¾¾å¼èƒ½è¿”å›å€¼</strong>ï¼Œè€Œ <code>;</code> ç»“å°¾çš„æ˜¯è¯­å¥ï¼Œåœ¨ Rust ä¸­ï¼Œä¸€å®šè¦ä¸¥æ ¼åŒºåˆ†<strong>è¡¨è¾¾å¼</strong>å’Œ<strong>è¯­å¥</strong>çš„åŒºåˆ«ï¼Œè¿™ä¸ªåœ¨å…¶å®ƒè¯­è¨€ä¸­å¾€å¾€æ˜¯è¢«å¿½è§†çš„ç‚¹ã€‚</p>
<h6 id="æ°¸ä¸è¿”å›çš„å‘æ•£å‡½æ•°"><a href="#æ°¸ä¸è¿”å›çš„å‘æ•£å‡½æ•°" class="headerlink" title="æ°¸ä¸è¿”å›çš„å‘æ•£å‡½æ•° !"></a>æ°¸ä¸è¿”å›çš„å‘æ•£å‡½æ•° <code>!</code></h6><p>å½“ç”¨ <code>!</code> ä½œå‡½æ•°è¿”å›ç±»å‹çš„æ—¶å€™ï¼Œè¡¨ç¤ºè¯¥å‡½æ•°æ°¸ä¸è¿”å›( diverge function )ï¼Œç‰¹åˆ«çš„ï¼Œè¿™ç§è¯­æ³•å¾€å¾€ç”¨åšä¼šå¯¼è‡´ç¨‹åºå´©æºƒçš„å‡½æ•°ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">dead_end</span>() <span class="punctuation">-&gt;</span> ! &#123;</span><br><span class="line">  <span class="built_in">panic!</span>(<span class="string">&quot;ä½ å·²ç»åˆ°äº†ç©·é€”æœ«è·¯ï¼Œå´©æºƒå§ï¼&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸‹é¢çš„å‡½æ•°åˆ›å»ºäº†ä¸€ä¸ªæ— é™å¾ªç¯ï¼Œè¯¥å¾ªç¯æ°¸ä¸è·³å‡ºï¼Œå› æ­¤å‡½æ•°ä¹Ÿæ°¸ä¸è¿”å›ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">forever</span>() <span class="punctuation">-&gt;</span> ! &#123;</span><br><span class="line">  <span class="keyword">loop</span> &#123;</span><br><span class="line">    <span class="comment">//...</span></span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="æ‰€æœ‰æƒå’Œå€Ÿç”¨"><a href="#æ‰€æœ‰æƒå’Œå€Ÿç”¨" class="headerlink" title="æ‰€æœ‰æƒå’Œå€Ÿç”¨"></a>æ‰€æœ‰æƒå’Œå€Ÿç”¨</h3><h4 id="æ‰€æœ‰æƒ"><a href="#æ‰€æœ‰æƒ" class="headerlink" title="æ‰€æœ‰æƒ"></a>æ‰€æœ‰æƒ</h4><p>æ‰€æœ‰çš„ç¨‹åºéƒ½å¿…é¡»å’Œè®¡ç®—æœºå†…å­˜æ‰“äº¤é“ï¼Œå¦‚ä½•ä»å†…å­˜ä¸­ç”³è¯·ç©ºé—´æ¥å­˜æ”¾ç¨‹åºçš„è¿è¡Œå†…å®¹ï¼Œå¦‚ä½•åœ¨ä¸éœ€è¦çš„æ—¶å€™é‡Šæ”¾è¿™äº›ç©ºé—´ï¼Œæˆäº†é‡ä¸­ä¹‹é‡ï¼Œä¹Ÿæ˜¯æ‰€æœ‰ç¼–ç¨‹è¯­è¨€è®¾è®¡çš„éš¾ç‚¹ä¹‹ä¸€ã€‚åœ¨è®¡ç®—æœºè¯­è¨€ä¸æ–­æ¼”å˜è¿‡ç¨‹ä¸­ï¼Œå‡ºç°äº†ä¸‰ç§æµæ´¾ï¼š</p>
<ul>
<li>**åƒåœ¾å›æ”¶æœºåˆ¶(GC)**ï¼Œåœ¨ç¨‹åºè¿è¡Œæ—¶ä¸æ–­å¯»æ‰¾ä¸å†ä½¿ç”¨çš„å†…å­˜ï¼Œå…¸å‹ä»£è¡¨ï¼šJavaã€Go</li>
<li><strong>æ‰‹åŠ¨ç®¡ç†å†…å­˜çš„åˆ†é…å’Œé‡Šæ”¾</strong>, åœ¨ç¨‹åºä¸­ï¼Œé€šè¿‡å‡½æ•°è°ƒç”¨çš„æ–¹å¼æ¥ç”³è¯·å’Œé‡Šæ”¾å†…å­˜ï¼Œå…¸å‹ä»£è¡¨ï¼šC++</li>
<li><strong>é€šè¿‡æ‰€æœ‰æƒæ¥ç®¡ç†å†…å­˜</strong>ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æ—¶ä¼šæ ¹æ®ä¸€ç³»åˆ—è§„åˆ™è¿›è¡Œæ£€æŸ¥</li>
</ul>
<p>å…¶ä¸­ Rust é€‰æ‹©äº†ç¬¬ä¸‰ç§ï¼Œæœ€å¦™çš„æ˜¯ï¼Œè¿™ç§æ£€æŸ¥åªå‘ç”Ÿåœ¨ç¼–è¯‘æœŸï¼Œå› æ­¤å¯¹äºç¨‹åºè¿è¡ŒæœŸï¼Œä¸ä¼šæœ‰ä»»ä½•ä¸Šçš„æ€§èƒ½æŸå¤± </p>
<h5 id="æ ˆå’Œå †"><a href="#æ ˆå’Œå †" class="headerlink" title="æ ˆå’Œå †"></a>æ ˆå’Œå †</h5><p>æ ˆå’Œå †æ˜¯ç¼–ç¨‹è¯­è¨€æœ€æ ¸å¿ƒçš„æ•°æ®ç»“æ„ï¼Œåœ¨rustä¸­ï¼Œå€¼æ˜¯ä½äºæ ˆè¿˜æ˜¯å †ä¸Šéå¸¸é‡è¦ï¼Œè¿™ä¼šå½±å“ç¨‹åºçš„è¡Œä¸ºå’Œæ€§èƒ½</p>
<p>æ³¨æ„:æ ˆå’Œå †çš„æ ¸å¿ƒç›®æ ‡å°±æ˜¯ä¸ºç¨‹åºåœ¨è¿è¡Œæ—¶æä¾›å¯ä¾›ä½¿ç”¨çš„å†…å­˜ç©ºé—´</p>
<h6 id="æ ˆ"><a href="#æ ˆ" class="headerlink" title="æ ˆ"></a>æ ˆ</h6><p>æ ˆæŒ‰ç…§é¡ºåºå­˜å‚¨å€¼å¹¶ä»¥ç›¸åé¡ºåºå–å‡ºå€¼ï¼Œè¿™ä¸­æ“ä½œæ–¹å¼ä¹Ÿè¢«ç§°ä½œ<strong>åè¿›å…ˆå‡º</strong>ã€‚</p>
<p>å¢åŠ æ•°æ®å«åšè¿›æ ˆï¼Œå‡å°‘æ•°æ®å«åšå‡ºæ ˆ</p>
<p>ä½†æ˜¯ï¼Œæ ˆä¸­æ‰€æœ‰çš„æ•°æ®éƒ½å¿…é¡»å ç”¨å·²çŸ¥å›ºå®šå¤§å°çš„å†…å­˜ç©ºé—´ï¼Œå‡è®¾æ•°æ®å¤§å°æœªçŸ¥ï¼Œé‚£ä¹ˆåœ¨å–å‡ºæ•°æ®æ—¶ï¼Œä½ è®²æ— æ³•å–åˆ°ä½ æƒ³è¦çš„æ•°æ®</p>
<h6 id="å †"><a href="#å †" class="headerlink" title="å †"></a>å †</h6><p>ä¸æ ˆä¸åŒçš„æ˜¯ï¼Œå½“æˆ‘ä»¬é‡è§å¤§å°æœªçŸ¥æˆ–è€…å¯èƒ½å˜åŒ–çš„æ•°æ®ï¼Œæˆ‘ä»¬å°±éœ€è¦å°†å…¶å­˜å‚¨åœ¨å †ä¸Š</p>
<p>å½“å‘å †ä¸Šæ”¾å…¥æ•°æ®æ—¶ï¼Œéœ€è¦è¯·æ±‚ä¸€å®šå¤§å°çš„å†…å­˜ç©ºé—´ã€‚æ“ä½œç³»ç»Ÿåœ¨å¯¹çš„æ²¡å‡ºæ‰¾åˆ°ä¸€å—è¶³å¤Ÿå¤§çš„ç©ºä½ï¼ŒæŠŠå®ƒæ ‡è®°ä¸ºå·²ä½¿ç”¨ï¼Œä¸è¿”å›ä¸€ä¸ªè¡¨ç¤ºè¯¥ä½ç½®åœ°å€çš„æŒ‡é’ˆï¼Œè¯¥è¿‡ç¨‹è¢«ç§°ä¸ºåœ¨å †ä¸Šåˆ†é…å†…å­˜</p>
<p>æ¥ç€ï¼Œ<strong>è¯¥æŒ‡é’ˆä¼šè¢«æ¨å…¥æ ˆä¸­</strong>ï¼Œå› ä¸ºæŒ‡é’ˆå¤§å°å›ºå®šï¼Œåœ¨åç»­ä½¿ç”¨è¿‡ç¨‹ä¸­ï¼Œå°†é€šè¿‡æ ˆä¸­çš„æŒ‡é’ˆï¼Œæ¥è·å–æ•°æ®åœ¨å †ä¸Šçš„æ—¶æœºå†…å­˜ä½ç½®ï¼Œ è¿›è€Œè®¿é—®è¯¥æ•°æ®</p>
<p>ç”±ä¸Šå¯çŸ¥ï¼Œå †æ˜¯ä¸€ç§ç¼ºä¹ç»„ç»‡çš„æ•°æ®ç»“æ„</p>
<h6 id="æ€§èƒ½åŒºåˆ«"><a href="#æ€§èƒ½åŒºåˆ«" class="headerlink" title="æ€§èƒ½åŒºåˆ«"></a>æ€§èƒ½åŒºåˆ«</h6><p>åœ¨æ ˆä¸Šåˆ†é…å†…å­˜æ¯”åœ¨å †ä¸Šåˆ†é…å†…å­˜è¦å¿«ï¼Œå› ä¸ºå…¥æ ˆæ˜¯æ“ä½œç³»ç»Ÿæ— éœ€è°ƒç”¨å‡½æ•°æ¥åˆ†é…ç°ä»£ç§‘æŠ€ï¼Œåªéœ€è¦å°†æ–°æ•°æ®æ”¾å…¥æ ˆé¡¶å³å¯ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼Œåœ¨å †ä¸Šåˆ†é…å†…å­˜åˆ™éœ€è¦æ›´å¤šçš„å·¥ä½œï¼Œè¿™æ˜¯å› ä¸ºæ“ä½œç³»ç»Ÿå¿…é¡»é¦–å…ˆæ‰¾åˆ°ä¸€å—è¶³å¤Ÿå­˜æ”¾æ•°æ®çš„å†…å­˜ç©ºé—´ï¼Œæ¥ç€åšä¸€äº›è®°å½•ä¸ºä¸‹ä¸€æ¬¡åˆ†é…ç©ºé—´åšå‡†å¤‡ï¼Œå¦‚æœå½“å‰è¿›ç¨‹åˆ†é…çš„å†…å­˜é¡µä¸è¶³æ—¶ï¼Œè¿˜éœ€è¦è¿›è¡Œç³»ç»Ÿè°ƒç”¨æ¥ç”³è¯·æ›´å¤šå†…å­˜ã€‚ å› æ­¤ï¼Œå¤„ç†å™¨åœ¨æ ˆä¸Šåˆ†é…æ•°æ®ä¼šæ¯”åœ¨å †ä¸Šåˆ†é…æ•°æ®æ›´åŠ é«˜æ•ˆã€‚</p>
<h6 id="æ‰€æœ‰æƒå’Œå †æ ˆ"><a href="#æ‰€æœ‰æƒå’Œå †æ ˆ" class="headerlink" title="æ‰€æœ‰æƒå’Œå †æ ˆ"></a>æ‰€æœ‰æƒå’Œå †æ ˆ</h6><p>å½“ä½ çš„ä»£ç è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ—¶ï¼Œä¼ é€’ç»™å‡½æ•°çš„å‚æ•°ï¼ˆåŒ…æ‹¬å¯èƒ½æŒ‡å‘å †ä¸Šæ•°æ®çš„æŒ‡é’ˆå’Œå‡½æ•°çš„å±€éƒ¨å˜é‡ï¼‰ä¾æ¬¡è¢«å‹å…¥æ ˆä¸­ï¼Œå½“å‡½æ•°è°ƒç”¨ç»“æŸæ—¶ï¼Œè¿™äº›å€¼å°†è¢«ä»æ ˆä¸­æŒ‰ç…§ç›¸åçš„é¡ºåºä¾æ¬¡ç§»é™¤ã€‚</p>
<p>å› ä¸ºå †ä¸Šçš„æ•°æ®ç¼ºä¹ç»„ç»‡ï¼Œå› æ­¤è·Ÿè¸ªè¿™äº›æ•°æ®ä½•æ—¶åˆ†é…å’Œé‡Šæ”¾æ˜¯éå¸¸é‡è¦çš„ï¼Œå¦åˆ™å †ä¸Šçš„æ•°æ®å°†äº§ç”Ÿå†…å­˜æ³„æ¼ â€”â€” è¿™äº›æ•°æ®å°†æ°¸è¿œæ— æ³•è¢«å›æ”¶ã€‚è¿™å°±æ˜¯ Rust æ‰€æœ‰æƒç³»ç»Ÿä¸ºæˆ‘ä»¬æä¾›çš„å¼ºå¤§ä¿éšœã€‚</p>
<p>å¯¹äºå…¶ä»–å¾ˆå¤šç¼–ç¨‹è¯­è¨€ï¼Œä½ ç¡®å®æ— éœ€ç†è§£å †æ ˆçš„åŸç†ï¼Œä½†æ˜¯<strong>åœ¨ Rust ä¸­ï¼Œæ˜ç™½å †æ ˆçš„åŸç†ï¼Œå¯¹äºæˆ‘ä»¬ç†è§£æ‰€æœ‰æƒçš„å·¥ä½œåŸç†ä¼šæœ‰å¾ˆå¤§çš„å¸®åŠ©</strong>ã€‚</p>
<h5 id="æ‰€æœ‰æƒåŸåˆ™"><a href="#æ‰€æœ‰æƒåŸåˆ™" class="headerlink" title="æ‰€æœ‰æƒåŸåˆ™"></a>æ‰€æœ‰æƒåŸåˆ™</h5><p>æ³¨æ„å‡ ç‚¹ï¼š</p>
<ol>
<li>Rust ä¸­æ¯ä¸€ä¸ªå€¼éƒ½è¢«ä¸€ä¸ªå˜é‡æ‰€æ‹¥æœ‰ï¼Œè¯¥å˜é‡è¢«ç§°ä¸ºå€¼çš„æ‰€æœ‰è€…</li>
<li>ä¸€ä¸ªå€¼åŒæ—¶åªèƒ½è¢«ä¸€ä¸ªå˜é‡æ‰€æ‹¥æœ‰ï¼Œæˆ–è€…è¯´ä¸€ä¸ªå€¼åªèƒ½æ‹¥æœ‰ä¸€ä¸ªæ‰€æœ‰è€…</li>
<li>å½“æ‰€æœ‰è€…ï¼ˆå˜é‡ï¼‰ç¦»å¼€ä½œç”¨åŸŸèŒƒå›´æ—¶ï¼Œè¿™ä¸ªå€¼å°†è¢«ä¸¢å¼ƒ(drop)</li>
</ol>
<h6 id="å˜é‡ä½œç”¨åŸŸ"><a href="#å˜é‡ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡ä½œç”¨åŸŸ"></a>å˜é‡ä½œç”¨åŸŸ</h6><p>ä½œç”¨åŸŸæ˜¯ä¸€ä¸ªå˜é‡åœ¨ç¨‹åºä¸­æœ‰æ•ˆçš„èŒƒå›´ï¼Œå‡å¦‚æœ‰è¿™æ ·ä¸€ä¸ª å˜é‡ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = <span class="string">&quot;hello&quot;</span>;</span><br></pre></td></tr></table></figure>

<p>å˜é‡ <code>s</code> ç»‘å®šåˆ°äº†ä¸€ä¸ªå­—ç¬¦ä¸²å­—é¢å€¼ï¼Œè¯¥å­—ç¬¦ä¸²å­—é¢å€¼æ˜¯ç¡¬ç¼–ç åˆ°ç¨‹åºä»£ç ä¸­çš„ã€‚<code>s</code> å˜é‡ä»å£°æ˜çš„ç‚¹å¼€å§‹ç›´åˆ°å½“å‰ä½œç”¨åŸŸçš„ç»“æŸéƒ½æ˜¯æœ‰æ•ˆçš„ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;                      <span class="comment">// s åœ¨è¿™é‡Œæ— æ•ˆï¼Œå®ƒå°šæœªå£°æ˜</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s</span> = <span class="string">&quot;hello&quot;</span>;   <span class="comment">// ä»æ­¤å¤„èµ·ï¼Œs æ˜¯æœ‰æ•ˆçš„</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½¿ç”¨ s</span></span><br><span class="line">&#125;                      <span class="comment">// æ­¤ä½œç”¨åŸŸå·²ç»“æŸï¼Œsä¸å†æœ‰æ•ˆ</span></span><br></pre></td></tr></table></figure>

<p>ç®€è€Œè¨€ä¹‹ï¼Œ<code>s</code> ä»åˆ›å»ºå¼€å§‹å°±æœ‰æ•ˆï¼Œç„¶åæœ‰æ•ˆæœŸæŒç»­åˆ°å®ƒç¦»å¼€ä½œç”¨åŸŸä¸ºæ­¢ï¼Œå¯ä»¥çœ‹å‡ºï¼Œå°±ä½œç”¨åŸŸæ¥è¯´ï¼ŒRust è¯­è¨€è·Ÿå…¶ä»–ç¼–ç¨‹è¯­è¨€æ²¡æœ‰åŒºåˆ«ã€‚</p>
<h5 id="å˜é‡ç»‘å®šèƒŒåçš„æ•°æ®äº¤äº’"><a href="#å˜é‡ç»‘å®šèƒŒåçš„æ•°æ®äº¤äº’" class="headerlink" title="å˜é‡ç»‘å®šèƒŒåçš„æ•°æ®äº¤äº’"></a>å˜é‡ç»‘å®šèƒŒåçš„æ•°æ®äº¤äº’</h5><h6 id="è½¬ç§»æ‰€æœ‰æƒ"><a href="#è½¬ç§»æ‰€æœ‰æƒ" class="headerlink" title="è½¬ç§»æ‰€æœ‰æƒ"></a>è½¬ç§»æ‰€æœ‰æƒ</h6><p>å…ˆæ¥çœ‹ä¸€æ®µä»£ç </p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">y</span> = x;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç å¹¶æ²¡æœ‰å‘ç”Ÿæ‰€æœ‰æƒçš„è½¬ç§»ï¼ŒåŸå› å¾ˆç®€å•ï¼š ä»£ç é¦–å…ˆå°† <code>5</code> ç»‘å®šåˆ°å˜é‡ <code>x</code>ï¼Œæ¥ç€<strong>æ‹·è´</strong> <code>x</code> çš„å€¼èµ‹ç»™ <code>y</code>ï¼Œæœ€ç»ˆ <code>x</code> å’Œ <code>y</code> éƒ½ç­‰äº <code>5</code>ï¼Œå› ä¸ºæ•´æ•°æ˜¯ Rust åŸºæœ¬æ•°æ®ç±»å‹ï¼Œæ˜¯å›ºå®šå¤§å°çš„ç®€å•å€¼ï¼Œå› æ­¤è¿™ä¸¤ä¸ªå€¼éƒ½æ˜¯é€šè¿‡<strong>è‡ªåŠ¨æ‹·è´</strong>çš„æ–¹å¼æ¥èµ‹å€¼çš„ï¼Œéƒ½è¢«å­˜åœ¨æ ˆä¸­ï¼Œå®Œå…¨æ— éœ€åœ¨å †ä¸Šåˆ†é…å†…å­˜ã€‚</p>
<p>æ•´ä¸ªè¿‡ç¨‹ä¸­çš„èµ‹å€¼éƒ½æ˜¯é€šè¿‡å€¼æ‹·è´çš„æ–¹å¼å®Œæˆï¼ˆå‘ç”Ÿåœ¨æ ˆä¸­ï¼‰ï¼Œå› æ­¤å¹¶ä¸éœ€è¦æ‰€æœ‰æƒè½¬ç§»ã€‚</p>
<p>æˆ‘ä»¬åœ¨æ¥çœ‹ä¸‹é¢ä»£ç :</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s1</span>=<span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s2</span>=s1;</span><br></pre></td></tr></table></figure>

<p>å¯¹äºåŸºæœ¬ç±»å‹ï¼ˆå­˜å‚¨åœ¨æ ˆä¸Šï¼‰ï¼ŒRust ä¼šè‡ªåŠ¨æ‹·è´ï¼Œä½†æ˜¯ <code>String</code> ä¸æ˜¯åŸºæœ¬ç±»å‹ï¼Œè€Œä¸”æ˜¯å­˜å‚¨åœ¨å †ä¸Šçš„ï¼Œå› æ­¤ä¸èƒ½è‡ªåŠ¨æ‹·è´ã€‚</p>
<p>Stringç±»å‹æ˜¯ä¸€ä¸ªå­—ç¬¦ä¸²ç±»å‹ï¼Œç”±å­˜å‚¨åœ¨æ ˆä¸­çš„å †æŒ‡é’ˆã€å­—ç¬¦ä¸²é•¿åº¦ã€å­—ç¬¦ä¸²å®¹å™¨ç»„æˆï¼Œå…¶ä¸­å †æŒ‡é’ˆæ˜¯æœ€é‡è¦çš„ï¼Œå®ƒæŒ‡å‘äº†çœŸå®å­˜å‚¨å­—ç¬¦ä¸²å†…å®¹çš„å †æŒ‡é’ˆ</p>
<p>å…³äºä¸Šé¢<code>let s2=s1</code>ï¼Œåˆ†æˆä¸¤ç§æ–¹å¼è®¨è®º</p>
<ol>
<li>æ‹·è´ <code>String</code> å’Œå­˜å‚¨åœ¨å †ä¸Šçš„å­—èŠ‚æ•°ç»„ å¦‚æœè¯¥è¯­å¥æ˜¯æ‹·è´æ‰€æœ‰æ•°æ®(æ·±æ‹·è´)ï¼Œé‚£ä¹ˆæ— è®ºæ˜¯ <code>String</code> æœ¬èº«è¿˜æ˜¯åº•å±‚çš„å †ä¸Šæ•°æ®ï¼Œéƒ½ä¼šè¢«å…¨éƒ¨æ‹·è´ï¼Œè¿™å¯¹äºæ€§èƒ½è€Œè¨€ä¼šé€ æˆéå¸¸å¤§çš„å½±å“</li>
<li>åªæ‹·è´ <code>String</code> æœ¬èº« è¿™æ ·çš„æ‹·è´éå¸¸å¿«ï¼Œå› ä¸ºåœ¨ 64 ä½æœºå™¨ä¸Šå°±æ‹·è´äº† <code>8å­—èŠ‚çš„æŒ‡é’ˆ</code>ã€<code>8å­—èŠ‚çš„é•¿åº¦</code>ã€<code>8å­—èŠ‚çš„å®¹é‡</code>ï¼Œæ€»è®¡ 24 å­—èŠ‚ï¼Œä½†æ˜¯å¸¦æ¥äº†æ–°çš„é—®é¢˜ï¼Œè¿˜è®°å¾—æˆ‘ä»¬ä¹‹å‰æåˆ°çš„æ‰€æœ‰æƒè§„åˆ™å§ï¼Ÿå…¶ä¸­æœ‰ä¸€æ¡å°±æ˜¯ï¼š<strong>ä¸€ä¸ªå€¼åªå…è®¸æœ‰ä¸€ä¸ªæ‰€æœ‰è€…</strong>ï¼Œè€Œç°åœ¨è¿™ä¸ªå€¼ï¼ˆå †ä¸Šçš„çœŸå®å­—ç¬¦ä¸²æ•°æ®ï¼‰æœ‰äº†ä¸¤ä¸ªæ‰€æœ‰è€…ï¼š<code>s1</code> å’Œ <code>s2</code>ã€‚</li>
</ol>
<p>å¥½å§ï¼Œå°±å‡å®šä¸€ä¸ªå€¼å¯ä»¥æ‹¥æœ‰ä¸¤ä¸ªæ‰€æœ‰è€…ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿ</p>
<p>å½“å˜é‡ç¦»å¼€ä½œç”¨åŸŸåï¼ŒRust ä¼šè‡ªåŠ¨è°ƒç”¨ <code>drop</code> å‡½æ•°å¹¶æ¸…ç†å˜é‡çš„å †å†…å­˜ã€‚ä¸è¿‡ç”±äºä¸¤ä¸ª <code>String</code> å˜é‡æŒ‡å‘äº†åŒä¸€ä½ç½®ã€‚è¿™å°±æœ‰äº†ä¸€ä¸ªé—®é¢˜ï¼šå½“ <code>s1</code> å’Œ <code>s2</code> ç¦»å¼€ä½œç”¨åŸŸï¼Œå®ƒä»¬éƒ½ä¼šå°è¯•é‡Šæ”¾ç›¸åŒçš„å†…å­˜ã€‚è¿™æ˜¯ä¸€ä¸ªå«åš <strong>äºŒæ¬¡é‡Šæ”¾ï¼ˆdouble freeï¼‰</strong> çš„é”™è¯¯ï¼Œä¹Ÿæ˜¯ä¹‹å‰æåˆ°è¿‡çš„å†…å­˜å®‰å…¨æ€§ BUG ä¹‹ä¸€ã€‚ä¸¤æ¬¡é‡Šæ”¾ï¼ˆç›¸åŒï¼‰å†…å­˜ä¼šå¯¼è‡´å†…å­˜æ±¡æŸ“ï¼Œå®ƒå¯èƒ½ä¼šå¯¼è‡´æ½œåœ¨çš„å®‰å…¨æ¼æ´ã€‚</p>
<p>å› æ­¤ï¼ŒRust è¿™æ ·è§£å†³é—®é¢˜ï¼š<strong>å½“ <code>s1</code> è¢«èµ‹äºˆ <code>s2</code> åï¼ŒRust è®¤ä¸º <code>s1</code> ä¸å†æœ‰æ•ˆï¼Œå› æ­¤ä¹Ÿæ— éœ€åœ¨ <code>s1</code> ç¦»å¼€ä½œç”¨åŸŸå <code>drop</code> ä»»ä½•ä¸œè¥¿ï¼Œè¿™å°±æ˜¯æŠŠæ‰€æœ‰æƒä» <code>s1</code> è½¬ç§»ç»™äº† <code>s2</code>ï¼Œ<code>s1</code> åœ¨è¢«èµ‹äºˆ <code>s2</code> åå°±é©¬ä¸Šå¤±æ•ˆäº†</strong>ã€‚</p>
<p>æ‰€ä»¥åœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œå½“s1çš„æ‰€æœ‰æƒè½¬ç§»åˆ°äº†s2ä¹‹åï¼Œs1å°±æ²¡æœ‰ç”¨äº†</p>
<h6 id="å…‹éš†ï¼ˆæ·±æ‹·è´ï¼‰"><a href="#å…‹éš†ï¼ˆæ·±æ‹·è´ï¼‰" class="headerlink" title="å…‹éš†ï¼ˆæ·±æ‹·è´ï¼‰"></a>å…‹éš†ï¼ˆæ·±æ‹·è´ï¼‰</h6><p>é¦–å…ˆï¼Œ<strong>Rust æ°¸è¿œä¹Ÿä¸ä¼šè‡ªåŠ¨åˆ›å»ºæ•°æ®çš„ â€œæ·±æ‹·è´â€</strong>ã€‚å› æ­¤ï¼Œä»»ä½•<strong>è‡ªåŠ¨</strong>çš„å¤åˆ¶éƒ½ä¸æ˜¯æ·±æ‹·è´ï¼Œå¯ä»¥è¢«è®¤ä¸ºå¯¹è¿è¡Œæ—¶æ€§èƒ½å½±å“è¾ƒå°ã€‚</p>
<p>å¦‚æœæˆ‘ä»¬å®åœ¨æƒ³è¦èƒœè¯»å¤åˆ¶Stringå †ä¸Šçš„æ•°æ®ï¼Œå¯ä»¥ä½¿ç”¨cloneæ–¹æ³•</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">s2</span> = s1.<span class="title function_ invoke__">clone</span>();</span><br><span class="line"></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;s1 = &#123;&#125;, s2 = &#123;&#125;&quot;</span>, s1, s2);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>èƒ½æ­£å¸¸è¿è¡Œï¼Œæ²¡æŠ¥é”™</p>
<h6 id="æ‹·è´-æµ…æ‹·è´"><a href="#æ‹·è´-æµ…æ‹·è´" class="headerlink" title="æ‹·è´(æµ…æ‹·è´)"></a>æ‹·è´(æµ…æ‹·è´)</h6><p>æµ…æ‹·è´åªå‘ç”Ÿåœ¨æ ˆä¸Šï¼Œå› æ­¤æ€§èƒ½å¾ˆé«˜ï¼Œåœ¨æ—¥å¸¸ç¼–ç¨‹ä¸­ï¼Œæµ…æ‹·è´æ— å¤„ä¸åœ¨ã€‚</p>
<p>å†å›åˆ°ä¹‹å‰çœ‹è¿‡çš„ä¾‹å­:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">y</span> = x;</span><br><span class="line"></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;x = &#123;&#125;, y = &#123;&#125;&quot;</span>, x, y);</span><br></pre></td></tr></table></figure>

<p>ä½†è¿™æ®µä»£ç ä¼¼ä¹ä¸æˆ‘ä»¬åˆšåˆšå­¦åˆ°çš„å†…å®¹ç›¸çŸ›ç›¾ï¼šæ²¡æœ‰è°ƒç”¨ <code>clone</code>ï¼Œä¸è¿‡ä¾ç„¶å®ç°äº†ç±»ä¼¼æ·±æ‹·è´çš„æ•ˆæœ â€”â€” æ²¡æœ‰æŠ¥æ‰€æœ‰æƒçš„é”™è¯¯ã€‚</p>
<p>å› ä¸º<strong>ä»»ä½•åŸºæœ¬ç±»å‹çš„ç»„åˆå¯ä»¥ <code>Copy</code> ï¼Œä¸éœ€è¦åˆ†é…å†…å­˜æˆ–æŸç§å½¢å¼èµ„æºçš„ç±»å‹æ˜¯å¯ä»¥ <code>Copy</code> çš„</strong>ã€‚å¦‚ä¸‹æ˜¯ä¸€äº› <code>Copy</code> çš„ç±»å‹ï¼š</p>
<ul>
<li>æ‰€æœ‰æ•´æ•°ç±»å‹ï¼Œæ¯”å¦‚ <code>u32</code></li>
<li>å¸ƒå°”ç±»å‹ï¼Œ<code>bool</code>ï¼Œå®ƒçš„å€¼æ˜¯ <code>true</code> å’Œ <code>false</code></li>
<li>æ‰€æœ‰æµ®ç‚¹æ•°ç±»å‹ï¼Œæ¯”å¦‚ <code>f64</code></li>
<li>å­—ç¬¦ç±»å‹ï¼Œ<code>char</code></li>
<li>å…ƒç»„ï¼Œå½“ä¸”ä»…å½“å…¶åŒ…å«çš„ç±»å‹ä¹Ÿéƒ½æ˜¯ <code>Copy</code> çš„æ—¶å€™ã€‚æ¯”å¦‚ï¼Œ<code>(i32, i32)</code> æ˜¯ <code>Copy</code> çš„ï¼Œä½† <code>(i32, String)</code> å°±ä¸æ˜¯</li>
<li>ä¸å¯å˜å¼•ç”¨ <code>&amp;T</code> ï¼Œä¾‹å¦‚<a target="_blank" rel="noopener" href="https://course.rs/basic/ownership/ownership.html#%E8%BD%AC%E7%A7%BB%E6%89%80%E6%9C%89%E6%9D%83">è½¬ç§»æ‰€æœ‰æƒ</a>ä¸­çš„æœ€åä¸€ä¸ªä¾‹å­ï¼Œ<strong>ä½†æ˜¯æ³¨æ„ï¼šå¯å˜å¼•ç”¨ <code>&amp;mut T</code> æ˜¯ä¸å¯ä»¥ Copyçš„</strong></li>
</ul>
<h4 id="å¼•ç”¨ä¸å€Ÿç”¨"><a href="#å¼•ç”¨ä¸å€Ÿç”¨" class="headerlink" title="å¼•ç”¨ä¸å€Ÿç”¨"></a>å¼•ç”¨ä¸å€Ÿç”¨</h4><p>å¦‚æœä»…ä»…æ”¯æŒé€šè¿‡è½¬ç§»æ‰€æœ‰æƒçš„æ–¹å¼è·å–ä¸€ä¸ªå€¼ï¼Œé‚£ä¼šè®©ç¨‹åºå˜å¾—å¤æ‚ã€‚å› æ­¤ï¼ŒRusté€šè¿‡å€Ÿç”¨æ¥è·å–ä¸€ä¸ªå€¼ï¼Œ<strong>è·å–å˜é‡çš„å¼•ç”¨ï¼Œç§°ä¹‹ä¸ºå€Ÿç”¨</strong></p>
<p>å€Ÿç”¨åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p>
<ol>
<li><strong>ä¸å¯å˜å¼•ç”¨</strong>ï¼šå…è®¸å¤šä¸ªå€Ÿç”¨è€…åŒæ—¶è¯»å–è¯¥å€¼ï¼Œä½†ä¸å…è®¸ä¿®æ”¹ã€‚</li>
<li><strong>å¯å˜å¼•ç”¨</strong>ï¼šåªå…è®¸ä¸€ä¸ªå€Ÿç”¨è€…ä¿®æ”¹è¯¥å€¼ï¼Œä½†åœ¨å€Ÿç”¨æœŸé—´ä¸èƒ½æœ‰å…¶ä»–å€Ÿç”¨è€…ã€‚</li>
</ol>
<h5 id="å¼•ç”¨å’Œè§£å¼•ç”¨"><a href="#å¼•ç”¨å’Œè§£å¼•ç”¨" class="headerlink" title="å¼•ç”¨å’Œè§£å¼•ç”¨"></a>å¼•ç”¨å’Œè§£å¼•ç”¨</h5><p>å¸¸è§„å¼•ç”¨æ—¶ä¸€ä¸ªæŒ‡é’ˆç±»å‹ï¼ŒæŒ‡å‘äº†å¯¹è±¡å­˜å‚¨çš„å†…å­˜åœ°å€ã€‚åœ¨ä¸‹é¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªi32çš„å€¼å¼•ç”¨yï¼Œç„¶åä½¿ç”¨è§£å¼•ç”¨è¿ç®—ç¬¦æ¥è§£å‡ºyæ‰€ä½¿ç”¨çš„å€¼:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">y</span> = &amp;x; <span class="comment">//å¼•ç”¨ç±»å‹</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>,x);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>,*y);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">assert_eq!</span>(<span class="number">5</span>, x);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(<span class="number">5</span>, *y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ä½¿ç”¨&amp;æ¥å¼•ç”¨ä¸€ä¸ªå˜é‡ï¼Œç„¶åä½¿ç”¨*æ¥è§£å¼•ç”¨è¿™ä¸ªå˜é‡</p>
<h5 id="ä¸å¯å˜å¼•ç”¨"><a href="#ä¸å¯å˜å¼•ç”¨" class="headerlink" title="ä¸å¯å˜å¼•ç”¨"></a>ä¸å¯å˜å¼•ç”¨</h5><p>ä¸‹é¢çš„ä»£ç ï¼Œæˆ‘ä»¬ç”¨ <code>s1</code> çš„å¼•ç”¨ä½œä¸ºå‚æ•°ä¼ é€’ç»™ <code>calculate_length</code> å‡½æ•°ï¼Œè€Œä¸æ˜¯æŠŠ <code>s1</code> çš„æ‰€æœ‰æƒè½¬ç§»ç»™è¯¥å‡½æ•°ï¼š                                                                                                                                                                                       </p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">len</span> = <span class="title function_ invoke__">calculate_length</span>(&amp;s1);</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The length of &#x27;&#123;&#125;&#x27; is &#123;&#125;.&quot;</span>, s1, len);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">calculate_length</span>(s: &amp;<span class="type">String</span>) <span class="punctuation">-&gt;</span> <span class="type">usize</span> &#123;</span><br><span class="line">    s.<span class="title function_ invoke__">len</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ³¨æ„åˆ°ï¼š</p>
<ol>
<li>æ— éœ€åƒä¸Šç« ä¸€æ ·ï¼šå…ˆé€šè¿‡å‡½æ•°å‚æ•°ä¼ å…¥æ‰€æœ‰æƒï¼Œç„¶åå†é€šè¿‡å‡½æ•°è¿”å›æ¥ä¼ å‡ºæ‰€æœ‰æƒï¼Œä»£ç æ›´åŠ ç®€æ´</li>
<li><code>calculate_length</code> çš„å‚æ•° <code>s</code> ç±»å‹ä» <code>String</code> å˜ä¸º <code>&amp;String</code></li>
</ol>
<p>åœ¨è¿™é‡Œï¼Œ<code>&amp;</code>ç¬¦å·å³æ˜¯å¼•ç”¨ï¼Œä»–ä»¬å…è®¸ä½ ä½¿ç”¨å€¼ï¼Œä½†æ˜¯ä¸è·å–æ‰€æœ‰æƒ</p>
<p><img src="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202503282101141.png" alt="image-20250328210117010" loading="lazy"></p>
<p>é€šè¿‡&amp;s1è¯­æ³•ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªæŒ‡å‘s1çš„å¼•ç”¨ï¼Œä½†æ˜¯å¹¶ä¸æ‹¥æœ‰ä»–ã€‚å› ä¸ºå¹¶ä¸æ‹¥æœ‰è¿™ä¸ªå€¼ï¼Œå½“ç¦»å¼€ä½œç”¨åŸŸåï¼Œå…¶æŒ‡å‘çš„å€¼ä¹Ÿä¸ä¼šè¢«ä¸¢å¼ƒã€‚</p>
<p>åŒç†ï¼Œå‡½æ•° <code>calculate_length</code> ä½¿ç”¨ <code>&amp;</code> æ¥è¡¨æ˜å‚æ•° <code>s</code> çš„ç±»å‹æ˜¯ä¸€ä¸ªå¼•ç”¨ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">calculate_length</span>(s: &amp;<span class="type">String</span>) <span class="punctuation">-&gt;</span> <span class="type">usize</span> &#123; <span class="comment">// s æ˜¯å¯¹ String çš„å¼•ç”¨</span></span><br><span class="line">    s.<span class="title function_ invoke__">len</span>()</span><br><span class="line">&#125; <span class="comment">// è¿™é‡Œï¼Œs ç¦»å¼€äº†ä½œç”¨åŸŸã€‚ä½†å› ä¸ºå®ƒå¹¶ä¸æ‹¥æœ‰å¼•ç”¨å€¼çš„æ‰€æœ‰æƒï¼Œ</span></span><br><span class="line">  <span class="comment">// æ‰€ä»¥ä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿ</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„ï¼š<strong>å€Ÿç”¨çš„å˜é‡ä¸å¯ä¿®æ”¹</strong></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">change</span>(&amp;s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">change</span>(some_string: &amp;<span class="type">String</span>) &#123;</span><br><span class="line">    some_string.<span class="title function_ invoke__">push_str</span>(<span class="string">&quot;, world&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå°è¯•åœ¨sé‡Œæ·»åŠ <code>ï¼Œworld</code>ï¼Œä½†æ˜¯ä¼šæŠ¥é”™</p>
<h5 id="å¯å˜å¼•ç”¨"><a href="#å¯å˜å¼•ç”¨" class="headerlink" title="å¯å˜å¼•ç”¨"></a>å¯å˜å¼•ç”¨</h5><p>æˆ‘ä»¬çŸ¥é“ç”¨letç›´æ¥å®šä¹‰çš„å˜é‡çš„å€¼ä¸å¯ä¿®æ”¹ï¼Œä½†æˆ‘ä»¬ä½¿ç”¨mutåï¼Œå°±å¯ä¿®æ”¹äº†</p>
<p>æˆ‘ä»¬ä¿®æ”¹ä¸Šé¢æŠ¥é”™ä»£ç </p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="title function_ invoke__">change</span>(&amp;<span class="keyword">mut</span> s);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">change</span>(some_string: &amp;<span class="keyword">mut</span> <span class="type">String</span>) &#123;</span><br><span class="line">    some_string.<span class="title function_ invoke__">push_str</span>(<span class="string">&quot;, world&quot;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¾“å‡ºhelloï¼Œworld</p>
<p><strong>å¯å˜å¼•ç”¨åŒæ—¶åªèƒ½å­˜åœ¨ä¸€ä¸ª</strong></p>
<p>ä¸è¿‡å¯å˜å¼•ç”¨å¹¶ä¸æ˜¯éšå¿ƒæ‰€æ¬²ã€æƒ³ç”¨å°±ç”¨çš„ï¼Œå®ƒæœ‰ä¸€ä¸ªå¾ˆå¤§çš„é™åˆ¶ï¼š <strong>åŒä¸€ä½œç”¨åŸŸï¼Œç‰¹å®šæ•°æ®åªèƒ½æœ‰ä¸€ä¸ªå¯å˜å¼•ç”¨</strong>ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">r1</span> = &amp;<span class="keyword">mut</span> s;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">r2</span> = &amp;<span class="keyword">mut</span> s;</span><br><span class="line"></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;&quot;</span>, r1, r2);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¼šæŠ¥ä¸€ä¸ªé”™</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">error[E0499]: cannot borrow `s` as mutable more than once at a time åŒä¸€æ—¶é—´æ— æ³•å¯¹ `s` è¿›è¡Œä¸¤æ¬¡å¯å˜å€Ÿç”¨</span><br><span class="line"> --&gt; src/main.rs:5:14</span><br><span class="line">  |</span><br><span class="line">4 |     let r1 = &amp;mut s;</span><br><span class="line">  |              ------ first mutable borrow occurs here é¦–ä¸ªå¯å˜å¼•ç”¨åœ¨è¿™é‡Œå€Ÿç”¨</span><br><span class="line">5 |     let r2 = &amp;mut s;</span><br><span class="line">  |              ^^^^^^ second mutable borrow occurs here ç¬¬äºŒä¸ªå¯å˜å¼•ç”¨åœ¨è¿™é‡Œå€Ÿç”¨</span><br><span class="line">6 |</span><br><span class="line">7 |     println!(&quot;&#123;&#125;, &#123;&#125;&quot;, r1, r2);</span><br><span class="line">  |                        -- first borrow later used here ç¬¬ä¸€ä¸ªå€Ÿç”¨åœ¨è¿™é‡Œä½¿ç”¨</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç å‡ºé”™çš„åŸå› åœ¨äºï¼Œç¬¬ä¸€ä¸ªå¯å˜å€Ÿç”¨ <code>r1</code> å¿…é¡»è¦æŒç»­åˆ°æœ€åä¸€æ¬¡ä½¿ç”¨çš„ä½ç½® <code>println!</code>åœ¨ <code>r1</code> åˆ›å»ºå’Œæœ€åä¸€æ¬¡ä½¿ç”¨ä¹‹é—´ï¼Œæˆ‘ä»¬åˆå°è¯•åˆ›å»ºç¬¬äºŒä¸ªå¯å˜å€Ÿç”¨ <code>r2</code>ã€‚</p>
<p>æˆ‘ä»¬æ”¹å†™æˆä¸‹é¢è¿™ç§å½¢å¼</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r1</span> = &amp;<span class="keyword">mut</span> s;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, r1);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r2</span> = &amp;<span class="keyword">mut</span> s;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, r2);</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™å°±é¿å…äº†åœ¨åŒä¸€æ—¶é—´æœ‰å¤šä¸ªå¯å˜å¼•ç”¨æŒ‡å‘æ•°æ®ï¼Œr1å˜é‡åœ¨<code>println!</code>åå°±ç¦»å¼€ä½œç”¨åŸŸäº†ï¼Œåé¢åªå­˜åœ¨r2ä¸€ä¸ªå¯å˜å¼•ç”¨æŒ‡å‘æ•°æ®</p>
<p>è¿™ç§é™åˆ¶çš„å¥½å¤„å°±æ˜¯ä½¿ Rust åœ¨ç¼–è¯‘æœŸå°±é¿å…æ•°æ®ç«äº‰ï¼Œæ•°æ®ç«äº‰å¯ç”±ä»¥ä¸‹è¡Œä¸ºé€ æˆï¼š</p>
<ul>
<li>ä¸¤ä¸ªæˆ–æ›´å¤šçš„æŒ‡é’ˆåŒæ—¶è®¿é—®åŒä¸€æ•°æ®</li>
<li>è‡³å°‘æœ‰ä¸€ä¸ªæŒ‡é’ˆè¢«ç”¨æ¥å†™å…¥æ•°æ®</li>
<li>æ²¡æœ‰åŒæ­¥æ•°æ®è®¿é—®çš„æœºåˆ¶</li>
</ul>
<p>æ•°æ®ç«äº‰ä¼šå¯¼è‡´æœªå®šä¹‰è¡Œä¸ºï¼Œè¿™ç§è¡Œä¸ºå¾ˆå¯èƒ½è¶…å‡ºæˆ‘ä»¬çš„é¢„æœŸï¼Œéš¾ä»¥åœ¨è¿è¡Œæ—¶è¿½è¸ªï¼Œå¹¶ä¸”éš¾ä»¥è¯Šæ–­å’Œä¿®å¤ã€‚è€Œ Rust é¿å…äº†è¿™ç§æƒ…å†µçš„å‘ç”Ÿï¼Œå› ä¸ºå®ƒç”šè‡³ä¸ä¼šç¼–è¯‘å­˜åœ¨æ•°æ®ç«äº‰çš„ä»£ç ï¼</p>
<p>å¾ˆå¤šæ—¶å€™ï¼Œå¤§æ‹¬å·å¯ä»¥å¸®æˆ‘ä»¬è§£å†³ä¸€äº›ç¼–è¯‘ä¸é€šè¿‡çš„é—®é¢˜ï¼Œé€šè¿‡æ‰‹åŠ¨é™åˆ¶å˜é‡çš„ä½œç”¨åŸŸï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">r1</span> = &amp;<span class="keyword">mut</span> s;</span><br><span class="line"></span><br><span class="line">&#125; <span class="comment">// r1 åœ¨è¿™é‡Œç¦»å¼€äº†ä½œç”¨åŸŸï¼Œæ‰€ä»¥æˆ‘ä»¬å®Œå…¨å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„å¼•ç”¨</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">r2</span> = &amp;<span class="keyword">mut</span> s;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p><strong>å¯å˜å¼•ç”¨ä¸ä¸å¯å˜å¼•ç”¨ä¸èƒ½åŒæ—¶å­˜åœ¨</strong></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">r1</span> = &amp;s; <span class="comment">// æ²¡é—®é¢˜</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">r2</span> = &amp;s; <span class="comment">// æ²¡é—®é¢˜</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">r3</span> = &amp;<span class="keyword">mut</span> s; <span class="comment">// å¤§é—®é¢˜</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;, &#123;&#125;, and &#123;&#125;&quot;</span>, r1, r2, r3);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>æ€»çš„æ¥è¯´ï¼Œå€Ÿç”¨è§„åˆ™å¦‚ä¸‹ï¼š</p>
<ul>
<li>åŒä¸€æ—¶åˆ»ï¼Œä½ åªèƒ½æ‹¥æœ‰è¦ä¹ˆä¸€ä¸ªå¯å˜å¼•ç”¨ï¼Œè¦ä¹ˆä»»æ„å¤šä¸ªä¸å¯å˜å¼•ç”¨</li>
<li>å¼•ç”¨å¿…é¡»æ€»æ˜¯æœ‰æ•ˆçš„</li>
</ul>
<h5 id="æ‚¬å‚å¼•ç”¨"><a href="#æ‚¬å‚å¼•ç”¨" class="headerlink" title="æ‚¬å‚å¼•ç”¨"></a>æ‚¬å‚å¼•ç”¨</h5><p>æ‚¬å‚å¼•ç”¨ä¹Ÿå«åšæ‚¬å‚æŒ‡é’ˆï¼Œæ„æ€ä¸ºæŒ‡é’ˆæŒ‡å‘æŸä¸ªå€¼åï¼Œè¿™ä¸ªå€¼è¢«é‡Šæ”¾æ‰äº†ï¼Œè€ŒæŒ‡é’ˆä»ç„¶å­˜åœ¨ï¼Œå…¶æŒ‡å‘çš„å†…å­˜å¯èƒ½ä¸å­˜åœ¨ä»»ä½•å€¼æˆ–å·²è¢«å…¶å®ƒå˜é‡é‡æ–°ä½¿ç”¨ã€‚åœ¨ Rust ä¸­ç¼–è¯‘å™¨å¯ä»¥ç¡®ä¿å¼•ç”¨æ°¸è¿œä¹Ÿä¸ä¼šå˜æˆæ‚¬å‚çŠ¶æ€ï¼šå½“ä½ è·å–æ•°æ®çš„å¼•ç”¨åï¼Œç¼–è¯‘å™¨å¯ä»¥ç¡®ä¿æ•°æ®ä¸ä¼šåœ¨å¼•ç”¨ç»“æŸå‰è¢«é‡Šæ”¾ï¼Œè¦æƒ³é‡Šæ”¾æ•°æ®ï¼Œå¿…é¡»å…ˆåœæ­¢å…¶å¼•ç”¨çš„ä½¿ç”¨ã€‚</p>
<h3 id="å¤åˆç±»å‹"><a href="#å¤åˆç±»å‹" class="headerlink" title="å¤åˆç±»å‹"></a>å¤åˆç±»å‹</h3><h4 id="å­—ç¬¦ä¸²ä¸åˆ‡ç‰‡"><a href="#å­—ç¬¦ä¸²ä¸åˆ‡ç‰‡" class="headerlink" title="å­—ç¬¦ä¸²ä¸åˆ‡ç‰‡"></a>å­—ç¬¦ä¸²ä¸åˆ‡ç‰‡</h4><h5 id="åˆ‡ç‰‡"><a href="#åˆ‡ç‰‡" class="headerlink" title="åˆ‡ç‰‡"></a>åˆ‡ç‰‡</h5><p>åˆ‡ç‰‡å¹¶ä¸æ˜¯Rustç‹¬æœ‰çš„ï¼Œå…¶ä»–è¯­è¨€éƒ½æœ‰ï¼Œå®ƒå…è®¸ä½ å¼•ç”¨é›†åˆä¸­éƒ¨åˆ†è¿ç»­çš„å…ƒç´ åºåˆ—</p>
<p>å¯¹äºå­—ç¬¦ä¸²æ¥è¯´ï¼Œåˆ‡ç‰‡å°±æ˜¯å¯¹Stringç±»å‹æŸä¸€éƒ¨åˆ†çš„å¼•ç”¨</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello world&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">hello</span> = &amp;s[<span class="number">0</span>..<span class="number">5</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">world</span> = &amp;s[<span class="number">6</span>..<span class="number">11</span>];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>helloæ²¡æœ‰å¼•ç”¨æ•´ä¸ªString sï¼Œè€Œæ˜¯å¼•ç”¨sçš„ä¸€éƒ¨åˆ†å†…å®¹ï¼Œé€šè¿‡[0..5]çš„æ–¹å¼æ¥æŒ‡å®š</p>
<p>è¿™å°±æ˜¯åˆ›å»ºåˆ‡ç‰‡çš„è¯­æ³•ï¼Œä½¿ç”¨æ–¹æ‹¬å·åŒ…æ‹¬çš„ä¸€ä¸ªåºåˆ—ï¼š**[å¼€å§‹ç´¢å¼•..ç»ˆæ­¢ç´¢å¼•]**</p>
<p>å¯¹äº <code>let world = &amp;s[6..11];</code> æ¥è¯´ï¼Œ<code>world</code> æ˜¯ä¸€ä¸ªåˆ‡ç‰‡ï¼Œè¯¥åˆ‡ç‰‡çš„æŒ‡é’ˆæŒ‡å‘ <code>s</code> çš„ç¬¬ 7 ä¸ªå­—èŠ‚(ç´¢å¼•ä» 0 å¼€å§‹, 6 æ˜¯ç¬¬ 7 ä¸ªå­—èŠ‚)ï¼Œä¸”è¯¥åˆ‡ç‰‡çš„é•¿åº¦æ˜¯ <code>5</code> ä¸ªå­—èŠ‚ã€‚</p>
<p>åœ¨ä½¿ç”¨ Rust çš„ <code>..</code> <a target="_blank" rel="noopener" href="https://course.rs/basic/base-type/numbers.html#%E5%BA%8F%E5%88%97range">range åºåˆ—</a>è¯­æ³•æ—¶ï¼Œå¦‚æœä½ æƒ³ä»ç´¢å¼• 0 å¼€å§‹ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹çš„æ–¹å¼ï¼Œè¿™ä¸¤ä¸ªæ˜¯ç­‰æ•ˆçš„ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">slice</span> = &amp;s[<span class="number">0</span>..<span class="number">2</span>];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">slice</span> = &amp;s[..<span class="number">2</span>];</span><br></pre></td></tr></table></figure>

<p>åŒæ ·çš„ï¼Œå¦‚æœä½ çš„åˆ‡ç‰‡æƒ³è¦åŒ…å« <code>String</code> çš„æœ€åä¸€ä¸ªå­—èŠ‚ï¼Œåˆ™å¯ä»¥è¿™æ ·ä½¿ç”¨ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">len</span> = s.<span class="title function_ invoke__">len</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">slice</span> = &amp;s[<span class="number">4</span>..len];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">slice</span> = &amp;s[<span class="number">4</span>..];</span><br></pre></td></tr></table></figure>

<p>ä½ ä¹Ÿå¯ä»¥æˆªå–å®Œæ•´çš„ <code>String</code> åˆ‡ç‰‡ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">len</span> = s.<span class="title function_ invoke__">len</span>();</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">slice</span> = &amp;s[<span class="number">0</span>..len];</span><br><span class="line"><span class="keyword">let</span> <span class="variable">slice</span> = &amp;s[..];</span><br></pre></td></tr></table></figure>

<blockquote>
<p>åœ¨å¯¹å­—ç¬¦ä¸²ä½¿ç”¨åˆ‡ç‰‡è¯­æ³•æ—¶éœ€è¦æ ¼å¤–å°å¿ƒï¼Œåˆ‡ç‰‡çš„ç´¢å¼•å¿…é¡»è½åœ¨å­—ç¬¦ä¹‹é—´çš„è¾¹ç•Œä½ç½®ï¼Œä¹Ÿå°±æ˜¯ UTF-8 å­—ç¬¦çš„è¾¹ç•Œï¼Œä¾‹å¦‚ä¸­æ–‡åœ¨ UTF-8 ä¸­å ç”¨ä¸‰ä¸ªå­—èŠ‚ï¼Œä¸‹é¢çš„ä»£ç å°±ä¼šå´©æºƒï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = <span class="string">&quot;ä¸­å›½äºº&quot;</span>;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = &amp;s[<span class="number">0</span>..<span class="number">2</span>];</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>,a);</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºæˆ‘ä»¬åªå– <code>s</code> å­—ç¬¦ä¸²çš„å‰ä¸¤ä¸ªå­—èŠ‚ï¼Œä½†æ˜¯æœ¬ä¾‹ä¸­æ¯ä¸ªæ±‰å­—å ç”¨ä¸‰ä¸ªå­—èŠ‚ï¼Œå› æ­¤æ²¡æœ‰è½åœ¨è¾¹ç•Œå¤„ï¼Œä¹Ÿå°±æ˜¯è¿ <code>ä¸­</code> å­—éƒ½å–ä¸å®Œæ•´ï¼Œæ­¤æ—¶ç¨‹åºä¼šç›´æ¥å´©æºƒé€€å‡ºï¼Œå¦‚æœæ”¹æˆ <code>&amp;s[0..3]</code>ï¼Œåˆ™å¯ä»¥æ­£å¸¸é€šè¿‡ç¼–è¯‘ã€‚ å› æ­¤ï¼Œå½“ä½ éœ€è¦å¯¹å­—ç¬¦ä¸²åšåˆ‡ç‰‡ç´¢å¼•æ“ä½œæ—¶ï¼Œéœ€è¦æ ¼å¤–å°å¿ƒè¿™ä¸€ç‚¹ï¼Œå…³äºè¯¥å¦‚ä½•æ“ä½œ UTF-8 å­—ç¬¦ä¸²ï¼Œå‚è§<a target="_blank" rel="noopener" href="https://course.rs/basic/compound-type/string-slice.html#%E6%93%8D%E4%BD%9C-utf-8-%E5%AD%97%E7%AC%A6%E4%B8%B2">è¿™é‡Œ</a>ã€‚</p>
</blockquote>
<p>å½“ç„¶ï¼Œæ•°ç»„ä¹Ÿå¯ä»¥åˆ‡ç‰‡</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">slice</span> = &amp;a[<span class="number">1</span>..<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">assert_eq!</span>(slice, &amp;[<span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="Stringå’Œ-strè½¬æ¢"><a href="#Stringå’Œ-strè½¬æ¢" class="headerlink" title="Stringå’Œ&amp;strè½¬æ¢"></a>Stringå’Œ&amp;strè½¬æ¢</h5><p> <code>&amp;str</code> ç±»å‹ç”Ÿæˆ <code>String</code> ç±»å‹çš„æ“ä½œï¼š</p>
<ul>
<li><code>String::from(&quot;hello,world&quot;)</code></li>
<li><code>&quot;hello,world&quot;.to_string()</code></li>
</ul>
<p>é‚£å¦‚ä½•å°†Stringç±»å‹è½¬æ¢æˆ&amp;str</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello,world!&quot;</span>);</span><br><span class="line">    <span class="title function_ invoke__">say_hello</span>(&amp;s);</span><br><span class="line">    <span class="title function_ invoke__">say_hello</span>(&amp;s[..]);</span><br><span class="line">    <span class="title function_ invoke__">say_hello</span>(s.<span class="title function_ invoke__">as_str</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">say_hello</span>(s: &amp;<span class="type">str</span>) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>,s);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="Stringå’Œ-stråŒºåˆ«"><a href="#Stringå’Œ-stråŒºåˆ«" class="headerlink" title="Stringå’Œ&amp;stråŒºåˆ«"></a>Stringå’Œ&amp;stråŒºåˆ«</h5><table>
<thead>
<tr>
<th>ç‰¹æ€§</th>
<th><code>&amp;str</code></th>
<th><code>String</code></th>
</tr>
</thead>
<tbody><tr>
<td><strong>å†…å­˜åˆ†é…</strong></td>
<td>é€šå¸¸ä¸æ¶‰åŠå †åˆ†é…ï¼ŒæŒ‡å‘ç°æœ‰å†…å­˜æˆ–å­—ç¬¦ä¸²å­—é¢é‡</td>
<td>åœ¨å †ä¸Šåˆ†é…å†…å­˜ï¼Œå­˜å‚¨å’Œç®¡ç†è‡ªå·±çš„æ•°æ®</td>
</tr>
<tr>
<td><strong>å¯å˜æ€§</strong></td>
<td>ä¸å¯å˜çš„å­—ç¬¦ä¸²åˆ‡ç‰‡</td>
<td>å¯å˜å­—ç¬¦ä¸²ï¼Œå¯ä»¥ä¿®æ”¹å…¶å†…å®¹</td>
</tr>
<tr>
<td><strong>ç”Ÿå‘½å‘¨æœŸ</strong></td>
<td><code>&amp;str</code> çš„ç”Ÿå‘½å‘¨æœŸä¾èµ–äºå¼•ç”¨çš„æº</td>
<td><code>String</code> æ˜¯æ‰€æœ‰æƒç±»å‹ï¼Œç”Ÿå‘½å‘¨æœŸä¸æ‰€æœ‰æƒç›¸å…³</td>
</tr>
<tr>
<td><strong>æ€§èƒ½</strong></td>
<td>æ›´é«˜æ•ˆï¼Œä¸éœ€è¦å †åˆ†é…å†…å­˜</td>
<td>ç›¸æ¯” <code>&amp;str</code> æœ‰é¢å¤–çš„å †åˆ†é…å’Œå†…å­˜ç®¡ç†å¼€é”€</td>
</tr>
<tr>
<td><strong>å¸¸è§ç”¨é€”</strong></td>
<td>åªè¯»å­—ç¬¦ä¸²ï¼Œä¸éœ€è¦ä¿®æ”¹</td>
<td>éœ€è¦ä¿®æ”¹æˆ–åŠ¨æ€ç”Ÿæˆå­—ç¬¦ä¸²</td>
</tr>
</tbody></table>
<h5 id="å­—ç¬¦ä¸²ç´¢å¼•"><a href="#å­—ç¬¦ä¸²ç´¢å¼•" class="headerlink" title="å­—ç¬¦ä¸²ç´¢å¼•"></a>å­—ç¬¦ä¸²ç´¢å¼•</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s1</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">h</span> = s1[<span class="number">0</span>];</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¼šæŠ¥é”™</p>
<p>æ³¨æ„ï¼šrust<strong>ä¸å­˜åœ¨å­—ç¬¦ä¸²ç´¢å¼•</strong></p>
<h5 id="å­—ç¬¦ä¸²æ“ä½œ"><a href="#å­—ç¬¦ä¸²æ“ä½œ" class="headerlink" title="å­—ç¬¦ä¸²æ“ä½œ"></a>å­—ç¬¦ä¸²æ“ä½œ</h5><h6 id="è¿½åŠ ï¼ˆpushï¼‰"><a href="#è¿½åŠ ï¼ˆpushï¼‰" class="headerlink" title="è¿½åŠ ï¼ˆpushï¼‰"></a>è¿½åŠ ï¼ˆpushï¼‰</h6><p>pushè¿½åŠ å­—ç¬¦</p>
<p>push_strè¿½åŠ å­—ç¬¦ä¸²</p>
<p>è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯<strong>åœ¨åŸæœ‰çš„å­—ç¬¦ä¸²ä¸Šè¿½åŠ ï¼Œå¹¶ä¸ä¼šè¿”å›æ–°çš„å­—ç¬¦ä¸²</strong>ã€‚ç”±äºå­—ç¬¦ä¸²è¿½åŠ æ“ä½œè¦ä¿®æ”¹åŸæ¥çš„å­—ç¬¦ä¸²ï¼Œåˆ™è¯¥å­—ç¬¦ä¸²å¿…é¡»æ˜¯å¯å˜çš„ï¼Œå³<strong>å­—ç¬¦ä¸²å˜é‡å¿…é¡»ç”± <code>mut</code> å…³é”®å­—ä¿®é¥°</strong>ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Hello &quot;</span>);</span><br><span class="line"></span><br><span class="line">    s.<span class="title function_ invoke__">push_str</span>(<span class="string">&quot;rust&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;è¿½åŠ å­—ç¬¦ä¸² push_str() -&gt; &#123;&#125;&quot;</span>, s);</span><br><span class="line"></span><br><span class="line">    s.<span class="title function_ invoke__">push</span>(<span class="string">&#x27;!&#x27;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;è¿½åŠ å­—ç¬¦ push() -&gt; &#123;&#125;&quot;</span>, s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è¿½åŠ å­—ç¬¦ä¸² push_str() -&gt; Hello rust</span></span><br><span class="line"><span class="comment">//è¿½åŠ å­—ç¬¦ push() -&gt; Hello rust!</span></span><br></pre></td></tr></table></figure>



<h6 id="æ’å…¥ï¼ˆinsertï¼‰"><a href="#æ’å…¥ï¼ˆinsertï¼‰" class="headerlink" title="æ’å…¥ï¼ˆinsertï¼‰"></a>æ’å…¥ï¼ˆinsertï¼‰</h6><p>insert()æ’å…¥å˜ä¸ªå­—ç¬¦</p>
<p>insert_str()æ’å…¥å­—ç¬¦ä¸²</p>
<p>è¿™ä¿©æ–¹æ³•éœ€è¦ä¼ å…¥ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å­—ç¬¦ï¼ˆä¸²ï¼‰æ’å…¥ä½ç½®çš„ç´¢å¼•ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯è¦æ’å…¥çš„å­—ç¬¦ï¼ˆä¸²ï¼‰ï¼Œç´¢å¼•ä» 0 å¼€å§‹è®¡æ•°ï¼Œå¦‚æœè¶Šç•Œåˆ™ä¼šå‘ç”Ÿé”™è¯¯ã€‚ç”±äºå­—ç¬¦ä¸²æ’å…¥æ“ä½œè¦<strong>ä¿®æ”¹åŸæ¥çš„å­—ç¬¦ä¸²</strong>ï¼Œåˆ™è¯¥å­—ç¬¦ä¸²å¿…é¡»æ˜¯å¯å˜çš„ï¼Œå³<strong>å­—ç¬¦ä¸²å˜é‡å¿…é¡»ç”± <code>mut</code> å…³é”®å­—ä¿®é¥°</strong>ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Hello rust!&quot;</span>);</span><br><span class="line">    s.<span class="title function_ invoke__">insert</span>(<span class="number">5</span>, <span class="string">&#x27;,&#x27;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;æ’å…¥å­—ç¬¦ insert() -&gt; &#123;&#125;&quot;</span>, s);</span><br><span class="line">    s.<span class="title function_ invoke__">insert_str</span>(<span class="number">6</span>, <span class="string">&quot; I like&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;æ’å…¥å­—ç¬¦ä¸² insert_str() -&gt; &#123;&#125;&quot;</span>, s);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ’å…¥å­—ç¬¦ insert() -&gt; Hello, rust!</span></span><br><span class="line"><span class="comment">//æ’å…¥å­—ç¬¦ä¸² insert_str() -&gt; Hello, I like rust!</span></span><br></pre></td></tr></table></figure>



<h6 id="æ›¿æ¢ï¼ˆreplaceï¼‰"><a href="#æ›¿æ¢ï¼ˆreplaceï¼‰" class="headerlink" title="æ›¿æ¢ï¼ˆreplaceï¼‰"></a>æ›¿æ¢ï¼ˆreplaceï¼‰</h6><p><strong>1.replace</strong></p>
<p>é€‚ç”¨äºStringå’Œ&amp;strç±»å‹ï¼Œreplace()æ–¹æ³•æ¥æ”¶ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯è¦è¢«æ›¿æ¢çš„å­—ç¬¦ï¼Œç¬¬äºŒä¸ªæ˜¯æ–°çš„å­—ç¬¦ä¸²ï¼Œè¯¥æ–¹æ³•ä¼šåŒ¹é…åˆ°æ‰€æœ‰çš„å­—ç¬¦ä¸²ã€‚<strong>è¯¥æ–¹æ³•æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯æ“ä½œåŸæ¥çš„å­—ç¬¦ä¸²</strong>ã€‚</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">string_replace</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;I like rust. Learning rust is my favorite!&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">new_string_replace</span> = string_replace.<span class="title function_ invoke__">replace</span>(<span class="string">&quot;rust&quot;</span>, <span class="string">&quot;RUST&quot;</span>);</span><br><span class="line">    dbg!(new_string_replace);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//new_string_replace = &quot;I like RUST. Learning RUST is my favorite!&quot;</span></span><br></pre></td></tr></table></figure>



<p><strong>2.replacen</strong></p>
<p>è¯¥æ–¹æ³•å¯é€‚ç”¨äº <code>String</code> å’Œ <code>&amp;str</code> ç±»å‹ã€‚<code>replacen()</code> æ–¹æ³•æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œå‰ä¸¤ä¸ªå‚æ•°ä¸ <code>replace()</code> æ–¹æ³•ä¸€æ ·ï¼Œç¬¬ä¸‰ä¸ªå‚æ•°åˆ™è¡¨ç¤ºæ›¿æ¢çš„ä¸ªæ•°ã€‚<strong>è¯¥æ–¹æ³•æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œè€Œä¸æ˜¯æ“ä½œåŸæ¥çš„å­—ç¬¦ä¸²</strong>ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">string_replace</span> = <span class="string">&quot;I like rust. Learning rust is my favorite!&quot;</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">new_string_replacen</span> = string_replace.<span class="title function_ invoke__">replacen</span>(<span class="string">&quot;rust&quot;</span>, <span class="string">&quot;RUST&quot;</span>, <span class="number">1</span>);</span><br><span class="line">    dbg!(new_string_replacen);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//new_string_replacen = &quot;I like RUST. Learning rust is my favorite!&quot;</span></span><br></pre></td></tr></table></figure>



<p>3.replace_range</p>
<p>è¯¥æ–¹æ³•ä»…é€‚ç”¨äºStringç±»å‹ã€‚replace_rangeæ¥å—ä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯è¦æ›¿æ¢å­—ç¬¦ä¸²çš„èŒƒå›´ï¼ˆRangeï¼‰ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ–°çš„å­—ç¬¦ã€‚</p>
<p><strong>è¯¥æ–¹æ³•æ˜¯ç›´æ¥æ“ä½œåŸæ¥çš„å­—ç¬¦ä¸²ï¼Œä¸ä¼šè¿”å›æ–°çš„å­—ç¬¦ä¸²ã€‚è¯¥æ–¹æ³•éœ€è¦ä½¿ç”¨ <code>mut</code> å…³é”®å­—ä¿®é¥°</strong>ã€‚</p>
<p>ç¤ºä¾‹ä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">string_replace_range</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;I like rust!&quot;</span>);</span><br><span class="line">    string_replace_range.<span class="title function_ invoke__">replace_range</span>(<span class="number">7</span>..<span class="number">8</span>, <span class="string">&quot;R&quot;</span>);</span><br><span class="line">    dbg!(string_replace_range);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//string_replace_range = &quot;I like Rust!&quot;</span></span><br></pre></td></tr></table></figure>



<h6 id="åˆ é™¤ï¼ˆdeleteï¼‰"><a href="#åˆ é™¤ï¼ˆdeleteï¼‰" class="headerlink" title="åˆ é™¤ï¼ˆdeleteï¼‰"></a>åˆ é™¤ï¼ˆdeleteï¼‰</h6><p>ä¸åˆ é™¤æœ‰å…³çš„æ–¹æ³•æœ‰4ä¸ªï¼Œ<code>pop(),remove(),truncate(),clear()</code>.è¿™å››ä¸ªæ–¹æ³•ä»…é€‚ç”¨äºStringç±»å‹</p>
<p><strong>1.pop</strong> â€“<strong>åˆ é™¤å¹¶è¿”å›å­—ç¬¦ä¸²çš„æœ€åä¸€ä¸ªå­—ç¬¦</strong></p>
<p><strong>è¯¥æ–¹æ³•æ˜¯ç›´æ¥æ“ä½œåŸæ¥çš„å­—ç¬¦ä¸²</strong>ã€‚ä½†æ˜¯å­˜åœ¨è¿”å›å€¼ï¼Œå…¶è¿”å›å€¼æ˜¯ä¸€ä¸ª <code>Option</code> ç±»å‹ï¼Œå¦‚æœå­—ç¬¦ä¸²ä¸ºç©ºï¼Œåˆ™è¿”å› <code>None</code>ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">string_pop</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;rust pop ä¸­æ–‡!&quot;</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">p1</span> = string_pop.<span class="title function_ invoke__">pop</span>();</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">p2</span> = string_pop.<span class="title function_ invoke__">pop</span>();</span><br><span class="line">    dbg!(p1);</span><br><span class="line">    dbg!(p2);</span><br><span class="line">    dbg!(string_pop);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>2.remove â€“åˆ é™¤å¹¶è¿”å›å­—ç¬¦ä¸²ä¸­æŒ‡å®šä½ç½®çš„å­—ç¬¦</strong></p>
<p><strong>è¯¥æ–¹æ³•æ˜¯ç›´æ¥æ“ä½œåŸæ¥çš„å­—ç¬¦ä¸²</strong>ã€‚ä½†æ˜¯å­˜åœ¨è¿”å›å€¼ï¼Œå…¶è¿”å›å€¼æ˜¯åˆ é™¤ä½ç½®çš„å­—ç¬¦ä¸²ï¼Œåªæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œè¡¨ç¤ºè¯¥å­—ç¬¦èµ·å§‹ç´¢å¼•ä½ç½®ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">string_remove</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;æµ‹è¯•removeæ–¹æ³•&quot;</span>);</span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;string_remove å  &#123;&#125; ä¸ªå­—èŠ‚&quot;</span>,</span><br><span class="line">        std::mem::<span class="title function_ invoke__">size_of_val</span>(string_remove.<span class="title function_ invoke__">as_str</span>())</span><br><span class="line">    );</span><br><span class="line">    <span class="comment">// åˆ é™¤ç¬¬ä¸€ä¸ªæ±‰å­—</span></span><br><span class="line">    string_remove.<span class="title function_ invoke__">remove</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="comment">// ä¸‹é¢ä»£ç ä¼šå‘ç”Ÿé”™è¯¯</span></span><br><span class="line">    <span class="comment">// string_remove.remove(1);</span></span><br><span class="line">    <span class="comment">// ç›´æ¥åˆ é™¤ç¬¬äºŒä¸ªæ±‰å­—</span></span><br><span class="line">    <span class="comment">// string_remove.remove(3);</span></span><br><span class="line">    dbg!(string_remove);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>3.truncate â€“åˆ é™¤å­—ç¬¦ä¸²ä¸­ä»æŒ‡å®šä½ç½®å¼€å§‹åˆ°ç»“å°¾çš„å…¨éƒ¨å­—ç¬¦</strong></p>
<p><strong>è¯¥æ–¹æ³•æ˜¯ç›´æ¥æ“ä½œåŸæ¥çš„å­—ç¬¦ä¸²</strong>ã€‚æ— è¿”å›å€¼ã€‚è¯¥æ–¹æ³• <code>truncate()</code> æ–¹æ³•æ˜¯æŒ‰ç…§å­—èŠ‚æ¥å¤„ç†å­—ç¬¦ä¸²çš„</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">string_truncate</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;æµ‹è¯•truncate&quot;</span>);</span><br><span class="line">    string_truncate.<span class="title function_ invoke__">truncate</span>(<span class="number">3</span>);</span><br><span class="line">    dbg!(string_truncate);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>4.clear â€“æ¸…ç©ºå­—ç¬¦ä¸²</strong></p>
<p><strong>è¯¥æ–¹æ³•æ˜¯ç›´æ¥æ“ä½œåŸæ¥çš„å­—ç¬¦ä¸²</strong>ã€‚è°ƒç”¨åï¼Œåˆ é™¤å­—ç¬¦ä¸²ä¸­çš„æ‰€æœ‰å­—ç¬¦ï¼Œç›¸å½“äº <code>truncate()</code> æ–¹æ³•å‚æ•°ä¸º 0 çš„æ—¶å€™ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">string_clear</span> = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;string clear&quot;</span>);</span><br><span class="line">    string_clear.<span class="title function_ invoke__">clear</span>();</span><br><span class="line">    dbg!(string_clear);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="è¿æ¥-Concatenate"><a href="#è¿æ¥-Concatenate" class="headerlink" title="è¿æ¥ (Concatenate)"></a>è¿æ¥ (Concatenate)</h6><p>ä½¿ç”¨+æˆ–è€…+&#x3D;è¿æ¥å­—ç¬¦ä¸²</p>
<p>åœ¨ä½¿ç”¨ <code>+</code> æ—¶ï¼Œ å¿…é¡»ä¼ é€’åˆ‡ç‰‡å¼•ç”¨ç±»å‹ã€‚ä¸èƒ½ç›´æ¥ä¼ é€’ <code>String</code> ç±»å‹ã€‚**<code>+</code> æ˜¯è¿”å›ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œæ‰€ä»¥å˜é‡å£°æ˜å¯ä»¥ä¸éœ€è¦ <code>mut</code> å…³é”®å­—ä¿®é¥°**ã€‚</p>
<h4 id="å…ƒç»„"><a href="#å…ƒç»„" class="headerlink" title="å…ƒç»„"></a>å…ƒç»„</h4><p>å®šä¹‰ï¼š</p>
<p>é•¿åº¦å›ºå®šã€å…ƒç´ é¡ºåºå›ºå®š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">tup</span>: (<span class="type">i32</span>, <span class="type">f64</span>, <span class="type">u8</span>) = (<span class="number">500</span>, <span class="number">6.4</span>, <span class="number">1</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="ç”¨æ¨¡å¼åŒ¹é…è§£æ„å…ƒç»„"><a href="#ç”¨æ¨¡å¼åŒ¹é…è§£æ„å…ƒç»„" class="headerlink" title="ç”¨æ¨¡å¼åŒ¹é…è§£æ„å…ƒç»„"></a>ç”¨æ¨¡å¼åŒ¹é…è§£æ„å…ƒç»„</h5><p>å°†tupé‡Œçš„å€¼åˆ†åˆ«èµ‹å€¼ç»™x,y,z</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">tup</span> = (<span class="number">500</span>, <span class="number">6.4</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> (x, y, z) = tup;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of y is: &#123;&#125;&quot;</span>, y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="ç”¨-æ¥è®¿é—®å…ƒç»„"><a href="#ç”¨-æ¥è®¿é—®å…ƒç»„" class="headerlink" title="ç”¨.æ¥è®¿é—®å…ƒç»„"></a>ç”¨.æ¥è®¿é—®å…ƒç»„</h5><p>å¦‚æœæˆ‘ä»¬æƒ³è¦è®¿é—®æŸä¸ªç‰¹å®šçš„å…ƒç´ ï¼Œæˆ‘ä»¬ä½¿ç”¨.è¿›è¡Œè®¿é—®</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span>: (<span class="type">i32</span>, <span class="type">f64</span>, <span class="type">u8</span>) = (<span class="number">500</span>, <span class="number">6.4</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">five_hundred</span> = x.<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">six_point_four</span> = x.<span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">one</span> = x.<span class="number">2</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å’Œå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œå…ƒç»„çš„ç´¢å¼•ä»0å¼€å§‹ã€‚</p>
<h4 id="ç»“æ„ä½“"><a href="#ç»“æ„ä½“" class="headerlink" title="ç»“æ„ä½“"></a>ç»“æ„ä½“</h4><h5 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h5><p>ä¸€ä¸ªç»“æ„ä½“ç”±å‡ éƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li>é€šè¿‡å…³é”®å­— <code>struct</code> å®šä¹‰</li>
<li>ä¸€ä¸ªæ¸…æ™°æ˜ç¡®çš„ç»“æ„ä½“ <code>åç§°</code></li>
<li>å‡ ä¸ªæœ‰åå­—çš„ç»“æ„ä½“ <code>å­—æ®µ</code></li>
</ul>
<p>ä¾‹å¦‚ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">User</span> &#123;</span><br><span class="line">    active: <span class="type">bool</span>,</span><br><span class="line">    username: <span class="type">String</span>,</span><br><span class="line">    email: <span class="type">String</span>,</span><br><span class="line">    sign_in_count: <span class="type">u64</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="å®ä¾‹åŒ–"><a href="#å®ä¾‹åŒ–" class="headerlink" title="å®ä¾‹åŒ–"></a>å®ä¾‹åŒ–</h5><p>æˆ‘ä»¬å°è¯•å®ä¾‹åŒ–ä¸Šé¢ä¸€ä¸ªç»“æ„ä½“</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">user1</span> = User &#123;</span><br><span class="line">    email: <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;someone@example.com&quot;</span>),</span><br><span class="line">    username: <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;someusername123&quot;</span>),</span><br><span class="line">    active: <span class="literal">true</span>,</span><br><span class="line">    sign_in_count: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æœ‰å‡ ç‚¹å€¼å¾—æ³¨æ„:</p>
<ol>
<li>åˆå§‹åŒ–å®ä¾‹æ—¶ï¼Œ<strong>æ¯ä¸ªå­—æ®µ</strong>éƒ½éœ€è¦è¿›è¡Œåˆå§‹åŒ–</li>
<li>åˆå§‹åŒ–æ—¶çš„å­—æ®µé¡ºåº<strong>ä¸éœ€è¦</strong>å’Œç»“æ„ä½“å®šä¹‰æ—¶çš„é¡ºåºä¸€è‡´</li>
</ol>
<h5 id="è®¿é—®ç»“æ„ä½“å­—æ®µ"><a href="#è®¿é—®ç»“æ„ä½“å­—æ®µ" class="headerlink" title="è®¿é—®ç»“æ„ä½“å­—æ®µ"></a>è®¿é—®ç»“æ„ä½“å­—æ®µ</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">user1</span> = User &#123;</span><br><span class="line">    email: <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;someone@example.com&quot;</span>),</span><br><span class="line">    username: <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;someusername123&quot;</span>),</span><br><span class="line">    active: <span class="literal">true</span>,</span><br><span class="line">    sign_in_count: <span class="number">1</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">user1.email = <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;anotheremail@example.com&quot;</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬ç”¨.æ¥è®¿é—®å’Œä¿®æ”¹ç»“æ„ä½“å®ä¾‹å†…éƒ¨çš„å­—æ®µå€¼</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¿…é¡»è¦å°†ç»“æ„ä½“å®ä¾‹å£°æ˜ä¸ºå¯å˜çš„ï¼Œæ‰èƒ½ä¿®æ”¹å…¶ä¸­çš„å­—æ®µ</p>
<h5 id="ç®€åŒ–ç»“æ„ä½“æ„é€ "><a href="#ç®€åŒ–ç»“æ„ä½“æ„é€ " class="headerlink" title="ç®€åŒ–ç»“æ„ä½“æ„é€ "></a>ç®€åŒ–ç»“æ„ä½“æ„é€ </h5><p>ä¸‹é¢çš„å‡½æ•°ç±»ä¼¼ä¸€ä¸ªæ„å»ºå‡½æ•°ï¼Œè¿”å›äº† <code>User</code> ç»“æ„ä½“çš„å®ä¾‹ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">build_user</span>(email: <span class="type">String</span>, username: <span class="type">String</span>) <span class="punctuation">-&gt;</span> User &#123;</span><br><span class="line">    User &#123;</span><br><span class="line">        email: email,</span><br><span class="line">        username: username,</span><br><span class="line">        active: <span class="literal">true</span>,</span><br><span class="line">        sign_in_count: <span class="number">1</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å®ƒæ¥æ”¶ä¸¤ä¸ªå­—ç¬¦ä¸²å‚æ•°ï¼š <code>email</code> å’Œ <code>username</code>ï¼Œç„¶åä½¿ç”¨å®ƒä»¬æ¥åˆ›å»ºä¸€ä¸ª <code>User</code> ç»“æ„ä½“ï¼Œå¹¶ä¸”è¿”å›ã€‚å¯ä»¥æ³¨æ„åˆ°è¿™ä¸¤è¡Œï¼š <code>email: email</code> å’Œ <code>username: username</code>ï¼Œéå¸¸çš„æ‰çœ¼ï¼Œå› ä¸ºå®åœ¨æœ‰äº›å•°å—¦ï¼Œå¦‚æœä½ ä» TypeScript è¿‡æ¥ï¼Œè‚¯å®šä¼šé„™è§† Rust ä¸€ç•ªï¼Œä¸è¿‡å¥½åœ¨ï¼Œå®ƒä¹Ÿä¸æ˜¯æ— å¯æ•‘è¯ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">build_user</span>(email: <span class="type">String</span>, username: <span class="type">String</span>) <span class="punctuation">-&gt;</span> User &#123;</span><br><span class="line">    User &#123;</span><br><span class="line">        email,</span><br><span class="line">        username,</span><br><span class="line">        active: <span class="literal">true</span>,</span><br><span class="line">        sign_in_count: <span class="number">1</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œå½“å‡½æ•°å‚æ•°å’Œç»“æ„ä½“å­—æ®µåŒåæ—¶ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ç¼©ç•¥çš„æ–¹å¼è¿›è¡Œåˆå§‹åŒ–ï¼Œè·Ÿ TypeScript ä¸­ä¸€æ¨¡ä¸€æ ·ã€‚</p>
<h5 id="ç»“æ„ä½“æ›´æ–°è¯­æ³•"><a href="#ç»“æ„ä½“æ›´æ–°è¯­æ³•" class="headerlink" title="ç»“æ„ä½“æ›´æ–°è¯­æ³•"></a>ç»“æ„ä½“æ›´æ–°è¯­æ³•</h5><p>æ ¹æ®å·²æœ‰çš„ç»“æ„ä½“å®ä¾‹ï¼Œåˆ›å»ºæ–°çš„ç»“æ„ä½“å®ä¾‹ï¼Œä¾‹å¦‚æ ¹æ®å·²æœ‰çš„ <code>user1</code> å®ä¾‹æ¥æ„å»º <code>user2</code>ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">user2</span> = User &#123;</span><br><span class="line">      active: user1.active,</span><br><span class="line">      username: user1.username,</span><br><span class="line">      email: <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;another@example.com&quot;</span>),</span><br><span class="line">      sign_in_count: user1.sign_in_count,</span><br><span class="line">  &#125;;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å‘ç°ï¼Œuser1çš„ä¸‰ä¸ªå­—æ®µå±…ç„¶æ‰‹åŠ¨è¢«èµ‹å€¼ç»™äº†user2ï¼Œå¤ªéº»çƒ¦äº†ï¼ŒRustæä¾›äº†ç»“æ„ä½“æ›´æ–°è¯­æ³•ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">user2</span> = User &#123;</span><br><span class="line">      email: <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;another@example.com&quot;</span>),</span><br><span class="line">      ..user1</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>åªéœ€ç”¨ä¸€ä¸ª..ï¼Œå°±èƒ½å°†ä¸user1ä¸€æ ·çš„å€¼èµ‹ç»™äº†user2</p>
<h5 id="å…ƒç»„ç»“æ„ä½“ï¼ˆtuple-structï¼‰"><a href="#å…ƒç»„ç»“æ„ä½“ï¼ˆtuple-structï¼‰" class="headerlink" title="å…ƒç»„ç»“æ„ä½“ï¼ˆtuple structï¼‰"></a>å…ƒç»„ç»“æ„ä½“ï¼ˆtuple structï¼‰</h5><p>ç»“æ„ä½“å¿…é¡»è¦æœ‰åç§°ï¼Œä½†æ˜¯ç»“æ„ä½“çš„å­—æ®µå¯ä»¥æ²¡æœ‰åç§°ï¼Œè¿™ç§ç»“æ„ä½“é•¿å¾—åƒå…ƒç»„ï¼Œå› æ­¤ç§°ä¸ºå…ƒç»„ç»“æ„ä½“ï¼š    struct Color(i32, i32, i32);<br>    struct Point(i32, i32, i32);</p>
<pre><code>let black = Color(0, 0, 0);
let origin = Point(0, 0, 0);
</code></pre>
<p>å…ƒç»„ç»“æ„ä½“åœ¨ä½ å¸Œæœ›æœ‰ä¸€ä¸ªæ•´ä½“åç§°ï¼Œä½†æ˜¯åˆä¸å…³å¿ƒé‡Œé¢å­—æ®µçš„åç§°æ—¶å°†éå¸¸æœ‰ç”¨ã€‚ä¾‹å¦‚ä¸Šé¢çš„ <code>Point</code> å…ƒç»„ç»“æ„ä½“ï¼Œä¼—æ‰€å‘¨çŸ¥ 3D ç‚¹æ˜¯ <code>(x, y, z)</code> å½¢å¼çš„åæ ‡ç‚¹ï¼Œå› æ­¤æˆ‘ä»¬æ— éœ€å†ä¸ºå†…éƒ¨çš„å­—æ®µé€ä¸€å‘½åä¸ºï¼š<code>x</code>, <code>y</code>, <code>z</code>ã€‚</p>
<h5 id="å•å…ƒç»“æ„ä½“"><a href="#å•å…ƒç»“æ„ä½“" class="headerlink" title="å•å…ƒç»“æ„ä½“"></a>å•å…ƒç»“æ„ä½“</h5><p>å•å…ƒç»“æ„ä½“å’Œå•å…ƒç±»å‹å¾ˆåƒï¼Œæ²¡æœ‰ä»»ä½•å­—æ®µå’Œå±æ€§</p>
<p>å¦‚æœä½ å®šä¹‰ä¸€ä¸ªç±»å‹ï¼Œä½†æ˜¯ä¸å…³å¿ƒè¯¥ç±»å‹çš„å†…å®¹ï¼Œåªå…³å¿ƒå®ƒçš„è¡Œä¸ºæ—¶ï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>å•å…ƒç»“æ„ä½“</code>ï¼š</p>
<h5 id="ä½¿ç”¨-derive-Debug-æ¥æ‰“å°ç»“æ„ä½“çš„ä¿¡æ¯"><a href="#ä½¿ç”¨-derive-Debug-æ¥æ‰“å°ç»“æ„ä½“çš„ä¿¡æ¯" class="headerlink" title="ä½¿ç”¨ #[derive(Debug)] æ¥æ‰“å°ç»“æ„ä½“çš„ä¿¡æ¯"></a>ä½¿ç”¨ <code>#[derive(Debug)]</code> æ¥æ‰“å°ç»“æ„ä½“çš„ä¿¡æ¯</h5><p>å¦‚æœæˆ‘ä»¬æƒ³è¦å¯¹ä¸€ä¸ªç»“æ„ä½“å®ä¾‹è¿›è¡Œæ‰“å°ï¼Œéœ€è¦åœ¨ä»£ç æœ€å‰æ–¹åŠ ä¸Šä¸€ä¸ª<code>#[derive(Debug)]</code> ï¼Œç„¶åä½¿ç”¨<code>dbg!()</code>æˆ–è€…<code>println!(&quot;&#123;:?&#125;&quot;, s);</code>æ¥è¾“å‡º</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    width: <span class="type">u32</span>,</span><br><span class="line">    height: <span class="type">u32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">rect1</span> = Rectangle &#123;</span><br><span class="line">        width: <span class="number">30</span>,</span><br><span class="line">        height: <span class="number">50</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;rect1 is &#123;:?&#125;&quot;</span>, rect1);</span><br><span class="line">&#125;</span><br><span class="line">--------------------------------------------------------------------------------------------------------</span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    width: <span class="type">u32</span>,</span><br><span class="line">    height: <span class="type">u32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">scale</span> = <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">rect1</span> = Rectangle &#123;</span><br><span class="line">        width: dbg!(<span class="number">30</span> * scale),</span><br><span class="line">        height: <span class="number">50</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    dbg!(&amp;rect1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="æšä¸¾"><a href="#æšä¸¾" class="headerlink" title="æšä¸¾"></a>æšä¸¾</h4><p>æšä¸¾å…è®¸ä½ é€šè¿‡åˆ—ä¸¾å¯èƒ½çš„æˆå‘˜æ¥å®šä¹‰ä¸€ä¸ª<strong>æšä¸¾ç±»å‹</strong>ï¼Œä¾‹å¦‚æ‰‘å…‹ç‰ŒèŠ±è‰²ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">PokerSuit</span> &#123;</span><br><span class="line">  Clubs,</span><br><span class="line">  Spades,</span><br><span class="line">  Diamonds,</span><br><span class="line">  Hearts,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>æšä¸¾ç±»å‹æ˜¯ä¸€ä¸ªç±»å‹ï¼Œå®ƒä¼šåŒ…å«æ‰€æœ‰å¯èƒ½çš„æšä¸¾æˆå‘˜ï¼Œè€Œæšä¸¾å€¼æ˜¯è¯¥ç±»å‹ä¸­çš„å…·ä½“æŸä¸ªæˆå‘˜çš„å®ä¾‹ã€‚</strong></p>
<h5 id="æšä¸¾å€¼"><a href="#æšä¸¾å€¼" class="headerlink" title="æšä¸¾å€¼"></a>æšä¸¾å€¼</h5><p>æˆ‘ä»¬é€šè¿‡<code>::</code>æ¥è®¿é—®æšä¸¾ç±»å‹ä¸‹çš„å…·ä½“æˆå‘˜</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">heart</span> = PokerSuit::Hearts;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">diamond</span> = PokerSuit::Diamonds;</span><br></pre></td></tr></table></figure>

<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æƒ³è®©æ‰‘å…‹ç‰Œå˜å¾—æ›´åŠ å®ç”¨ï¼Œé‚£ä¹ˆéœ€è¦ç»™æ¯å¼ ç‰Œèµ‹äºˆä¸€ä¸ªå€¼ï¼š<code>A</code>(1)-<code>K</code>(13)ï¼Œè¿™æ ·å†åŠ ä¸ŠèŠ±è‰²ï¼Œå°±æ˜¯ä¸€å¼ çœŸå®çš„æ‰‘å…‹ç‰Œäº†ï¼Œä¾‹å¦‚çº¢å¿ƒ Aã€‚</p>
<p>ç›®å‰æ¥è¯´ï¼Œæšä¸¾å€¼è¿˜ä¸èƒ½å¸¦æœ‰å€¼ï¼Œå› æ­¤å…ˆç”¨ç»“æ„ä½“æ¥å®ç°ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">PokerSuit</span> &#123;</span><br><span class="line">    Clubs,</span><br><span class="line">    Spades,</span><br><span class="line">    Diamonds,</span><br><span class="line">    Hearts,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">PokerCard</span> &#123;</span><br><span class="line">    suit: PokerSuit,</span><br><span class="line">    value: <span class="type">u8</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">c1</span> = PokerCard &#123;</span><br><span class="line">       suit: PokerSuit::Clubs,</span><br><span class="line">       value: <span class="number">1</span>,</span><br><span class="line">   &#125;;</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">c2</span> = PokerCard &#123;</span><br><span class="line">       suit: PokerSuit::Diamonds,</span><br><span class="line">       value: <span class="number">12</span>,</span><br><span class="line">   &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç å¾ˆå¥½çš„å®Œæˆäº†å®ƒçš„ä½¿å‘½ï¼Œé€šè¿‡ç»“æ„ä½“ <code>PokerCard</code> æ¥ä»£è¡¨ä¸€å¼ ç‰Œï¼Œç»“æ„ä½“çš„ <code>suit</code> å­—æ®µè¡¨ç¤ºç‰Œçš„èŠ±è‰²ï¼Œç±»å‹æ˜¯ <code>PokerSuit</code> æšä¸¾ç±»å‹ï¼Œ<code>value</code> å­—æ®µä»£è¡¨æ‰‘å…‹ç‰Œçš„æ•°å€¼ã€‚</p>
<p>å¯ä»¥å—ï¼Ÿå¯ä»¥ï¼å¥½å—ï¼Ÿè¯´å®è¯ï¼Œä¸å’‹åœ°ï¼Œå› ä¸ºè¿˜æœ‰ç®€æ´å¾—å¤šçš„æ–¹å¼æ¥å®ç°ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">PokerCard</span> &#123;</span><br><span class="line">    <span class="title function_ invoke__">Clubs</span>(<span class="type">u8</span>),</span><br><span class="line">    <span class="title function_ invoke__">Spades</span>(<span class="type">u8</span>),</span><br><span class="line">    <span class="title function_ invoke__">Diamonds</span>(<span class="type">u8</span>),</span><br><span class="line">    <span class="title function_ invoke__">Hearts</span>(<span class="type">u8</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">c1</span> = PokerCard::<span class="title function_ invoke__">Spades</span>(<span class="number">5</span>);</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">c2</span> = PokerCard::<span class="title function_ invoke__">Diamonds</span>(<span class="number">13</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç›´æ¥å°†æ•°æ®ä¿¡æ¯å…³è”åˆ°æšä¸¾æˆå‘˜ä¸Šï¼Œçœå»è¿‘ä¸€åŠçš„ä»£ç ï¼Œè¿™ç§å®ç°æ˜¯ä¸æ˜¯æ›´ä¼˜é›…ï¼Ÿ</p>
<p>ä¸ä»…å¦‚æ­¤ï¼ŒåŒä¸€ä¸ªæšä¸¾ç±»å‹ä¸‹çš„ä¸åŒæˆå‘˜è¿˜èƒ½æŒæœ‰ä¸åŒçš„æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚è®©æŸäº›èŠ±è‰²æ‰“å° <code>1-13</code> çš„å­—æ ·ï¼Œå¦å¤–çš„èŠ±è‰²æ‰“å°ä¸Š <code>A-K</code> çš„å­—æ ·ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">PokerCard</span> &#123;</span><br><span class="line">    <span class="title function_ invoke__">Clubs</span>(<span class="type">u8</span>),</span><br><span class="line">    <span class="title function_ invoke__">Spades</span>(<span class="type">u8</span>),</span><br><span class="line">    <span class="title function_ invoke__">Diamonds</span>(<span class="type">char</span>),</span><br><span class="line">    <span class="title function_ invoke__">Hearts</span>(<span class="type">char</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">c1</span> = PokerCard::<span class="title function_ invoke__">Spades</span>(<span class="number">5</span>);</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">c2</span> = PokerCard::<span class="title function_ invoke__">Diamonds</span>(<span class="string">&#x27;A&#x27;</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="åŒä¸€åŒ–ç±»å‹"><a href="#åŒä¸€åŒ–ç±»å‹" class="headerlink" title="åŒä¸€åŒ–ç±»å‹"></a>åŒä¸€åŒ–ç±»å‹</h5><p>æšä¸¾ï¼ˆ<code>enum</code>ï¼‰æ˜¯ Rust ä¸­ä¸€ç§å¸¸ç”¨çš„ç±»å‹ï¼Œå®ƒå¯ä»¥å°†ä¸åŒç±»å‹çš„æ•°æ®ç»Ÿä¸€ä¸ºä¸€ä¸ªæšä¸¾ç±»å‹ã€‚é€šè¿‡å®šä¹‰ä¸åŒçš„æšä¸¾å˜ä½“ï¼Œå¯ä»¥å°†å¤šç§ç±»å‹çš„æ•°æ®å°è£…åœ¨ä¸€ä¸ªç±»å‹ä¸­ï¼Œç„¶åä½¿ç”¨æ¨¡å¼åŒ¹é…æ¥è§£æ„å’Œç»Ÿä¸€å¤„ç†å®ƒä»¬ã€‚</p>
<p>ä¾‹å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ª WEB æœåŠ¡ï¼Œéœ€è¦æ¥å—ç”¨æˆ·çš„é•¿è¿æ¥ï¼Œå‡è®¾è¿æ¥æœ‰ä¸¤ç§ï¼š<code>TcpStream</code> å’Œ <code>TlsStream</code>ï¼Œä½†æ˜¯æˆ‘ä»¬å¸Œæœ›å¯¹è¿™ä¸¤ä¸ªè¿æ¥çš„å¤„ç†æµç¨‹ç›¸åŒï¼Œä¹Ÿå°±æ˜¯ç”¨åŒä¸€ä¸ªå‡½æ•°æ¥å¤„ç†è¿™ä¸¤ä¸ªè¿æ¥ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">new</span> (stream: TcpStream) &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">s</span> = stream;</span><br><span class="line">  <span class="keyword">if</span> tls &#123;</span><br><span class="line">    s = <span class="title function_ invoke__">negotiate_tls</span>(stream)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// websocketæ˜¯ä¸€ä¸ªWebSocket&lt;TcpStream&gt;æˆ–è€…</span></span><br><span class="line">  <span class="comment">//   WebSocket&lt;native_tls::TlsStream&lt;TcpStream&gt;&gt;ç±»å‹</span></span><br><span class="line">  websocket = WebSocket::<span class="title function_ invoke__">from_raw_socket</span>(</span><br><span class="line">    s, ......)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ï¼Œæšä¸¾ç±»å‹å°±èƒ½å¸®ä¸Šå¤§å¿™ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Websocket</span> &#123;</span><br><span class="line">  <span class="title function_ invoke__">Tcp</span>(Websocket&lt;TcpStream&gt;),</span><br><span class="line">  <span class="title function_ invoke__">Tls</span>(Websocket&lt;native_tls::TlsStream&lt;TcpStream&gt;&gt;),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="æ•°ç»„"><a href="#æ•°ç»„" class="headerlink" title="æ•°ç»„"></a>æ•°ç»„</h4><p>åœ¨Rustä¸­ï¼Œæœ€å¸¸ç”¨çš„æ•°ç»„æœ‰ä¸¤ç§ï¼Œç¬¬ä¸€ç§æ˜¯é€Ÿåº¦å¾ˆå¿«ä½†æ˜¯é•¿åº¦å›ºå®šçš„arrayï¼Œç¬¬äºŒç§æ˜¯å¯åŠ¨æ€å¢é•¿çš„ä½†æ˜¯æœ‰æ€§èƒ½æŸè€—çš„Vectorï¼Œæˆ‘ä»¬å°†å‰é¢çš„arrayç§°ä¹‹ä¸ºæ•°ç»„ï¼Œå°†åé¢çš„Vectorç§°ä¹‹ä¸ºåŠ¨æ€æ•°ç»„</p>
<p>æ•°ç»„çš„å…·ä½“å®šä¹‰å¾ˆç®€å•ï¼šå°†å¤šä¸ªç±»å‹ç›¸åŒçš„å…ƒç´ ä¾æ¬¡ç»„åˆåœ¨ä¸€èµ·ï¼Œå°±æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œæ•°ç»„å…·æœ‰ä»¥ä¸‹ä¸‰è¦ç´ ï¼š</p>
<ul>
<li>é•¿åº¦å›ºå®š</li>
<li>å…ƒç´ å¿…é¡»æœ‰ç›¸åŒçš„ç±»å‹</li>
<li>ä¾æ¬¡çº¿æ€§æ’åˆ—</li>
</ul>
<p><strong>æˆ‘ä»¬è¿™é‡Œè¯´çš„æ•°ç»„æ˜¯ Rust çš„åŸºæœ¬ç±»å‹ï¼Œæ˜¯å›ºå®šé•¿åº¦çš„ï¼Œè¿™ç‚¹ä¸å…¶ä»–ç¼–ç¨‹è¯­è¨€ä¸åŒï¼Œå…¶å®ƒç¼–ç¨‹è¯­è¨€çš„æ•°ç»„å¾€å¾€æ˜¯å¯å˜é•¿åº¦çš„ï¼Œä¸ Rust ä¸­çš„åŠ¨æ€æ•°ç»„ <code>Vector</code> ç±»ä¼¼</strong></p>
<p><strong>åˆ›å»ºæ•°ç»„</strong></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//ä¸ºæ•°ç»„å£°æ˜ç±»å‹</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">a</span>: [<span class="type">i32</span>; <span class="number">5</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">//ç”¨;è¿›è¡Œåˆ†éš”ï¼Œå‰é¢æ˜¯å€¼ï¼Œåé¢æ˜¯å‡ºç°çš„æ¬¡æ•°</span></span><br><span class="line"><span class="keyword">let</span> <span class="variable">a</span>=[<span class="number">3</span>;<span class="number">5</span>]</span><br></pre></td></tr></table></figure>



<p><strong>è®¿é—®æ•°ç»„å…ƒç´ </strong></p>
<p>æ›´å…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œç”¨ç´¢å¼•æ¥è®¿é—®</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>,a[<span class="number">0</span>]);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è®¿é—®æ•°ç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ </p>
<p>æ³¨æ„ï¼š<strong>æ•°ç»„å…ƒç´ æ˜¯éåŸºæœ¬ç±»å‹</strong></p>
<p><strong>æ•°ç»„åˆ‡ç‰‡</strong></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">a</span>: [<span class="type">i32</span>; <span class="number">5</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">slice</span>: &amp;[<span class="type">i32</span>] = &amp;a[<span class="number">1</span>..<span class="number">3</span>];</span><br><span class="line"></span><br><span class="line"><span class="built_in">assert_eq!</span>(slice, &amp;[<span class="number">2</span>, <span class="number">3</span>]);</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„æ•°ç»„åˆ‡ç‰‡ <code>slice</code> çš„ç±»å‹æ˜¯<code>&amp;[i32]</code>ï¼Œä¸ä¹‹å¯¹æ¯”ï¼Œæ•°ç»„çš„ç±»å‹æ˜¯<code>[i32;5]</code>ï¼Œç®€å•æ€»ç»“ä¸‹åˆ‡ç‰‡çš„ç‰¹ç‚¹ï¼š</p>
<ul>
<li>åˆ‡ç‰‡çš„é•¿åº¦å¯ä»¥ä¸æ•°ç»„ä¸åŒï¼Œå¹¶ä¸æ˜¯å›ºå®šçš„ï¼Œè€Œæ˜¯å–å†³äºä½ ä½¿ç”¨æ—¶æŒ‡å®šçš„èµ·å§‹å’Œç»“æŸä½ç½®</li>
<li>åˆ›å»ºåˆ‡ç‰‡çš„ä»£ä»·éå¸¸å°ï¼Œå› ä¸ºåˆ‡ç‰‡åªæ˜¯é’ˆå¯¹åº•å±‚æ•°ç»„çš„ä¸€ä¸ªå¼•ç”¨</li>
<li>åˆ‡ç‰‡ç±»å‹ [T] æ‹¥æœ‰ä¸å›ºå®šçš„å¤§å°ï¼Œè€Œåˆ‡ç‰‡å¼•ç”¨ç±»å‹ &amp;[T] åˆ™å…·æœ‰å›ºå®šçš„å¤§å°ï¼Œå› ä¸º Rust å¾ˆå¤šæ—¶å€™éƒ½éœ€è¦å›ºå®šå¤§å°æ•°æ®ç±»å‹ï¼Œå› æ­¤ &amp;[T] æ›´æœ‰ç”¨ï¼Œ<code>&amp;str</code> å­—ç¬¦ä¸²åˆ‡ç‰‡ä¹ŸåŒç†</li>
</ul>
<h3 id="æµç¨‹æ§åˆ¶ï¼ˆè¯­å¥å­¦ä¹ ï¼‰"><a href="#æµç¨‹æ§åˆ¶ï¼ˆè¯­å¥å­¦ä¹ ï¼‰" class="headerlink" title="æµç¨‹æ§åˆ¶ï¼ˆè¯­å¥å­¦ä¹ ï¼‰"></a>æµç¨‹æ§åˆ¶ï¼ˆè¯­å¥å­¦ä¹ ï¼‰</h3><h4 id="1-ifè¯­å¥"><a href="#1-ifè¯­å¥" class="headerlink" title="1.ifè¯­å¥"></a>1.ifè¯­å¥</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> condition == <span class="literal">true</span> &#123;</span><br><span class="line">    <span class="comment">// A...</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// B...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="2-if-elseè¯­å¥"><a href="#2-if-elseè¯­å¥" class="headerlink" title="2.if-elseè¯­å¥"></a>2.if-elseè¯­å¥</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">n</span> = <span class="number">6</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> n % <span class="number">4</span> == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;number is divisible by 4&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> n % <span class="number">3</span> == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;number is divisible by 3&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> n % <span class="number">2</span> == <span class="number">0</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;number is divisible by 2&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;number is not divisible by 4, 3, or 2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="3-forå¾ªç¯"><a href="#3-forå¾ªç¯" class="headerlink" title="3.forå¾ªç¯"></a>3.forå¾ªç¯</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">1</span>..=<span class="number">5</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, i);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>1..=5</code>çš„æ„æ€æ˜¯1åˆ°5ï¼ˆåŒ…æ‹¬5ï¼‰ï¼Œ<code>1..5</code>æ„æ€æ˜¯1åˆ°5ï¼ˆä¸åŒ…æ‹¬5ï¼‰</p>
<p>æ³¨æ„ï¼Œä½¿ç”¨ <code>for</code> æ—¶æˆ‘ä»¬å¾€å¾€ä½¿ç”¨é›†åˆçš„å¼•ç”¨å½¢å¼ï¼Œé™¤éä½ ä¸æƒ³åœ¨åé¢çš„ä»£ç ä¸­ç»§ç»­ä½¿ç”¨è¯¥é›†åˆï¼ˆæ¯”å¦‚æˆ‘ä»¬è¿™é‡Œä½¿ç”¨äº† <code>container</code> çš„å¼•ç”¨ï¼‰ã€‚å¦‚æœä¸ä½¿ç”¨å¼•ç”¨çš„è¯ï¼Œæ‰€æœ‰æƒä¼šè¢«è½¬ç§»ï¼ˆmoveï¼‰åˆ° <code>for</code> è¯­å¥å—ä¸­ï¼Œåé¢å°±æ— æ³•å†ä½¿ç”¨è¿™ä¸ªé›†åˆäº†)ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="variable">item</span> <span class="keyword">in</span> &amp;container &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœæƒ³åœ¨å¾ªç¯ä¸­ï¼Œ<strong>ä¿®æ”¹è¯¥å…ƒç´ </strong>ï¼Œå¯ä»¥ä½¿ç”¨ <code>mut</code> å…³é”®å­—ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="variable">item</span> <span class="keyword">in</span> &amp;<span class="keyword">mut</span> collection &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ€»ç»“å¦‚ä¸‹ï¼š</p>
<table>
<thead>
<tr>
<th>ä½¿ç”¨æ–¹æ³•</th>
<th>ç­‰ä»·ä½¿ç”¨æ–¹å¼</th>
<th>æ‰€æœ‰æƒ</th>
</tr>
</thead>
<tbody><tr>
<td><code>for item in collection</code></td>
<td><code>for item in IntoIterator::into_iter(collection)</code></td>
<td>è½¬ç§»æ‰€æœ‰æƒ</td>
</tr>
<tr>
<td><code>for item in &amp;collection</code></td>
<td><code>for item in collection.iter()</code></td>
<td>ä¸å¯å˜å€Ÿç”¨</td>
</tr>
<tr>
<td><code>for item in &amp;mut collection</code></td>
<td><code>for item in collection.iter_mut()</code></td>
<td>å¯å˜å€Ÿç”¨</td>
</tr>
</tbody></table>
<p>å¦‚æœæƒ³åœ¨å¾ªç¯ä¸­<strong>è·å–å…ƒç´ çš„ç´¢å¼•</strong>ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span> = [<span class="number">4</span>, <span class="number">3</span>, <span class="number">2</span>, <span class="number">1</span>];</span><br><span class="line">    <span class="comment">// `.iter()` æ–¹æ³•æŠŠ `a` æ•°ç»„å˜æˆä¸€ä¸ªè¿­ä»£å™¨</span></span><br><span class="line">    <span class="keyword">for</span> (i, v) <span class="keyword">in</span> a.<span class="title function_ invoke__">iter</span>().<span class="title function_ invoke__">enumerate</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;ç¬¬&#123;&#125;ä¸ªå…ƒç´ æ˜¯&#123;&#125;&quot;</span>, i + <span class="number">1</span>, v);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>å½“ç„¶å¦‚æœæˆ‘ä»¬æƒ³ç”¨ <code>for</code> å¾ªç¯æ§åˆ¶æŸä¸ªè¿‡ç¨‹æ‰§è¡Œ 10 æ¬¡ï¼Œä½†æ˜¯åˆä¸æƒ³å•ç‹¬å£°æ˜ä¸€ä¸ªå˜é‡æ¥æ§åˆ¶è¿™ä¸ªæµç¨‹</p>
<p>æˆ‘ä»¬ç”¨_æ¥ä»£æ›¿é‚£ä¸ªå˜é‡</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="variable">_</span> <span class="keyword">in</span> <span class="number">0</span>..<span class="number">10</span> &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="4-continue"><a href="#4-continue" class="headerlink" title="4.continue"></a>4.continue</h4><p>ä½¿ç”¨continueå¯ä»¥è·³è¿‡å½“å‰å¾ªç¯ï¼Œå¼€å§‹ä¸‹ä¸€æ¬¡å¾ªç¯</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">1</span>..<span class="number">4</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">2</span> &#123;</span><br><span class="line">        <span class="keyword">continue</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, i);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="5-break"><a href="#5-break" class="headerlink" title="5.break"></a>5.break</h4><p>ä½¿ç”¨breakè·³å‡ºå½“å‰æ•´ä¸ªå¾ªç¯</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> <span class="variable">i</span> <span class="keyword">in</span> <span class="number">1</span>..<span class="number">4</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> i == <span class="number">2</span> &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="6-whileå¾ªç¯"><a href="#6-whileå¾ªç¯" class="headerlink" title="6.whileå¾ªç¯"></a>6.whileå¾ªç¯</h4><p>è·Ÿcçš„å·®ä¸å¤š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">fn main() &#123;</span><br><span class="line">    let mut n = 0;</span><br><span class="line"></span><br><span class="line">    while n &lt;= 5  &#123;</span><br><span class="line">        println!(&quot;&#123;&#125;!&quot;, n);</span><br><span class="line"></span><br><span class="line">        n = n + 1;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    println!(&quot;æˆ‘å‡ºæ¥äº†ï¼&quot;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="7-loopå¾ªç¯"><a href="#7-loopå¾ªç¯" class="headerlink" title="7.loopå¾ªç¯"></a>7.loopå¾ªç¯</h4><p>ç®€å•çš„æ— é™å¾ªç¯ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨å…¶å†…éƒ¨è®¾ç½®breakå†³å®šä½•æ—¶ç»“æŸå¾ªç¯</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">loop</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;again!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//æ— é™çš„again!,çŸ¥é“crtl+cè·³å‡ºå¾ªç¯</span></span><br></pre></td></tr></table></figure>

<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">counter</span> = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">result</span> = <span class="keyword">loop</span> &#123;</span><br><span class="line">        counter += <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> counter == <span class="number">10</span> &#123;</span><br><span class="line">            <span class="keyword">break</span> counter * <span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The result is &#123;&#125;&quot;</span>, result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæœ‰å‡ ç‚¹å€¼å¾—æ³¨æ„ï¼š</p>
<ul>
<li><strong>break å¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥å¸¦ä¸€ä¸ªè¿”å›å€¼</strong>ï¼Œæœ‰äº›ç±»ä¼¼ <code>return</code></li>
<li><strong>loop æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼</strong>ï¼Œå› æ­¤å¯ä»¥è¿”å›ä¸€ä¸ªå€¼</li>
</ul>
<h3 id="æ¨¡å¼åŒ¹é…"><a href="#æ¨¡å¼åŒ¹é…" class="headerlink" title="æ¨¡å¼åŒ¹é…"></a>æ¨¡å¼åŒ¹é…</h3><h4 id="matchå’Œif-let"><a href="#matchå’Œif-let" class="headerlink" title="matchå’Œif let"></a>matchå’Œif let</h4><h5 id="matchåŒ¹é…"><a href="#matchåŒ¹é…" class="headerlink" title="matchåŒ¹é…"></a>matchåŒ¹é…</h5><p>å…ˆçœ‹çœ‹matchçš„é€šç”¨å½¢å¼ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">match</span> target &#123;</span><br><span class="line">    æ¨¡å¼<span class="number">1</span> =&gt; è¡¨è¾¾å¼<span class="number">1</span>,</span><br><span class="line">    æ¨¡å¼<span class="number">2</span> =&gt; &#123;</span><br><span class="line">        è¯­å¥<span class="number">1</span>;</span><br><span class="line">        è¯­å¥<span class="number">2</span>;</span><br><span class="line">        è¡¨è¾¾å¼<span class="number">2</span></span><br><span class="line">    &#125;,</span><br><span class="line">    _ =&gt; è¡¨è¾¾å¼<span class="number">3</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>match</code> å…è®¸æˆ‘ä»¬å°†ä¸€ä¸ªå€¼ä¸ä¸€ç³»åˆ—çš„æ¨¡å¼ç›¸æ¯”è¾ƒï¼Œå¹¶æ ¹æ®ç›¸åŒ¹é…çš„æ¨¡å¼æ‰§è¡Œå¯¹åº”çš„ä»£ç </p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸€ä¸ªä¾‹å­</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Coin</span> &#123;</span><br><span class="line">    Penny,</span><br><span class="line">    Nickel,</span><br><span class="line">    Dime,</span><br><span class="line">    Quarter,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">value_in_cents</span>(coin: Coin) <span class="punctuation">-&gt;</span> <span class="type">u8</span> &#123;</span><br><span class="line">    <span class="keyword">match</span> coin &#123;</span><br><span class="line">        Coin::Penny =&gt;  &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;Lucky penny!&quot;</span>);</span><br><span class="line">            <span class="number">1</span></span><br><span class="line">        &#125;,</span><br><span class="line">        Coin::Nickel =&gt; <span class="number">5</span>,</span><br><span class="line">        Coin::Dime =&gt; <span class="number">10</span>,</span><br><span class="line">        Coin::Quarter =&gt; <span class="number">25</span>,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="comment">// è°ƒç”¨ value_in_cents å‡½æ•°ï¼Œä¼ å…¥ä¸€ä¸ª Coin::Penny æšä¸¾å€¼</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">penny_value</span> = <span class="title function_ invoke__">value_in_cents</span>(Coin::Penny);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of a penny is: &#123;&#125; cents&quot;</span>, penny_value);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// ä½ ä¹Ÿå¯ä»¥è°ƒç”¨å…¶ä»–ç¡¬å¸ç±»å‹çš„ value_in_cents</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">nickel_value</span> = <span class="title function_ invoke__">value_in_cents</span>(Coin::Nickel);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The value of a nickel is: &#123;&#125; cents&quot;</span>, nickel_value);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>value_in_cents</code> å‡½æ•°æ ¹æ®åŒ¹é…åˆ°çš„ç¡¬å¸ï¼Œè¿”å›å¯¹åº”çš„ç¾åˆ†æ•°å€¼ã€‚<code>match</code> åç´§è·Ÿç€çš„æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè·Ÿ <code>if</code> å¾ˆåƒï¼Œä½†æ˜¯ <code>if</code> åçš„è¡¨è¾¾å¼å¿…é¡»æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè€Œ <code>match</code> åçš„è¡¨è¾¾å¼è¿”å›å€¼å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œåªè¦èƒ½è·Ÿåé¢çš„åˆ†æ”¯ä¸­çš„æ¨¡å¼åŒ¹é…èµ·æ¥å³å¯ï¼Œè¿™é‡Œçš„ <code>coin</code> æ˜¯æšä¸¾ <code>Coin</code> ç±»å‹</p>
<p>æ¥ä¸‹æ¥æ˜¯matchçš„åˆ†æ”¯ã€‚ä¸€ä¸ªåˆ†æ”¯æœ‰ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€<strong>ä¸ªæ¨¡å¼å’Œé’ˆå¯¹è¯¥æ¨¡å¼çš„å¤„ç†ä»£ç </strong>ã€‚ç¬¬ä¸€ä¸ªåˆ†æ”¯çš„æ¨¡å¼æ˜¯ <code>Coin::Penny</code>ï¼Œå…¶åçš„ <code>=&gt;</code> è¿ç®—ç¬¦å°†æ¨¡å¼å’Œå°†è¦è¿è¡Œçš„ä»£ç åˆ†å¼€ã€‚è¿™é‡Œçš„ä»£ç å°±ä»…ä»…æ˜¯è¡¨è¾¾å¼ <code>1</code>ï¼Œä¸åŒåˆ†æ”¯ä¹‹é—´ä½¿ç”¨é€—å·åˆ†éš”ã€‚</p>
<p>å½“ <code>match</code> è¡¨è¾¾å¼æ‰§è¡Œæ—¶ï¼Œå®ƒå°†ç›®æ ‡å€¼ <code>coin</code> æŒ‰é¡ºåºä¾æ¬¡ä¸æ¯ä¸€ä¸ªåˆ†æ”¯çš„æ¨¡å¼ç›¸æ¯”è¾ƒï¼Œå¦‚æœæ¨¡å¼åŒ¹é…äº†è¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆæ¨¡å¼ä¹‹åçš„ä»£ç å°†è¢«æ‰§è¡Œã€‚å¦‚æœæ¨¡å¼å¹¶ä¸åŒ¹é…è¿™ä¸ªå€¼ï¼Œå°†ç»§ç»­æ‰§è¡Œä¸‹ä¸€ä¸ªåˆ†æ”¯ã€‚</p>
<p>æ¯ä¸ªåˆ†æ”¯ç›¸å…³è”çš„ä»£ç æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œè€Œè¡¨è¾¾å¼çš„ç»“æœå€¼å°†ä½œä¸ºæ•´ä¸ª <code>match</code> è¡¨è¾¾å¼çš„è¿”å›å€¼ã€‚å¦‚æœåˆ†æ”¯æœ‰å¤šè¡Œä»£ç ï¼Œé‚£ä¹ˆéœ€è¦ç”¨ <code>&#123;&#125;</code> åŒ…è£¹ï¼ŒåŒæ—¶æœ€åä¸€è¡Œä»£ç éœ€è¦æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚</p>
</blockquote>
<p>ç®€å•æ¥è¯´å°±æ˜¯åœ¨ä¸‹é¢mainä¸­çš„ä¼ å…¥value_in_centsçš„å€¼ï¼ŒåŒ¹é…åˆ°å•¥ï¼Œå°±è¾“å‡ºå•¥</p>
<h5 id="æ¨¡å¼ç»‘å®š"><a href="#æ¨¡å¼ç»‘å®š" class="headerlink" title="æ¨¡å¼ç»‘å®š"></a>æ¨¡å¼ç»‘å®š</h5><p>æ¨¡å¼åŒ¹é…çš„å¦å¤–ä¸€ä¸ªé‡è¦åŠŸèƒ½æ˜¯ä»æ¨¡å¼ä¸­å–å‡ºç»‘å®šçš„å€¼ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#![allow(unused)]</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">UsState</span> &#123;</span><br><span class="line">    Alabama,</span><br><span class="line">    Alaska,</span><br><span class="line">    <span class="comment">// --snip--</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Coin</span> &#123;</span><br><span class="line">    Penny,</span><br><span class="line">    Nickel,</span><br><span class="line">    Dime,</span><br><span class="line">    <span class="title function_ invoke__">Quarter</span>(UsState), <span class="comment">// 25ç¾åˆ†ç¡¬å¸</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­ <code>Coin::Quarter</code> æˆå‘˜è¿˜å­˜æ”¾äº†ä¸€ä¸ªå€¼ï¼šç¾å›½çš„æŸä¸ªå·ï¼ˆå› ä¸ºåœ¨ 1999 å¹´åˆ° 2008 å¹´é—´ï¼Œç¾å›½åœ¨ 25 ç¾åˆ†(Quarter)ç¡¬å¸çš„èƒŒåä¸º 50 ä¸ªå·å°åˆ·äº†ä¸åŒçš„æ ‡è®°ï¼Œå…¶å®ƒç¡¬å¸éƒ½æ²¡æœ‰è¿™æ ·çš„è®¾è®¡ï¼‰ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨æ¨¡å¼åŒ¹é…ä¸­ï¼Œè·å–åˆ° 25 ç¾åˆ†ç¡¬å¸ä¸Šåˆ»å°çš„å·çš„åç§°ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">value_in_cents</span>(coin: Coin) <span class="punctuation">-&gt;</span> <span class="type">u8</span> &#123;</span><br><span class="line">    <span class="keyword">match</span> coin &#123;</span><br><span class="line">        Coin::Penny =&gt; <span class="number">1</span>,</span><br><span class="line">        Coin::Nickel =&gt; <span class="number">5</span>,</span><br><span class="line">        Coin::Dime =&gt; <span class="number">10</span>,</span><br><span class="line">        Coin::<span class="title function_ invoke__">Quarter</span>(state) =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;State quarter from &#123;:?&#125;!&quot;</span>, state);</span><br><span class="line">            <span class="number">25</span></span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­ï¼Œåœ¨åŒ¹é… <code>Coin::Quarter(state)</code> æ¨¡å¼æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå†…éƒ¨å­˜å‚¨çš„å€¼ç»‘å®šåˆ°äº† <code>state</code> å˜é‡ä¸Šï¼Œå› æ­¤ <code>state</code> å˜é‡å°±æ˜¯å¯¹åº”çš„ <code>UsState</code> æšä¸¾ç±»å‹ã€‚</p>
<p>ä¾‹å¦‚æœ‰ä¸€ä¸ªå°äº†é˜¿æ‹‰æ–¯åŠ å·æ ‡è®°çš„ 25 åˆ†ç¡¬å¸ï¼š<code>Coin::Quarter(UsState::Alaska)</code>ï¼Œå®ƒåœ¨åŒ¹é…æ—¶ï¼Œ<code>state</code> å˜é‡å°†è¢«ç»‘å®š <code>UsState::Alaska</code> çš„æšä¸¾å€¼ã€‚</p>
<h5 id="ç©·å°½åŒ¹é…"><a href="#ç©·å°½åŒ¹é…" class="headerlink" title="ç©·å°½åŒ¹é…"></a>ç©·å°½åŒ¹é…</h5><p>ä¹‹å‰è¯´è¿‡matchçš„åŒ¹é…å¿…é¡»ç©·å°½æ‰€æœ‰æƒ…å†µï¼Œä¸‹é¢æ¥è·ç¦»è¯´æ˜ã€‚ä¾‹å¦‚ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">    East,</span><br><span class="line">    West,</span><br><span class="line">    North,</span><br><span class="line">    South,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">dire</span> = Direction::South;</span><br><span class="line">    <span class="keyword">match</span> dire &#123;</span><br><span class="line">        Direction::East =&gt; <span class="built_in">println!</span>(<span class="string">&quot;East&quot;</span>),</span><br><span class="line">        Direction::North | Direction::South =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;South or North&quot;</span>);</span><br><span class="line">        &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬åŒ¹é…äº†Eastï¼ŒNorthï¼ŒSouthï¼Œä½†æ²¡æœ‰åŒ¹é…Westï¼Œç¨‹åºå°±ä¼šæŠ¥ä¸€ä¸ªé”™</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">error[E0004]: non-exhaustive patterns: `West` not covered <span class="comment">// éç©·å°½åŒ¹é…ï¼Œ`West` æ²¡æœ‰è¢«è¦†ç›–</span></span><br><span class="line">  -<span class="punctuation">-&gt;</span> src/main.rs:<span class="number">10</span>:<span class="number">11</span></span><br><span class="line">   |</span><br><span class="line"><span class="number">1</span>  | / <span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line"><span class="number">2</span>  | |     East,</span><br><span class="line"><span class="number">3</span>  | |     West,</span><br><span class="line">   | |     ---- not covered</span><br><span class="line"><span class="number">4</span>  | |     North,</span><br><span class="line"><span class="number">5</span>  | |     South,</span><br><span class="line"><span class="number">6</span>  | | &#125;</span><br><span class="line">   | |_- `Direction` defined here</span><br><span class="line">...</span><br><span class="line"><span class="number">10</span> |       <span class="keyword">match</span> dire &#123;</span><br><span class="line">   |             ^^^^ pattern `West` not covered <span class="comment">// æ¨¡å¼ `West` æ²¡æœ‰è¢«è¦†ç›–</span></span><br><span class="line">   |</span><br><span class="line">   = help: ensure that all possible cases are being handled, possibly by adding wildcards or more <span class="keyword">match</span> arms</span><br><span class="line">   = note: the matched value is of <span class="keyword">type</span> `Direction`</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ‰€ä»¥æˆ‘ä»¬åœ¨å†™æ¨¡å¼åŒ¹é…æ—¶ï¼Œéœ€è¦å°†æ‰€æœ‰æšä¸¾çš„å€¼éƒ½èµ‹ä¸Šå€¼</p>
<h5 id="é€šé…ç¬¦"><a href="#é€šé…ç¬¦" class="headerlink" title="_é€šé…ç¬¦"></a>_é€šé…ç¬¦</h5><p>å½“æˆ‘ä»¬ä¸æƒ³åœ¨åŒ¹é…æ—¶åˆ—å‡ºæ‰€æœ‰å€¼çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨Rustæä¾›çš„ä¸€ä¸ªç‰¹æ®Šæ¨¡å¼ï¼Œä¾‹å¦‚ï¼Œ<code>u8</code> å¯ä»¥æ‹¥æœ‰ 0 åˆ° 255 çš„æœ‰æ•ˆçš„å€¼ï¼Œä½†æ˜¯æˆ‘ä»¬åªå…³å¿ƒ <code>1ã€3ã€5 å’Œ 7</code> è¿™å‡ ä¸ªå€¼ï¼Œä¸æƒ³åˆ—å‡ºå…¶å®ƒçš„ <code>0ã€2ã€4ã€6ã€8ã€9 ä¸€ç›´åˆ° 255</code> çš„å€¼ã€‚é‚£ä¹ˆ, æˆ‘ä»¬ä¸å¿…ä¸€ä¸ªä¸€ä¸ªåˆ—å‡ºæ‰€æœ‰å€¼, å› ä¸ºå¯ä»¥ä½¿ç”¨ç‰¹æ®Šçš„æ¨¡å¼ <code>_</code> æ›¿ä»£ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">some_u8_value</span> = <span class="number">0u8</span>;</span><br><span class="line"><span class="keyword">match</span> some_u8_value &#123;</span><br><span class="line">    <span class="number">1</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;one&quot;</span>),</span><br><span class="line">    <span class="number">3</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;three&quot;</span>),</span><br><span class="line">    <span class="number">5</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;five&quot;</span>),</span><br><span class="line">    <span class="number">7</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;seven&quot;</span>),</span><br><span class="line">    _ =&gt; (),</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>é€šå¸¸ï¼Œå°†_é˜²æ­¢å…¶ä»–åˆ†æ”¯åï¼Œ_å°†ä¼šåŒ¹é…æ‰€æœ‰é—æ¼çš„å€¼ã€‚()è¡¨ç¤ºè¿”å›å•å…ƒç±»å‹ä¸æ‰€æœ‰åˆ†æ”¯è¿”å›å€¼çš„ç±»å‹ç›¸åŒï¼Œæ‰€ä»¥å½“åŒ¹é…åˆ°_åï¼Œä»€ä¹ˆä¹Ÿä¸ä¼šå‘ç”Ÿ</p>
<p>é™¤äº†_é€šé…ç¬¦ï¼Œç”¨ä¸€ä¸ªå˜é‡æ¥æ‰¿è½½å…¶ä»–æƒ…å†µä¹Ÿæ˜¯å¯ä»¥çš„ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Direction</span> &#123;</span><br><span class="line">    East,</span><br><span class="line">    West,</span><br><span class="line">    North,</span><br><span class="line">    South,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">dire</span> = Direction::South;</span><br><span class="line">    <span class="keyword">match</span> dire &#123;</span><br><span class="line">        Direction::East =&gt; <span class="built_in">println!</span>(<span class="string">&quot;East&quot;</span>),</span><br><span class="line">        other =&gt; <span class="built_in">println!</span>(<span class="string">&quot;other direction: &#123;:?&#125;&quot;</span>, other),</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç„¶è€Œï¼Œåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å…¶å®åªå…³å¿ƒ<strong>æŸä¸€ä¸ªå€¼æ˜¯å¦å­˜åœ¨</strong>ï¼Œæ­¤æ—¶ <code>match</code> å°±æ˜¾å¾—è¿‡äºå•°å—¦ã€‚</p>
<h5 id="if-letåŒ¹é…"><a href="#if-letåŒ¹é…" class="headerlink" title="if letåŒ¹é…"></a>if letåŒ¹é…</h5><p>åœ¨ Rust ä¸­ï¼Œ<code>Some</code> æ˜¯ <code>Option</code> æšä¸¾çš„ä¸€ä¸ªå˜ä½“ã€‚<code>Option</code> æ˜¯ä¸€ä¸ªéå¸¸å¸¸ç”¨çš„æšä¸¾ç±»å‹ï¼Œå®ƒç”¨äºè¡¨ç¤ºä¸€ä¸ªå¯èƒ½å­˜åœ¨æˆ–ä¸å­˜åœ¨çš„å€¼ã€‚<code>Option</code> æœ‰ä¸¤ä¸ªå˜ä½“ï¼š</p>
<ol>
<li><code>Some(T)</code>ï¼šè¡¨ç¤ºä¸€ä¸ªåŒ…å«ç±»å‹ <code>T</code> çš„å€¼ã€‚<code>Some</code> ç”¨æ¥åŒ…è£…ä¸€ä¸ªå…·ä½“çš„å€¼ï¼Œè¡¨ç¤ºè¯¥å€¼å­˜åœ¨ã€‚</li>
<li><code>None</code>ï¼šè¡¨ç¤ºæ²¡æœ‰å€¼ï¼Œä¹Ÿå°±æ˜¯å€¼ä¸å­˜åœ¨ã€‚</li>
</ol>
<p>æœ‰æ—¶å€™ä¼šé‡åˆ°åªæœ‰ä¸€ä¸ªæ¨¡å¼çš„å€¼éœ€è¦è¢«å¤„ç†ï¼Œå…¶ä»–å€¼è¢«å¿½ç•¥çš„æƒ…å†µï¼Œå¦‚æœä½¿ç”¨matchå°±è¦å†™æˆä¸€ä¸‹æ¨¡å¼</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v</span> = <span class="title function_ invoke__">Some</span>(<span class="number">3u8</span>);</span><br><span class="line"><span class="keyword">match</span> v &#123;</span><br><span class="line">    <span class="title function_ invoke__">Some</span>(<span class="number">3</span>) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;three&quot;</span>),</span><br><span class="line">    _ =&gt; (),</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™æ ·å†™å¤ªè¿‡äºç¹å†—ï¼Œæˆ‘ä»¬ä½¿ç”¨if letçš„æ–¹å¼æ¥å®ç°</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">Some</span>(<span class="number">3</span>) = v &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;three&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="matches-å®"><a href="#matches-å®" class="headerlink" title="matches!å®"></a>matches!å®</h5><p>Rustæ ‡å‡†åº“ä¸­æä¾›äº†ä¸€ä¸ªéå¸¸å®ç”¨çš„å®ï¼šmatches!,ä»–å¯ä»¥å°†ä¸€ä¸ªè¡¨è¾¾å¼è·Ÿæ¨¡å¼è¿›è¡ŒåŒ¹é…ï¼Œç„¶åè¿”å›åŒ¹é…çš„ç»“æœ true or falseã€‚</p>
<p>ä¾‹å¦‚ï¼Œæœ‰ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œé‡Œé¢å­˜æœ‰ä»¥ä¸‹æšä¸¾</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">MyEnum</span> &#123;</span><br><span class="line">    Foo,</span><br><span class="line">    Bar</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">v</span> = <span class="built_in">vec!</span>[MyEnum::Foo,MyEnum::Bar,MyEnum::Foo];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç°åœ¨å¦‚æœæƒ³å¯¹vè¿›è¡Œè¿‡æ»¤ï¼Œåªä¿ç•™ç±»å‹æ˜¯MyEnum::Fooçš„å…ƒç´ ï¼ŒæŒ‰ç»éªŒä¸€èˆ¬æ¥è¯´æ˜¯è¿™æ ·å†™çš„</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v.iter().filter(|x| x == MyEnum::Foo);</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œå®é™…ä¸Šè¿™è¡Œä»£ç ä¼šæŠ¥é”™ï¼Œå› ä¸ºä½ æ— æ³•å°†xç›´æ¥è·Ÿä¸€ä¸ªæšä¸¾æˆå‘˜è¿›è¡Œæ¯”è¾ƒã€‚æˆ‘ä»¬ä½¿ç”¨matches!è¿›è¡Œæ¯”è¾ƒ</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">v.<span class="title function_ invoke__">iter</span>().<span class="title function_ invoke__">filter</span>(|x| matches!(x, MyEnum::Foo));</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬æ¥çœ‹çœ‹å…¶ä»–ä¾‹å­</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">foo</span> = <span class="string">&#x27;f&#x27;</span>;</span><br><span class="line"><span class="built_in">assert!</span>(matches!(foo, <span class="string">&#x27;A&#x27;</span>..=<span class="string">&#x27;Z&#x27;</span> | <span class="string">&#x27;a&#x27;</span>..=<span class="string">&#x27;z&#x27;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">bar</span> = <span class="title function_ invoke__">Some</span>(<span class="number">4</span>);</span><br><span class="line"><span class="built_in">assert!</span>(matches!(bar, <span class="title function_ invoke__">Some</span>(x) <span class="keyword">if</span> x &gt; <span class="number">2</span>));</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="å˜é‡é®è”½"><a href="#å˜é‡é®è”½" class="headerlink" title="å˜é‡é®è”½"></a>å˜é‡é®è”½</h5><p>æ— è®ºæ˜¯ <code>match</code> è¿˜æ˜¯ <code>if let</code>ï¼Œè¿™é‡Œéƒ½æ˜¯ä¸€ä¸ªæ–°çš„ä»£ç å—ï¼Œè€Œä¸”è¿™é‡Œçš„ç»‘å®šç›¸å½“äºæ–°å˜é‡ï¼Œå¦‚æœä½ ä½¿ç”¨åŒåå˜é‡ï¼Œä¼šå‘ç”Ÿå˜é‡é®è”½ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">age</span> = <span class="title function_ invoke__">Some</span>(<span class="number">30</span>);</span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;åœ¨åŒ¹é…å‰ï¼Œageæ˜¯&#123;:?&#125;&quot;</span>,age);</span><br><span class="line">   <span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">Some</span>(age) = age &#123;</span><br><span class="line">       <span class="built_in">println!</span>(<span class="string">&quot;åŒ¹é…å‡ºæ¥çš„ageæ˜¯&#123;&#125;&quot;</span>,age);</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;åœ¨åŒ¹é…åï¼Œageæ˜¯&#123;:?&#125;&quot;</span>,age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>cargo run </code>è¿è¡Œåè¾“å‡ºå¦‚ä¸‹ï¼š</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">åœ¨åŒ¹é…å‰ï¼Œageæ˜¯Some(30)</span><br><span class="line">åŒ¹é…å‡ºæ¥çš„ageæ˜¯30</span><br><span class="line">åœ¨åŒ¹é…åï¼Œageæ˜¯Some(30)</span><br></pre></td></tr></table></figure>

<p>å¯ä»¥çœ‹å‡ºåœ¨ <code>if let</code> ä¸­ï¼Œ<code>=</code> å³è¾¹ <code>Some(i32)</code> ç±»å‹çš„ <code>age</code> è¢«å·¦è¾¹ <code>i32</code> ç±»å‹çš„æ–° <code>age</code> é®è”½äº†ï¼Œè¯¥é®è”½ä¸€ç›´æŒç»­åˆ° <code>if let</code> è¯­å¥å—çš„ç»“æŸã€‚å› æ­¤ç¬¬ä¸‰ä¸ª <code>println!</code> è¾“å‡ºçš„ <code>age</code> ä¾ç„¶æ˜¯ <code>Some(i32)</code> ç±»å‹ã€‚</p>
<p>å¯¹äº <code>match</code> ç±»å‹ä¹Ÿæ˜¯å¦‚æ­¤:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">   <span class="keyword">let</span> <span class="variable">age</span> = <span class="title function_ invoke__">Some</span>(<span class="number">30</span>);</span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;åœ¨åŒ¹é…å‰ï¼Œageæ˜¯&#123;:?&#125;&quot;</span>,age);</span><br><span class="line">   <span class="keyword">match</span> age &#123;</span><br><span class="line">       <span class="title function_ invoke__">Some</span>(age) =&gt;  <span class="built_in">println!</span>(<span class="string">&quot;åŒ¹é…å‡ºæ¥çš„ageæ˜¯&#123;&#125;&quot;</span>,age),</span><br><span class="line">       _ =&gt; ()</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="built_in">println!</span>(<span class="string">&quot;åœ¨åŒ¹é…åï¼Œageæ˜¯&#123;:?&#125;&quot;</span>,age);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ**<code>match</code> ä¸­çš„å˜é‡é®è”½å…¶å®ä¸æ˜¯é‚£ä¹ˆçš„å®¹æ˜“çœ‹å‡º**ï¼Œå› æ­¤è¦å°å¿ƒï¼å…¶å®è¿™é‡Œæœ€å¥½ä¸è¦ä½¿ç”¨åŒåï¼Œé¿å…éš¾ä»¥ç†è§£</p>
<h4 id="è§£æ„Option"><a href="#è§£æ„Option" class="headerlink" title="è§£æ„Option"></a>è§£æ„Option</h4><p>å®šä¹‰ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Option</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="literal">None</span>,</span><br><span class="line">    <span class="title function_ invoke__">Some</span>(T),</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ç®€å•è§£é‡Šå°±æ˜¯ï¼Œåº”è¯¥å˜é‡è¦ä¹ˆæœ‰å€¼ï¼šSome(T),è¦ä¹ˆä¸ºç©ºï¼šNone.</p>
<p>é‚£ç°åœ¨æˆ‘ä»¬è¯¥å¦‚ä½•å»ä½¿ç”¨è¿™ä¸ªOptionæšä¸¾ç±»å‹ï¼Œæ ¹æ®ç»éªŒï¼Œå¯ä»¥é€šè¿‡matchæ¥å®ç°</p>
<blockquote>
<p>å› ä¸º <code>Option</code>ï¼Œ<code>Some</code>ï¼Œ<code>None</code> éƒ½åŒ…å«åœ¨ <code>prelude</code> ä¸­ï¼Œå› æ­¤ä½ å¯ä»¥ç›´æ¥é€šè¿‡åç§°æ¥ä½¿ç”¨å®ƒä»¬ï¼Œè€Œæ— éœ€ä»¥ <code>Option::Some</code> è¿™ç§å½¢å¼å»ä½¿ç”¨ï¼Œæ€»ä¹‹ï¼Œåƒä¸‡ä¸è¦å› ä¸ºè°ƒç”¨è·¯å¾„å˜çŸ­äº†ï¼Œå°±å¿˜è®° <code>Some</code> å’Œ <code>None</code> ä¹Ÿæ˜¯ <code>Option</code> åº•ä¸‹çš„æšä¸¾æˆå‘˜ï¼</p>
</blockquote>
<h5 id="åŒ¹é…Option"><a href="#åŒ¹é…Option" class="headerlink" title="åŒ¹é…Option&lt;T&gt;"></a>åŒ¹é…Option&lt;T&gt;</h5><p>ä½¿ç”¨<code>Option&lt;T&gt;</code>,æ˜¯ä¸ºäº†ä»Someä¸­å–å‡ºèµ·å†…éƒ¨çš„Tå€¼ä»¥åŠå¤„ç†æ²¡æœ‰å€¼çš„æƒ…å†µï¼Œä¸ºäº†æ¼”ç¤ºè¿™ä¸€ç‚¹ï¼Œä¸‹é¢ç¼–å†™ä¸€ä¸ªå‡½æ•°ï¼Œå®ƒè·å–ä¸€ä¸ª<code>Option&lt;i32&gt;</code>,å¦‚æœå…¶ä¸­å«æœ‰ä¸€ä¸ªå€¼ï¼Œå°†å…¶åŠ ä¸€ï¼›å¦‚æœå…¶ä¸­æ²¡æœ‰å€¼ï¼Œåˆ™è¿”å›<code>None</code>å€¼ï¼›</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">plus_one</span>(x: <span class="type">Option</span>&lt;<span class="type">i32</span>&gt;) <span class="punctuation">-&gt;</span> <span class="type">Option</span>&lt;<span class="type">i32</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">match</span> x &#123;</span><br><span class="line">        <span class="literal">None</span> =&gt; <span class="literal">None</span>,</span><br><span class="line">        <span class="title function_ invoke__">Some</span>(i) =&gt; <span class="title function_ invoke__">Some</span>(i + <span class="number">1</span>),</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">five</span> = <span class="title function_ invoke__">Some</span>(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">six</span> = <span class="title function_ invoke__">plus_one</span>(five);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">none</span> = <span class="title function_ invoke__">plus_one</span>(<span class="literal">None</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>plus_one</code>æ¥å—ä¸€ä¸ª<code>Option&lt;i32&gt;</code>ç±»å‹çš„å‚æ•°ï¼Œæç¤ºè¿”å›ä¸€ä¸ª<code>Option&lt;i32&gt;</code>ç±»å‹çš„å€¼ï¼ˆè¿™ç§å½¢å¼çš„å‡½æ•°åœ¨æ ‡å‡†åº“ç±»éšå¤„å¯è§ï¼‰ï¼Œåœ¨è¯¥å‡½æ•°çš„å†…éƒ¨å¤„ç†ä¸­ï¼Œå¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªNoneï¼Œåˆ™è¿”å›ä¸€ä¸ªNoneä¸”ä¸åšä»»ä½•å¤„ç†ï¼›å¦‚æœä¼ å…¥çš„æ˜¯ä¸€ä¸ªSome(i32)ï¼Œåˆ™é€šè¿‡æ¨¡å¼ç»‘å®šï¼ŒæŠŠå…¶ä¸­çš„å€¼ç»‘å®šåˆ°å˜é‡iä¸Šï¼Œç„¶åè¿”å›i+1çš„å€¼ï¼ŒåŒæ—¶ç”¨Someè¿›è¡ŒåŒ…è£¹</p>
<p>å½“ä¼ å…¥Some(5)æ—¶ï¼Œé¦–å…ˆåŒ¹é…Noneåˆ†æ”¯ï¼Œç”±äºå€¼ä¸æ»¡è¶³ï¼Œç»§ç»­åŒ¹é…ä¸‹ä¸€ä¸ªåˆ†æ”¯ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Some(i) =&gt; Some(i + 1)</span><br></pre></td></tr></table></figure>

<p>Some(5)ä¸Some(i)åŒ¹é…ä¸Šäº†ï¼Œiç»‘å®šäº†SomeåŒ…å«çš„å€¼ï¼Œå› æ­¤iåœ¨è¿™é‡Œiçš„å€¼ä¸º5ï¼Œæ¥ç€åŒ¹é…åˆ†æ”¯çš„ä»£ç è¢«æ‰§è¡Œï¼Œæœ€åå°†içš„å€¼åŠ ä¸€å¹¶è¿”å›ä¸€ä¸ªå«æœ‰å€¼6çš„æ–°Someã€‚</p>
<p>å½“ä¼ å…¥Noneæ—¶ï¼Œç›´æ¥å°±åŒ¹é…åˆ°äº†matchçš„ç¬¬ä¸€ä¸ªåˆ†æ”¯ï¼Œåç»­åˆ†æ”¯å°†ä¸å†åŒ¹é…</p>
<h4 id="æ¨¡å¼åŒ¹é…é€‚ç”¨åœºæ™¯"><a href="#æ¨¡å¼åŒ¹é…é€‚ç”¨åœºæ™¯" class="headerlink" title="æ¨¡å¼åŒ¹é…é€‚ç”¨åœºæ™¯"></a>æ¨¡å¼åŒ¹é…é€‚ç”¨åœºæ™¯</h4><h5 id="matchåˆ†æ”¯"><a href="#matchåˆ†æ”¯" class="headerlink" title="matchåˆ†æ”¯"></a>matchåˆ†æ”¯</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">match</span> VALUE &#123;</span><br><span class="line">    PATTERN =&gt; EXPRESSION,</span><br><span class="line">    PATTERN =&gt; EXPRESSION,</span><br><span class="line">    PATTERN =&gt; EXPRESSION,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šæ‰€ç¤ºï¼Œmatchçš„æ¯ä¸€ä¸ªåˆ†æ”¯å°±æ˜¯ä¸€ä¸ªæ¨¡å¼ï¼Œå› ä¸ºmatchæ˜¯æ— ç©·å°½ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ä¸€ä¸ª<code>_</code>é€šé…ç¬¦æ¥åŒ¹é…å‰©ä½™æ‰€æœ‰æƒ…å†µï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">match</span> VALUE &#123;</span><br><span class="line">    PATTERN =&gt; EXPRESSION,</span><br><span class="line">    PATTERN =&gt; EXPRESSION,</span><br><span class="line">    _ =&gt; EXPRESSION,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="if-letåˆ†æ”¯"><a href="#if-letåˆ†æ”¯" class="headerlink" title="if letåˆ†æ”¯"></a>if letåˆ†æ”¯</h5><p>if let åˆ†æ”¯å¾€å¾€ç”¨äºåŒ¹é…ä¸€ä¸ªæ¨¡å¼ï¼Œè€Œå¿½ç•¥å‰©ä¸‹æ‰€æœ‰æ¨¡å¼çš„åœºæ™¯ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">PATTERN</span> = SOME_VALUE &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="while-letæ¡ä»¶å¾ªç¯"><a href="#while-letæ¡ä»¶å¾ªç¯" class="headerlink" title="while letæ¡ä»¶å¾ªç¯"></a>while letæ¡ä»¶å¾ªç¯</h5><p>å®ƒåªå…è®¸æ¡ä»¶æ»¡è¶³ï¼Œæ¨¡å¼åŒ¹é…å°±èƒ½ä¸€ç›´è¿›è¡Œwhileå¾ªç¯ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#![allow(unused)]</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line"><span class="comment">// Vecæ˜¯åŠ¨æ€æ•°ç»„</span></span><br><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">stack</span> = <span class="type">Vec</span>::<span class="title function_ invoke__">new</span>();</span><br><span class="line"></span><br><span class="line"><span class="comment">// å‘æ•°ç»„å°¾éƒ¨æ’å…¥å…ƒç´ </span></span><br><span class="line">stack.<span class="title function_ invoke__">push</span>(<span class="number">1</span>);</span><br><span class="line">stack.<span class="title function_ invoke__">push</span>(<span class="number">2</span>);</span><br><span class="line">stack.<span class="title function_ invoke__">push</span>(<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// stack.popä»æ•°ç»„å°¾éƒ¨å¼¹å‡ºå…ƒç´ </span></span><br><span class="line"><span class="keyword">while</span> <span class="keyword">let</span> <span class="variable">Some</span>(top) = stack.<span class="title function_ invoke__">pop</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, top);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="forå¾ªç¯"><a href="#forå¾ªç¯" class="headerlink" title="forå¾ªç¯"></a>forå¾ªç¯</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">v</span> = <span class="built_in">vec!</span>[<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (index, value) <span class="keyword">in</span> v.<span class="title function_ invoke__">iter</span>().<span class="title function_ invoke__">enumerate</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125; is at index &#123;&#125;&quot;</span>, value, index);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä½¿ç”¨enumerateæ–¹æ³•ç”Ÿæˆäº†ä¸€ä¸ªè¿­ä»£å™¨ï¼Œè¯¥è¿­ä»£å™¨æ¯æ¬¡è¿­ä»£éƒ½ä¼šè¿”å›ä¸€ä¸ªï¼ˆç´¢å¼•ï¼Œå€¼ï¼‰å½¢å¼çš„å…ƒç»„ï¼Œç„¶åç”¨ï¼ˆindexï¼Œvalueï¼‰æ¥åŒ¹é…</p>
<h5 id="letè¯­å¥"><a href="#letè¯­å¥" class="headerlink" title="letè¯­å¥"></a>letè¯­å¥</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">PATTERN</span> = EXPRESSION;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¯¥è¯­å¥ä¹Ÿæ˜¯ä¸€ç§æ¨¡å¼åŒ¹é…</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br></pre></td></tr></table></figure>

<p>è¿™å…¶ä¸­ï¼Œxæ˜¯ä¸€ç§æ¨¡å¼ç»‘å®šï¼Œä»£è¡¨å°†<strong>åŒ¹é…çš„å€¼ç»‘å®šåˆ°å˜é‡</strong>ä¸Šï¼Œå› æ­¤ï¼Œåœ¨Rustä¸­ï¼Œå˜é‡åä¹Ÿæ˜¯ä¸€ç§æ¨¡å¼ï¼Œåªä¸è¿‡å®ƒæ¯”è¾ƒæœ´ç´ å¾ˆä¸èµ·çœ¼ç½¢äº†</p>
<h5 id="å‡½æ•°å‚æ•°"><a href="#å‡½æ•°å‚æ•°" class="headerlink" title="å‡½æ•°å‚æ•°"></a>å‡½æ•°å‚æ•°</h5><p>å‡½æ•°å‚æ•°ä¹Ÿæ˜¯æ¨¡å¼ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">foo</span>(x: <span class="type">i32</span>) &#123;</span><br><span class="line">    <span class="comment">// ä»£ç </span></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å…¶ä¸­xå°±æ˜¯ä¸€ä¸ªæ¨¡å¼ï¼Œä½ è¿˜å¯ä»¥åœ¨å‚æ•°ä¸­åŒ¹é…å…ƒç»„ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">print_coordinates</span>(&amp;(x, y): &amp;(<span class="type">i32</span>, <span class="type">i32</span>)) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Current location: (&#123;&#125;, &#123;&#125;)&quot;</span>, x, y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">point</span> = (<span class="number">3</span>, <span class="number">5</span>);</span><br><span class="line">    <span class="title function_ invoke__">print_coordinates</span>(&amp;point);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>&amp;(3,5)ä¼šåŒ¹é…æ¨¡å¼&amp;(x,y)ï¼Œå› æ­¤xå¾—åˆ°äº†3ï¼Œyå¾—åˆ°äº†5</p>
<h5 id="letå’Œif-let"><a href="#letå’Œif-let" class="headerlink" title="letå’Œif let"></a>letå’Œif let</h5><p>å¯¹äºä»¥ä¸‹ä»£ç ï¼Œç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">Some</span>(x) = some_option_value;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å› ä¸ºå³è¾¹çš„å€¼å¯èƒ½ä¸ä¸º<code>Some</code>ï¼Œè€Œæ˜¯<code>None</code>ï¼Œè¿™ç§æ—¶å€™å°±ä¸èƒ½è¿›è¡ŒåŒ¹é…ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢çš„ä»£ç é—æ¼<code>None</code>çš„åŒ¹é…</p>
<p>ç±»ä¼¼<code>letï¼Œforå’Œmatch</code>éƒ½å¿…é¡»è¦æ±‚å®Œå…¨è¦†ç›–åŒ¹é…ï¼Œæ‰èƒ½é€šè¿‡ç¼–è¯‘(ä¸å¯é©³æ¨¡å¼åŒ¹é…)</p>
<p>ä½†æ˜¯å¯¹äºif letï¼Œå°±å¯ä»¥è¿™æ ·ä½¿ç”¨:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">Some</span>(x) = some_option_value&#123;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>,x);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºif letå…è®¸åŒ¹é…ä¸€ç§æ¨¡å¼ï¼Œè€Œå¿½ç•¥åŒºåŸŸçš„æ¨¡å¼(å¯é©³æ¨¡å¼åŒ¹é…)ã€‚</p>
<h5 id="let-else-Rust-1-65-æ–°å¢"><a href="#let-else-Rust-1-65-æ–°å¢" class="headerlink" title="let-else(Rust 1.65 æ–°å¢)"></a>let-else(Rust 1.65 æ–°å¢)</h5><p>ä½¿ç”¨ <code>let-else</code> åŒ¹é…ï¼Œå³å¯ä½¿ <code>let</code> å˜ä¸ºå¯é©³æ¨¡å¼ã€‚å®ƒå¯ä»¥ä½¿ç”¨ <code>else</code> åˆ†æ”¯æ¥å¤„ç†æ¨¡å¼ä¸åŒ¹é…çš„æƒ…å†µï¼Œä½†æ˜¯ <code>else</code> åˆ†æ”¯ä¸­å¿…é¡»ç”¨å‘æ•£çš„ä»£ç å—å¤„ç†ï¼ˆä¾‹å¦‚ï¼š<code>break</code>ã€<code>return</code>ã€<code>panic</code>ï¼‰</p>
<h4 id="å…¨æ¨¡å¼åˆ—è¡¨ï¼ˆæ€»ç»“ï¼‰"><a href="#å…¨æ¨¡å¼åˆ—è¡¨ï¼ˆæ€»ç»“ï¼‰" class="headerlink" title="å…¨æ¨¡å¼åˆ—è¡¨ï¼ˆæ€»ç»“ï¼‰"></a>å…¨æ¨¡å¼åˆ—è¡¨ï¼ˆæ€»ç»“ï¼‰</h4><p>ç”±äºä¸åŒç±»å‹çš„æ¨¡å¼åŒ¹é…çš„ä¾‹å­æ¯”è¾ƒå¤šï¼Œä¸ºäº†æ–¹ä¾¿æŸ¥è¯¢ï¼Œæ€»ç»“ä¸€ä¸‹</p>
<h5 id="åŒ¹é…å­—é¢å€¼"><a href="#åŒ¹é…å­—é¢å€¼" class="headerlink" title="åŒ¹é…å­—é¢å€¼"></a>åŒ¹é…å­—é¢å€¼</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> x &#123;</span><br><span class="line">    <span class="number">1</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;one&quot;</span>),</span><br><span class="line">    <span class="number">2</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;two&quot;</span>),</span><br><span class="line">    <span class="number">3</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;three&quot;</span>),</span><br><span class="line">    _ =&gt; <span class="built_in">println!</span>(<span class="string">&quot;anything&quot;</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="åŒ¹é…å‘½åå˜é‡"><a href="#åŒ¹é…å‘½åå˜é‡" class="headerlink" title="åŒ¹é…å‘½åå˜é‡"></a>åŒ¹é…å‘½åå˜é‡</h5><p>åœ¨matchä¸­å­˜åœ¨å˜é‡é®è”½é—®é¢˜ï¼Œè¿™ä¸ªåœ¨<strong>åŒ¹é…å‘½åå˜é‡</strong>æ—¶ä¼šé‡åˆ°</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="title function_ invoke__">Some</span>(<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">y</span> = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">match</span> x &#123;</span><br><span class="line">        <span class="title function_ invoke__">Some</span>(<span class="number">50</span>) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Got 50&quot;</span>),</span><br><span class="line">        <span class="title function_ invoke__">Some</span>(y) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Matched, y = &#123;:?&#125;&quot;</span>, y),</span><br><span class="line">        _ =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Default case, x = &#123;:?&#125;&quot;</span>, x),</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;at the end: x = &#123;:?&#125;, y = &#123;:?&#125;&quot;</span>, x, y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“matchè¿è¡Œæ—¶ï¼Œç¬¬ä¸€ä¸ªåŒ¹é…åˆ†æ”¯çš„æ¨¡å¼å¹¶ä¸åŒ¹é…xä¸­å®šä¹‰çš„å€¼ï¼Œæ‰€ä»¥ä»£ç ç»§ç»­æ‰§è¡Œ</p>
<p>ç¬¬äºŒä¸ªåŒ¹é…åˆ†æ”¯ä¸­çš„æ¨¡å¼å¼•å…¥äº†ä¸€ä¸ªæ–°çš„å˜é‡yï¼Œä»–ä¼šåŒ¹é…someçš„ä»»ä½•å€¼ï¼Œç”±äºè¿™é‡Œçš„yåœ¨matchè¡¨è¾¾å¼çš„ä½œç”¨åŸŸæ€»ï¼Œæ‰€ä»¥è¿™æ˜¯ä¸€ä¸ªæ–°å˜é‡ï¼Œè€Œä¸æ˜¯å¼€å¤´å£°æ˜çš„y</p>
<p>å¦‚æœ <code>x</code> çš„å€¼æ˜¯ <code>None</code> è€Œä¸æ˜¯ <code>Some(5)</code>ï¼Œå¤´ä¸¤ä¸ªåˆ†æ”¯çš„æ¨¡å¼ä¸ä¼šåŒ¹é…ï¼Œæ‰€ä»¥ä¼šåŒ¹é…æ¨¡å¼ <code>_</code>ã€‚è¿™ä¸ªåˆ†æ”¯çš„æ¨¡å¼ä¸­æ²¡æœ‰å¼•å…¥å˜é‡ <code>x</code>ï¼Œæ‰€ä»¥æ­¤æ—¶è¡¨è¾¾å¼ä¸­çš„ <code>x</code> ä¼šæ˜¯å¤–éƒ¨æ²¡æœ‰è¢«é®è”½çš„ <code>x</code>ï¼Œä¹Ÿå°±æ˜¯ <code>None</code>ã€‚</p>
<p>å¦‚æœä½ ä¸æƒ³å¼•å…¥å˜é‡é®è”½ï¼Œå¯ä»¥ä½¿ç”¨å¦ä¸€ä¸ªå˜é‡åè€Œé <code>y</code>ï¼Œæˆ–è€…ä½¿ç”¨åŒ¹é…å®ˆå«(match guard)çš„æ–¹å¼ï¼Œç¨ååœ¨<a target="_blank" rel="noopener" href="https://course.rs/basic/match-pattern/all-patterns.html#%E5%8C%B9%E9%85%8D%E5%AE%88%E5%8D%AB%E6%8F%90%E4%BE%9B%E7%9A%84%E9%A2%9D%E5%A4%96%E6%9D%A1%E4%BB%B6">åŒ¹é…å®ˆå«æä¾›çš„é¢å¤–æ¡ä»¶</a>ä¸­ä¼šè®²è§£ã€‚</p>
<h5 id="å•æ”¯å¤šæ¨¡å¼"><a href="#å•æ”¯å¤šæ¨¡å¼" class="headerlink" title="å•æ”¯å¤šæ¨¡å¼"></a>å•æ”¯å¤šæ¨¡å¼</h5><p>åœ¨matchè¡¨è¾¾å¼ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>|</code>è¯­æ³•åŒ¹é…å¤šä¸ªæ¨¡å¼</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> x &#123;</span><br><span class="line">    <span class="number">1</span> | <span class="number">2</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;one or two&quot;</span>),</span><br><span class="line">    <span class="number">3</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;three&quot;</span>),</span><br><span class="line">    _ =&gt; <span class="built_in">println!</span>(<span class="string">&quot;anything&quot;</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç ä¼šæ‰“å°one or two</p>
<h5 id="é€šè¿‡-åŒ¹é…å€¼çš„èŒƒå›´"><a href="#é€šè¿‡-åŒ¹é…å€¼çš„èŒƒå›´" class="headerlink" title="é€šè¿‡..&#x3D;åŒ¹é…å€¼çš„èŒƒå›´"></a>é€šè¿‡..&#x3D;åŒ¹é…å€¼çš„èŒƒå›´</h5><p>åœ¨<a target="_blank" rel="noopener" href="https://course.rs/basic/base-type/numbers.html#%E5%BA%8F%E5%88%97range">æ•°å€¼ç±»å‹</a>ä¸­æˆ‘ä»¬æœ‰è®²åˆ°ä¸€ä¸ªåºåˆ—è¯­æ³•ï¼Œè¯¥è¯­æ³•ä¸ä»…å¯ä»¥ç”¨äºå¾ªç¯ä¸­ï¼Œè¿˜èƒ½ç”¨äºåŒ¹é…æ¨¡å¼</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">x</span> = <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> x &#123;</span><br><span class="line">    <span class="number">1</span>..=<span class="number">5</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;one through five&quot;</span>),</span><br><span class="line">    _ =&gt; <span class="built_in">println!</span>(<span class="string">&quot;something else&quot;</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å¦‚æœxçš„å€¼æ˜¯1,2,3,4,5å°±ä¼šåŒ¹é…åˆ°1..&#x3D;5</p>
<h5 id="è§£æ„å¹¶åˆ†è§£å€¼"><a href="#è§£æ„å¹¶åˆ†è§£å€¼" class="headerlink" title="è§£æ„å¹¶åˆ†è§£å€¼"></a>è§£æ„å¹¶åˆ†è§£å€¼</h5><p>ä¹Ÿå¯ä»¥ä½¿ç”¨æ¨¡å¼æ¥è§£æ„ç»“æ„ä½“ã€æšä¸¾ã€å…ƒç»„ã€æ•°ç»„å’Œå¼•ç”¨</p>
<h6 id="è§£æ„ç»“æ„ä½“"><a href="#è§£æ„ç»“æ„ä½“" class="headerlink" title="è§£æ„ç»“æ„ä½“"></a>è§£æ„ç»“æ„ä½“</h6><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    x: <span class="type">i32</span>,</span><br><span class="line">    y: <span class="type">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">p</span> = Point &#123; x: <span class="number">0</span>, y: <span class="number">7</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">Point</span> &#123; x: a, y: b &#125; = p;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(<span class="number">0</span>, a);</span><br><span class="line">    <span class="built_in">assert_eq!</span>(<span class="number">7</span>, b);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç åˆ›å»ºäº†å˜é‡aï¼Œbæ¥åŒ¹é…ç»“æ„ä½“pä¸­çš„xå’Œy</p>
<p>å­—æ®µï¼Œè¿™ä¸ªä¾‹å­å±•ç¤ºäº†<strong>æ¨¡å¼ä¸­çš„å˜é‡åä¸å¿…ä¸ç»“æ„ä½“ä¸­çš„å­—æ®µåä¸€è‡´</strong>ã€‚ä¸è¿‡é€šå¸¸å¸Œæœ›å˜é‡åä¸å­—æ®µåä¸€è‡´ä»¥ä¾¿äºç†è§£å˜é‡æ¥è‡ªäºå“ªäº›å­—æ®µã€‚</p>
<h6 id="è§£æ„æšä¸¾"><a href="#è§£æ„æšä¸¾" class="headerlink" title="è§£æ„æšä¸¾"></a>è§£æ„æšä¸¾</h6><p>â€‹       ä¸‹é¢ä»£ç ä»¥ <code>Message</code> æšä¸¾ä¸ºä¾‹ï¼Œç¼–å†™ä¸€ä¸ª <code>match</code> ä½¿ç”¨æ¨¡å¼è§£æ„æ¯ä¸€ä¸ªå†…éƒ¨å€¼ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Message</span> &#123;</span><br><span class="line">    Quit,</span><br><span class="line">    Move &#123; x: <span class="type">i32</span>, y: <span class="type">i32</span> &#125;,</span><br><span class="line">    <span class="title function_ invoke__">Write</span>(<span class="type">String</span>),</span><br><span class="line">    <span class="title function_ invoke__">ChangeColor</span>(<span class="type">i32</span>, <span class="type">i32</span>, <span class="type">i32</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">msg</span> = Message::<span class="title function_ invoke__">ChangeColor</span>(<span class="number">0</span>, <span class="number">160</span>, <span class="number">255</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">match</span> msg &#123;</span><br><span class="line">        Message::Quit =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;The Quit variant has no data to destructure.&quot;</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        Message::Move &#123; x, y &#125; =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(</span><br><span class="line">                <span class="string">&quot;Move in the x direction &#123;&#125; and in the y direction &#123;&#125;&quot;</span>,</span><br><span class="line">                x,</span><br><span class="line">                y</span><br><span class="line">            );</span><br><span class="line">        &#125;</span><br><span class="line">        Message::<span class="title function_ invoke__">Write</span>(text) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;Text message: &#123;&#125;&quot;</span>, text),</span><br><span class="line">        Message::<span class="title function_ invoke__">ChangeColor</span>(r, g, b) =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(</span><br><span class="line">                <span class="string">&quot;Change the color to red &#123;&#125;, green &#123;&#125;, and blue &#123;&#125;&quot;</span>,</span><br><span class="line">                r,</span><br><span class="line">                g,</span><br><span class="line">                b</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œè€ç”Ÿå¸¸è°ˆä¸€å¥è¯ï¼Œæ¨¡å¼åŒ¹é…ä¸€æ ·è¦ç±»å‹ç›¸åŒï¼Œå› æ­¤åŒ¹é… <code>Message::Move&#123;1,2&#125;</code> è¿™æ ·çš„æšä¸¾å€¼ï¼Œå°±å¿…é¡»è¦ç”¨ <code>Message::Move&#123;x,y&#125;</code> è¿™æ ·çš„åŒç±»å‹æ¨¡å¼æ‰è¡Œã€‚è¿™æ®µä»£ç ä¼šæ‰“å°å‡º <code>Change the color to red 0, green 160, and blue 255</code>ã€‚å°è¯•æ”¹å˜ <code>msg</code> çš„å€¼æ¥è§‚å¯Ÿå…¶ä»–åˆ†æ”¯ä»£ç çš„è¿è¡Œã€‚         </p>
<h6 id="è§£æ„åµŒå¥—çš„ç»“æ„ä½“å’Œæšä¸¾"><a href="#è§£æ„åµŒå¥—çš„ç»“æ„ä½“å’Œæšä¸¾" class="headerlink" title="è§£æ„åµŒå¥—çš„ç»“æ„ä½“å’Œæšä¸¾"></a>è§£æ„åµŒå¥—çš„ç»“æ„ä½“å’Œæšä¸¾</h6><p>ç›®å‰ä¸ºæ­¢ï¼Œæ‰€æœ‰çš„ä¾‹å­éƒ½åªåŒ¹é…äº†æ·±åº¦ä¸ºä¸€çº§çš„ç»“æ„ä½“æˆ–æšä¸¾ã€‚ <code>match</code> ä¹Ÿå¯ä»¥åŒ¹é…åµŒå¥—çš„é¡¹ï¼</p>
<p>ä¾‹å¦‚ä½¿ç”¨ä¸‹é¢çš„ä»£ç æ¥åŒæ—¶æ”¯æŒ RGB å’Œ HSV è‰²å½©æ¨¡å¼ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Color</span> &#123;</span><br><span class="line">   <span class="title function_ invoke__">Rgb</span>(<span class="type">i32</span>, <span class="type">i32</span>, <span class="type">i32</span>),</span><br><span class="line">   <span class="title function_ invoke__">Hsv</span>(<span class="type">i32</span>, <span class="type">i32</span>, <span class="type">i32</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Message</span> &#123;</span><br><span class="line">    Quit,</span><br><span class="line">    Move &#123; x: <span class="type">i32</span>, y: <span class="type">i32</span> &#125;,</span><br><span class="line">    <span class="title function_ invoke__">Write</span>(<span class="type">String</span>),</span><br><span class="line">    <span class="title function_ invoke__">ChangeColor</span>(Color),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">msg</span> = Message::<span class="title function_ invoke__">ChangeColor</span>(Color::<span class="title function_ invoke__">Hsv</span>(<span class="number">0</span>, <span class="number">160</span>, <span class="number">255</span>));</span><br><span class="line"></span><br><span class="line">    <span class="keyword">match</span> msg &#123;</span><br><span class="line">        Message::<span class="title function_ invoke__">ChangeColor</span>(Color::<span class="title function_ invoke__">Rgb</span>(r, g, b)) =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(</span><br><span class="line">                <span class="string">&quot;Change the color to red &#123;&#125;, green &#123;&#125;, and blue &#123;&#125;&quot;</span>,</span><br><span class="line">                r,</span><br><span class="line">                g,</span><br><span class="line">                b</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">        Message::<span class="title function_ invoke__">ChangeColor</span>(Color::<span class="title function_ invoke__">Hsv</span>(h, s, v)) =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(</span><br><span class="line">                <span class="string">&quot;Change the color to hue &#123;&#125;, saturation &#123;&#125;, and value &#123;&#125;&quot;</span>,</span><br><span class="line">                h,</span><br><span class="line">                s,</span><br><span class="line">                v</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">        _ =&gt; ()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>match</code> ç¬¬ä¸€ä¸ªåˆ†æ”¯çš„æ¨¡å¼åŒ¹é…ä¸€ä¸ª <code>Message::ChangeColor</code> æšä¸¾æˆå‘˜ï¼Œè¯¥æšä¸¾æˆå‘˜åˆåŒ…å«äº†ä¸€ä¸ª <code>Color::Rgb</code> çš„æšä¸¾æˆå‘˜ï¼Œæœ€ç»ˆç»‘å®šäº† 3 ä¸ªå†…éƒ¨çš„ <code>i32</code> å€¼                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              </p>
<h6 id="è§£æ„ç»“æ„ä½“å’Œå…ƒç»„"><a href="#è§£æ„ç»“æ„ä½“å’Œå…ƒç»„" class="headerlink" title="è§£æ„ç»“æ„ä½“å’Œå…ƒç»„"></a>è§£æ„ç»“æ„ä½“å’Œå…ƒç»„</h6><p>æˆ‘ä»¬å¯ä»¥ç”¨å¤æ‚çš„æ–¹å¼æ¥æ··åˆã€åŒ¹é…å’ŒåµŒå¥—è§£æ„æ¨¡å¼ã€‚å¦‚ä¸‹æ˜¯ä¸€ä¸ªå¤æ‚ç»“æ„ä½“çš„ä¾‹å­ï¼Œå…¶ä¸­ç»“æ„ä½“å’Œå…ƒç»„åµŒå¥—åœ¨å…ƒç»„ä¸­ï¼Œå¹¶å°†æ‰€æœ‰çš„åŸå§‹ç±»å‹è§£æ„å‡ºæ¥</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">     x: <span class="type">i32</span>,</span><br><span class="line">     y: <span class="type">i32</span>,</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ((feet, inches), Point &#123;x, y&#125;) = ((<span class="number">3</span>, <span class="number">10</span>), Point &#123; x: <span class="number">3</span>, y: -<span class="number">10</span> &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h6 id="è§£æ„æ•°ç»„"><a href="#è§£æ„æ•°ç»„" class="headerlink" title="è§£æ„æ•°ç»„"></a>è§£æ„æ•°ç»„</h6><p>å¯¹äºæ•°ç»„ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨ç±»ä¼¼å…ƒç»„çš„æ–¹å¼è¿›è¡Œè§£æ„ï¼Œåˆ†ä¸ºä¸¤ç§æƒ…å†µ</p>
<p>å®šé•¿æ•°ç»„:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">arr</span>: [<span class="type">u16</span>; <span class="number">2</span>] = [<span class="number">114</span>, <span class="number">514</span>];</span><br><span class="line"><span class="keyword">let</span> [x, y] = arr;</span><br><span class="line"></span><br><span class="line"><span class="built_in">assert_eq!</span>(x, <span class="number">114</span>);</span><br><span class="line"><span class="built_in">assert_eq!</span>(y, <span class="number">514</span>);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>ä¸å®šé•¿æ•°ç»„</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">arr</span>: &amp;[<span class="type">u16</span>] = &amp;[<span class="number">114</span>, <span class="number">514</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> [x, ..] = arr &#123;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(x, &amp;<span class="number">114</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> &amp;[.., y] = arr &#123;</span><br><span class="line">    <span class="built_in">assert_eq!</span>(y, <span class="number">514</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">arr</span>: &amp;[<span class="type">u16</span>] = &amp;[];</span><br><span class="line"></span><br><span class="line"><span class="built_in">assert!</span>(matches!(arr, [..]));</span><br><span class="line"><span class="built_in">assert!</span>(!matches!(arr, [x, ..]));</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="å¿½ç•¥æ¨¡å¼ä¸­çš„å€¼"><a href="#å¿½ç•¥æ¨¡å¼ä¸­çš„å€¼" class="headerlink" title="å¿½ç•¥æ¨¡å¼ä¸­çš„å€¼"></a>å¿½ç•¥æ¨¡å¼ä¸­çš„å€¼</h5><p>åˆæ˜¯å¿½ç•¥æ¨¡å¼çš„ä¸€äº›å€¼ä¹Ÿæ˜¯å¾ˆæœ‰ç”¨çš„ï¼Œæ¯”å¦‚åœ¨matchä¸­çš„æœ€åä¸€ä¸ªåˆ†æ”¯ä½¿ç”¨_æ¨¡å¼åŒ¹é…æ‰€æœ‰å‰©ä½™çš„å€¼ã€‚ä¹Ÿå¯ä»¥åœ¨å¦ä¸€ä¸ªæ¨¡å¼ä¸­ä½¿ç”¨_æ¨¡å¼ï¼Œä½¿ç”¨ä¸€ä¸ªäº¿ä¸‹åˆ’çº¿å¼€å§‹çš„åç§°ï¼Œæˆ–è€…ä½¿ç”¨..å¿½ç•¥æ‰€å‰©éƒ¨åˆ†çš„å€¼</p>
<h6 id="ä½¿ç”¨-å¿½ç•¥æ•´ä¸ªå€¼"><a href="#ä½¿ç”¨-å¿½ç•¥æ•´ä¸ªå€¼" class="headerlink" title="ä½¿ç”¨_å¿½ç•¥æ•´ä¸ªå€¼"></a>ä½¿ç”¨_å¿½ç•¥æ•´ä¸ªå€¼</h6><p>è™½ç„¶ <code>_</code> æ¨¡å¼ä½œä¸º <code>match</code> è¡¨è¾¾å¼æœ€åçš„åˆ†æ”¯ç‰¹åˆ«æœ‰ç”¨ï¼Œä½†æ˜¯å®ƒçš„ä½œç”¨è¿˜ä¸é™äºæ­¤ã€‚ä¾‹å¦‚å¯ä»¥å°†å…¶ç”¨äºå‡½æ•°å‚æ•°ä¸­ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">foo</span>(_: <span class="type">i32</span>, y: <span class="type">i32</span>) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;This code only uses the y parameter: &#123;&#125;&quot;</span>, y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="title function_ invoke__">foo</span>(<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç ä¼šå®Œå…¨å¿½ç•¥ä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ä¼ é€’çš„å€¼ <code>3</code>ï¼Œå¹¶ä¼šæ‰“å°å‡º <code>This code only uses the y parameter: 4</code>ã€‚</p>
<p>å¤§éƒ¨åˆ†æƒ…å†µå½“ä½ ä¸å†éœ€è¦ç‰¹å®šå‡½æ•°å‚æ•°æ—¶ï¼Œæœ€å¥½ä¿®æ”¹ç­¾åä¸å†åŒ…å«æ— ç”¨çš„å‚æ•°ã€‚åœ¨ä¸€äº›æƒ…å†µä¸‹å¿½ç•¥å‡½æ•°å‚æ•°ä¼šå˜å¾—ç‰¹åˆ«æœ‰ç”¨ï¼Œæ¯”å¦‚å®ç°ç‰¹å¾æ—¶ï¼Œå½“ä½ éœ€è¦ç‰¹å®šç±»å‹ç­¾åä½†æ˜¯å‡½æ•°å®ç°å¹¶ä¸éœ€è¦æŸä¸ªå‚æ•°æ—¶ã€‚æ­¤æ—¶ç¼–è¯‘å™¨å°±<strong>ä¸ä¼šè­¦å‘Šè¯´å­˜åœ¨æœªä½¿ç”¨çš„å‡½æ•°å‚æ•°</strong>ï¼Œå°±è·Ÿä½¿ç”¨å‘½åå‚æ•°ä¸€æ ·ã€‚</p>
<h6 id="ä½¿ç”¨åµŒå¥—çš„-å¿½ç•¥éƒ¨åˆ†å€¼"><a href="#ä½¿ç”¨åµŒå¥—çš„-å¿½ç•¥éƒ¨åˆ†å€¼" class="headerlink" title="ä½¿ç”¨åµŒå¥—çš„_å¿½ç•¥éƒ¨åˆ†å€¼"></a>ä½¿ç”¨åµŒå¥—çš„_å¿½ç•¥éƒ¨åˆ†å€¼</h6><p>å¯ä»¥åœ¨ä¸€ä¸ªæ¨¡å¼å†…éƒ¨ä½¿ç”¨_å¿½ç•¥éƒ¨åˆ†å€¼</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="keyword">mut </span><span class="variable">setting_value</span> = <span class="title function_ invoke__">Some</span>(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">new_setting_value</span> = <span class="title function_ invoke__">Some</span>(<span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> (setting_value, new_setting_value) &#123;</span><br><span class="line">    (<span class="title function_ invoke__">Some</span>(_), <span class="title function_ invoke__">Some</span>(_)) =&gt; &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Can&#x27;t overwrite an existing customized value&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    _ =&gt; &#123;</span><br><span class="line">        setting_value = new_setting_value;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;setting is &#123;:?&#125;&quot;</span>, setting_value);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç ä¼šæ‰“å°å‡º <code>Can&#39;t overwrite an existing customized value</code> æ¥ç€æ˜¯ <code>setting is Some(5)</code>ã€‚</p>
<p>ç¬¬ä¸€ä¸ªåŒ¹é…åˆ†æ”¯ï¼Œæˆ‘ä»¬ä¸å…³å¿ƒé‡Œé¢çš„å€¼ï¼Œåªå…³å¿ƒå…ƒç»„ä¸­ä¸¤ä¸ªå…ƒç´ çš„ç±»å‹ï¼Œå› æ­¤å¯¹äº <code>Some</code> ä¸­çš„å€¼ï¼Œç›´æ¥è¿›è¡Œå¿½ç•¥ã€‚ å‰©ä¸‹çš„å½¢å¦‚ <code>(Some(_),None)</code>ï¼Œ<code>(None, Some(_))</code>, <code>(None,None)</code> å½¢å¼ï¼Œéƒ½ç”±ç¬¬äºŒä¸ªåˆ†æ”¯ <code>_</code> è¿›è¡Œåˆ†é…ã€‚</p>
<h6 id="ä½¿ç”¨ä¸‹åˆ’çº¿å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡"><a href="#ä½¿ç”¨ä¸‹åˆ’çº¿å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡" class="headerlink" title="ä½¿ç”¨ä¸‹åˆ’çº¿å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡"></a>ä½¿ç”¨ä¸‹åˆ’çº¿å¿½ç•¥æœªä½¿ç”¨çš„å˜é‡</h6><p>å¦‚æœä½ åˆ›å»ºäº†ä¸€ä¸ªå˜é‡å´ä¸åœ¨ä»»ä½•åœ°æ–¹ä½¿ç”¨å®ƒå°±éœ€è¦ä½¿ç”¨_æ”¾åœ¨å˜é‡å¼€å¤´æ¥å¿½ç•¥å®ƒ</p>
<p>æ³¨æ„, åªä½¿ç”¨ <code>_</code> å’Œä½¿ç”¨ä»¥ä¸‹åˆ’çº¿å¼€å¤´çš„åç§°æœ‰äº›å¾®å¦™çš„ä¸åŒï¼šæ¯”å¦‚ <strong><code>_x</code> ä»ä¼šå°†å€¼ç»‘å®šåˆ°å˜é‡ï¼Œè€Œ <code>_</code> åˆ™å®Œå…¨ä¸ä¼šç»‘å®š</strong>ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = <span class="title function_ invoke__">Some</span>(<span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Hello!&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">Some</span>(_s) = s &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;found a string&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, s);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>s</code> æ˜¯ä¸€ä¸ªæ‹¥æœ‰æ‰€æœ‰æƒçš„åŠ¨æ€å­—ç¬¦ä¸²ï¼Œåœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸º <code>s</code> çš„å€¼ä¼šè¢«è½¬ç§»ç»™ <code>_s</code>ï¼Œåœ¨ <code>println!</code> ä¸­å†æ¬¡ä½¿ç”¨ <code>s</code> ä¼šæŠ¥é”™ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">s æ˜¯ä¸€ä¸ªæ‹¥æœ‰æ‰€æœ‰æƒçš„åŠ¨æ€å­—ç¬¦ä¸²ï¼Œåœ¨ä¸Šé¢ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªé”™è¯¯ï¼Œå› ä¸º s çš„å€¼ä¼šè¢«è½¬ç§»ç»™ _sï¼Œåœ¨ println! ä¸­å†æ¬¡ä½¿ç”¨ s ä¼šæŠ¥é”™ï¼š</span><br></pre></td></tr></table></figure>

<p>åªä½¿ç”¨ä¸‹æ»‘çº¿æœ¬èº«å°±ä¸ä¼šç»‘å®šå€¼äº†ï¼Œå› ä¸ºsæ²¡æœ‰ç§»åŠ¨è¿›_:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = <span class="title function_ invoke__">Some</span>(<span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Hello!&quot;</span>));</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">Some</span>(_) = s &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;found a string&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, s);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="åŒ¹é…å®ˆå«æä¾›çš„é¢å¤–æ¡ä»¶"><a href="#åŒ¹é…å®ˆå«æä¾›çš„é¢å¤–æ¡ä»¶" class="headerlink" title="åŒ¹é…å®ˆå«æä¾›çš„é¢å¤–æ¡ä»¶"></a>åŒ¹é…å®ˆå«æä¾›çš„é¢å¤–æ¡ä»¶</h5><p>åŒ¹é…å®ˆå«æ˜¯ä¸€ä¸ªä½äºmatchåˆ†æ”¯æ¨¡å¼ä¹‹åçš„é¢å¤–çš„ifæ¡ä»¶ï¼Œå®ƒèƒ½ä¸ºåˆ†æ”¯æ¨¡å¼æä¾›æ›´è¿›ä¸€æ­¥çš„åŒ¹é…æ¡ä»¶</p>
<p>è¿™ä¸ªæ¡ä»¶å¯ä»¥ä½¿ç”¨æ¨¡å¼ä¸­åˆ›å»ºçš„å˜é‡ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">num</span> = <span class="title function_ invoke__">Some</span>(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> num &#123;</span><br><span class="line">    <span class="title function_ invoke__">Some</span>(x) <span class="keyword">if</span> x &lt; <span class="number">5</span> =&gt; <span class="built_in">println!</span>(<span class="string">&quot;less than five: &#123;&#125;&quot;</span>, x),</span><br><span class="line">    <span class="title function_ invoke__">Some</span>(x) =&gt; <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, x),</span><br><span class="line">    <span class="literal">None</span> =&gt; (),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªä¾‹å­ä¼šæ‰“å°å‡º <code>less than five: 4</code>ã€‚å½“ <code>num</code> ä¸æ¨¡å¼ä¸­ç¬¬ä¸€ä¸ªåˆ†æ”¯åŒ¹é…æ—¶ï¼Œ<code>Some(4)</code> å¯ä»¥ä¸ <code>Some(x)</code> åŒ¹é…ï¼Œæ¥ç€åŒ¹é…å®ˆå«æ£€æŸ¥ <code>x</code> å€¼æ˜¯å¦å°äº 5ï¼Œå› ä¸º 4 å°äº 5ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªåˆ†æ”¯è¢«é€‰æ‹©ã€‚</p>
<p>ç›¸åå¦‚æœ <code>num</code> ä¸º <code>Some(10)</code>ï¼Œå› ä¸º 10 ä¸å°äº 5 ï¼Œæ‰€ä»¥ç¬¬ä¸€ä¸ªåˆ†æ”¯çš„åŒ¹é…å®ˆå«ä¸ºå‡ã€‚æ¥ç€ Rust ä¼šå‰å¾€ç¬¬äºŒä¸ªåˆ†æ”¯ï¼Œå› ä¸ºè¿™é‡Œæ²¡æœ‰åŒ¹é…å®ˆå«æ‰€ä»¥ä¼šåŒ¹é…ä»»ä½• <code>Some</code> æˆå‘˜ã€‚</p>
<p>æ¨¡å¼ä¸­æ— æ³•æä¾›ç±»å¦‚ <code>if x &lt; 5</code> çš„è¡¨è¾¾èƒ½åŠ›ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡åŒ¹é…å®ˆå«çš„æ–¹å¼æ¥å®ç°ã€‚</p>
<h5 id="ç»‘å®š"><a href="#ç»‘å®š" class="headerlink" title="@ç»‘å®š"></a>@ç»‘å®š</h5><p>@è¿ç®—ç¬¦å…è®¸ä¸ºä¸€ä¸ªå­—æ®µç»‘å®šå¦å¤–ä¸€ä¸ªå˜é‡ã€‚ä¸‹é¢ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¸Œæœ›æµ‹è¯•Message::helloçš„idå­—æ®µæ˜¯å¦ä½äº3..&#x3D;7çš„èŒƒå›´å†…ï¼ŒåŒæ—¶ä¹Ÿå¸Œæœ›èƒ½å°†å…¶å€¼ç»‘å®šåˆ° <code>id_variable</code> å˜é‡ä¸­ä»¥ä¾¿æ­¤åˆ†æ”¯ä¸­ç›¸å…³çš„ä»£ç å¯ä»¥ä½¿ç”¨å®ƒã€‚æˆ‘ä»¬å¯ä»¥å°† <code>id_variable</code> å‘½åä¸º <code>id</code>ï¼Œä¸å­—æ®µåŒåï¼Œä¸è¿‡å‡ºäºç¤ºä¾‹çš„ç›®çš„è¿™é‡Œé€‰æ‹©äº†ä¸åŒçš„åç§°ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Message</span> &#123;</span><br><span class="line">    Hello &#123; id: <span class="type">i32</span> &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="variable">msg</span> = Message::Hello &#123; id: <span class="number">5</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">match</span> msg &#123;</span><br><span class="line">    Message::Hello &#123; id: id_variable @ <span class="number">3</span>..=<span class="number">7</span> &#125; =&gt; &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Found an id in range: &#123;&#125;&quot;</span>, id_variable)</span><br><span class="line">    &#125;,</span><br><span class="line">    Message::Hello &#123; id: <span class="number">10</span>..=<span class="number">12</span> &#125; =&gt; &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Found an id in another range&quot;</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    Message::Hello &#123; id &#125; =&gt; &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;Found some other id: &#123;&#125;&quot;</span>, id)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸Šä¾‹ä¼šæ‰“å°å‡º <code>Found an id in range: 5</code>ã€‚é€šè¿‡åœ¨ <code>3..=7</code> ä¹‹å‰æŒ‡å®š <code>id_variable @</code>ï¼Œæˆ‘ä»¬æ•è·äº†ä»»ä½•åŒ¹é…æ­¤èŒƒå›´çš„å€¼å¹¶åŒæ—¶å°†è¯¥å€¼ç»‘å®šåˆ°å˜é‡ <code>id_variable</code> ä¸Šã€‚</p>
<p>ç¬¬äºŒä¸ªåˆ†æ”¯åªåœ¨æ¨¡å¼ä¸­æŒ‡å®šäº†ä¸€ä¸ªèŒƒå›´ï¼Œ<code>id</code> å­—æ®µçš„å€¼å¯ä»¥æ˜¯ <code>10ã€11 æˆ– 12</code>ï¼Œä¸è¿‡è¿™ä¸ªæ¨¡å¼çš„ä»£ç å¹¶ä¸çŸ¥æƒ…ä¹Ÿä¸èƒ½ä½¿ç”¨ <code>id</code> å­—æ®µä¸­çš„å€¼ï¼Œå› ä¸ºæ²¡æœ‰å°† <code>id</code> å€¼ä¿å­˜è¿›ä¸€ä¸ªå˜é‡ã€‚</p>
<p>æœ€åä¸€ä¸ªåˆ†æ”¯æŒ‡å®šäº†ä¸€ä¸ªæ²¡æœ‰èŒƒå›´çš„å˜é‡ï¼Œæ­¤æ—¶ç¡®å®æ‹¥æœ‰å¯ä»¥ç”¨äºåˆ†æ”¯ä»£ç çš„å˜é‡ <code>id</code>ï¼Œå› ä¸ºè¿™é‡Œä½¿ç”¨äº†ç»“æ„ä½“å­—æ®µç®€å†™è¯­æ³•ã€‚ä¸è¿‡æ­¤åˆ†æ”¯ä¸­æ²¡æœ‰åƒå¤´ä¸¤ä¸ªåˆ†æ”¯é‚£æ ·å¯¹ <code>id</code> å­—æ®µçš„å€¼è¿›è¡Œæµ‹è¯•ï¼šä»»ä½•å€¼éƒ½ä¼šåŒ¹é…æ­¤åˆ†æ”¯ã€‚</p>
<p>å½“ä½ æ—¢æƒ³è¦é™å®šåˆ†æ”¯èŒƒå›´ï¼Œåˆæƒ³è¦ä½¿ç”¨åˆ†æ”¯çš„å˜é‡æ—¶ï¼Œå°±å¯ä»¥ç”¨ <code>@</code> æ¥ç»‘å®šåˆ°ä¸€ä¸ªæ–°çš„å˜é‡ä¸Šï¼Œå®ç°æƒ³è¦çš„åŠŸèƒ½ã€‚</p>
<h6 id="å‰ç»‘å®šåè§£æ„-Rust-1-56-æ–°å¢"><a href="#å‰ç»‘å®šåè§£æ„-Rust-1-56-æ–°å¢" class="headerlink" title="@å‰ç»‘å®šåè§£æ„(Rust 1.56 æ–°å¢)"></a>@å‰ç»‘å®šåè§£æ„(Rust 1.56 æ–°å¢)</h6><p>ä½¿ç”¨ <code>@</code> è¿˜å¯ä»¥åœ¨ç»‘å®šæ–°å˜é‡çš„åŒæ—¶ï¼Œå¯¹ç›®æ ‡è¿›è¡Œè§£æ„ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span> &#123;</span><br><span class="line">    x: <span class="type">i32</span>,</span><br><span class="line">    y: <span class="type">i32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="comment">// ç»‘å®šæ–°å˜é‡ `p`ï¼ŒåŒæ—¶å¯¹ `Point` è¿›è¡Œè§£æ„</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">p</span> @ Point &#123;x: px, y: py &#125; = Point &#123;x: <span class="number">10</span>, y: <span class="number">23</span>&#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;x: &#123;&#125;, y: &#123;&#125;&quot;</span>, px, py);</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, p);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">point</span> = Point &#123;x: <span class="number">10</span>, y: <span class="number">5</span>&#125;;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> <span class="variable">p</span> @ Point &#123;x: <span class="number">10</span>, y&#125; = point &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;x is 10 and y is &#123;&#125; in &#123;:?&#125;&quot;</span>, y, p);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;x was not 10 :(&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h6 id="æ–°ç‰¹æ€§-Rust-1-53-æ–°å¢"><a href="#æ–°ç‰¹æ€§-Rust-1-53-æ–°å¢" class="headerlink" title="@æ–°ç‰¹æ€§(Rust 1.53 æ–°å¢)"></a>@æ–°ç‰¹æ€§(Rust 1.53 æ–°å¢)</h6><p>è€ƒè™‘ä¸‹é¢ä¸€æ®µä»£ç :</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">match</span> <span class="number">1</span> &#123;</span><br><span class="line">        num @ <span class="number">1</span> | <span class="number">2</span> =&gt; &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>, num);</span><br><span class="line">        &#125;</span><br><span class="line">        _ =&gt; &#123;&#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç¼–è¯‘ä¸é€šè¿‡ï¼Œæ˜¯å› ä¸º <code>num</code> æ²¡æœ‰ç»‘å®šåˆ°æ‰€æœ‰çš„æ¨¡å¼ä¸Šï¼Œåªç»‘å®šäº†æ¨¡å¼ <code>1</code>ï¼Œä½ å¯èƒ½ä¼šè¯•å›¾é€šè¿‡è¿™ä¸ªæ–¹å¼æ¥è§£å†³ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">num @ (<span class="number">1</span> | <span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>ä½†æ˜¯ï¼Œå¦‚æœä½ ç”¨çš„æ˜¯ Rust 1.53 ä¹‹å‰çš„ç‰ˆæœ¬ï¼Œé‚£è¿™ç§å†™æ³•ä¼šæŠ¥é”™ï¼Œå› ä¸ºç¼–è¯‘å™¨ä¸æ”¯æŒã€‚</p>
<p>è‡³æ­¤ï¼Œæ¨¡å¼åŒ¹é…çš„å†…å®¹å·²ç»å…¨éƒ¨å®Œç»“ï¼Œå¤æ‚ä½†æ˜¯è¯¦å°½ï¼Œæƒ³è¦ä¸€æ¬¡æ€§å…¨éƒ¨è®°ä½å±å®ä¸æ˜“ï¼Œå› æ­¤è¯»è€…å¯ä»¥å…ˆç•™ä¸€ä¸ªå°è±¡ï¼Œç­‰æœªæ¥éœ€è¦æ—¶ï¼Œå†æ¥ç¿»é˜…å¯»æ‰¾å…·ä½“çš„æ¨¡å¼å®ç°æ–¹å¼ã€‚</p>
<h3 id="æ–¹æ³•Method"><a href="#æ–¹æ³•Method" class="headerlink" title="æ–¹æ³•Method"></a>æ–¹æ³•Method</h3><h4 id="å®šä¹‰æ–¹æ³•"><a href="#å®šä¹‰æ–¹æ³•" class="headerlink" title="å®šä¹‰æ–¹æ³•"></a>å®šä¹‰æ–¹æ³•</h4><p>Rustä½¿ç”¨implæ¥å®šä¹‰æ–¹æ³•ï¼Œä¾‹å¦‚ä»¥ä¸‹ä»£ç ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    x: <span class="type">f64</span>,</span><br><span class="line">    y: <span class="type">f64</span>,</span><br><span class="line">    radius: <span class="type">f64</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Circle</span> &#123;</span><br><span class="line">    <span class="comment">// newæ˜¯Circleçš„å…³è”å‡½æ•°ï¼Œå› ä¸ºå®ƒçš„ç¬¬ä¸€ä¸ªå‚æ•°ä¸æ˜¯selfï¼Œä¸”newå¹¶ä¸æ˜¯å…³é”®å­—</span></span><br><span class="line">    <span class="comment">// è¿™ç§æ–¹æ³•å¾€å¾€ç”¨äºåˆå§‹åŒ–å½“å‰ç»“æ„ä½“çš„å®ä¾‹</span></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">new</span>(x: <span class="type">f64</span>, y: <span class="type">f64</span>, radius: <span class="type">f64</span>) <span class="punctuation">-&gt;</span> Circle &#123;</span><br><span class="line">        Circle &#123;</span><br><span class="line">            x: x,</span><br><span class="line">            y: y,</span><br><span class="line">            radius: radius,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Circleçš„æ–¹æ³•ï¼Œ&amp;selfè¡¨ç¤ºå€Ÿç”¨å½“å‰çš„Circleç»“æ„ä½“</span></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">area</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">f64</span> &#123;</span><br><span class="line">        std::<span class="type">f64</span>::consts::PI * (<span class="keyword">self</span>.radius * <span class="keyword">self</span>.radius)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p> æˆ‘ä»¬æ¥çœ‹çœ‹Rustå’Œå…¶å®ƒè¯­è¨€çš„åŒºåˆ«:</p>
<p><img src="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202504091920787.png" alt="image-20250409192008695" loading="lazy"></p>
<p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å…¶å®ƒè¯­è¨€ä¸­æ‰€æœ‰å®šä¹‰éƒ½åœ¨classä¸­ï¼Œä½†æ˜¯Rustçš„å¯¹è±¡å®šä¹‰å’Œæ–¹æ³•å®šä¹‰æ˜¯åˆ†ç¦»çš„ï¼Œè¿™ç§æ•°æ®å’Œä½¿ç”¨åˆ†ç¦»çš„æ–¹å¼ä¼šç»™ä½¿ç”¨è€…æé«˜çš„çµæ´»åº¦</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸‹é¢ä¾‹å­</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    width: <span class="type">u32</span>,</span><br><span class="line">    height: <span class="type">u32</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">area</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">u32</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.width * <span class="keyword">self</span>.height</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">rect1</span> = Rectangle &#123; width: <span class="number">30</span>, height: <span class="number">50</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(</span><br><span class="line">        <span class="string">&quot;The area of the rectangle is &#123;&#125; square pixels.&quot;</span>,</span><br><span class="line">        rect1.<span class="title function_ invoke__">area</span>()</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¯¥ä¾‹å­å®šä¹‰äº†ä¸€ä¸ªRectangleç»“æ„ä½“ï¼Œå¹¶ä¸”åœ¨å…¶å®šä¹‰äº†ä¸€ä¸ªareaæ–¹æ³•ï¼Œç”¨äºè®¡ç®—è¯¥çŸ©é˜µçš„é¢ç§¯</p>
<p><code>impl Rectangle &#123;&#125;</code> è¡¨ç¤ºä¸º <code>Rectangle</code> å®ç°æ–¹æ³•ï¼ˆ<code>impl</code> æ˜¯å®ç° <em>implementation</em> çš„ç¼©å†™ï¼‰ï¼Œè¿™æ ·çš„å†™æ³•è¡¨æ˜ <code>impl</code> è¯­å¥å—ä¸­çš„ä¸€åˆ‡éƒ½æ˜¯è·Ÿ <code>Rectangle</code> ç›¸å…³è”çš„ã€‚</p>
<h4 id="selfã€-selfå’Œ-mut-self"><a href="#selfã€-selfå’Œ-mut-self" class="headerlink" title="selfã€&amp;selfå’Œ&amp;mut self"></a>selfã€&amp;selfå’Œ&amp;mut self</h4><p>åœ¨areaçš„ç­¾åä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨&amp;selfæ›¿ä»£rectangle:&amp;Rectangleï¼Œ&amp;selfå…¶å®æ˜¯self:&amp;Selfçš„ç®€å†™ï¼ˆæ³¨æ„å¤§å°å†™ï¼‰ã€‚åœ¨ä¸€ä¸ªimplå¿«å†…ï¼ŒSelfæŒ‡ä»£è¢«å®ç°æ–¹æ³•çš„ç»“æ„ä½“å†…å‘ï¼ŒselfæŒ‡ä»£æ­¤ç±»å‹çš„å®ä¾‹</p>
<p>æ¢å¥è¯è¯´ï¼ŒselfæŒ‡ä»£çš„æ˜¯Rectangleç»“æ„ä½“å®ä¾‹ï¼Œè¿™æ ·çš„å†™æ³•ä¼šè®©ä»£ç ç®€æ´å¥½å¤š</p>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œ<code>self</code> ä¾ç„¶æœ‰æ‰€æœ‰æƒçš„æ¦‚å¿µï¼š</p>
<ul>
<li><code>self</code> è¡¨ç¤º <code>Rectangle</code> çš„æ‰€æœ‰æƒè½¬ç§»åˆ°è¯¥æ–¹æ³•ä¸­ï¼Œè¿™ç§å½¢å¼ç”¨çš„è¾ƒå°‘</li>
<li><code>&amp;self</code> è¡¨ç¤ºè¯¥æ–¹æ³•å¯¹ <code>Rectangle</code> çš„ä¸å¯å˜å€Ÿç”¨</li>
<li><code>&amp;mut self</code> è¡¨ç¤ºå¯å˜å€Ÿç”¨</li>
</ul>
<p> æˆ‘ä»¬å¹¶ä¸æƒ³è·å–æ‰€æœ‰æƒï¼Œä¹Ÿæ— éœ€å»æ”¹å˜å®ƒï¼Œåªæ˜¯å¸Œæœ›èƒ½å¤Ÿè¯»å–ç»“æ„ä½“ä¸­çš„æ•°æ®å°±ä½¿ç”¨&amp;selfï¼Œè€Œå½“æˆ‘ä»¬éœ€è¦å»æ”¹å˜å½“å‰ç»“æ„ä½“æ—¶ï¼Œå°±éœ€è¦ä½¿ç”¨&amp;mut self</p>
<p>ç®€å•æ€»ç»“ä¸‹ï¼Œä½¿ç”¨æ–¹æ³•ä»£æ›¿å‡½æ•°æœ‰ä»¥ä¸‹å¥½å¤„ï¼š</p>
<ul>
<li>ä¸ç”¨åœ¨å‡½æ•°ç­¾åä¸­é‡å¤ä¹¦å†™ <code>self</code> å¯¹åº”çš„ç±»å‹</li>
<li>ä»£ç çš„ç»„ç»‡æ€§å’Œå†…èšæ€§æ›´å¼ºï¼Œå¯¹äºä»£ç ç»´æŠ¤å’Œé˜…è¯»æ¥è¯´ï¼Œå¥½å¤„å·¨å¤§</li>
</ul>
<h4 id="æ–¹æ³•åè·Ÿç»“æ„ä½“å­—æ®µåç›¸åŒ"><a href="#æ–¹æ³•åè·Ÿç»“æ„ä½“å­—æ®µåç›¸åŒ" class="headerlink" title="æ–¹æ³•åè·Ÿç»“æ„ä½“å­—æ®µåç›¸åŒ"></a>æ–¹æ³•åè·Ÿç»“æ„ä½“å­—æ®µåç›¸åŒ</h4><p>åœ¨Rustä¸­ï¼Œå…è®¸æ–¹æ³•åè·Ÿç»“æ„ä½“å­—æ®µåç›¸åŒï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">width</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">bool</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.width &gt; <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">rect1</span> = Rectangle &#123;</span><br><span class="line">        width: <span class="number">30</span>,</span><br><span class="line">        height: <span class="number">50</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> rect1.<span class="title function_ invoke__">width</span>() &#123;</span><br><span class="line">        <span class="built_in">println!</span>(<span class="string">&quot;The rectangle has a nonzero width; it is &#123;&#125;&quot;</span>, rect1.width);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘ä»¬ä½¿ç”¨ <code>rect1.width()</code> æ—¶ï¼ŒRust çŸ¥é“æˆ‘ä»¬è°ƒç”¨çš„æ˜¯å®ƒçš„æ–¹æ³•ï¼Œå¦‚æœä½¿ç”¨ <code>rect1.width</code>ï¼Œåˆ™æ˜¯è®¿é—®å®ƒçš„å­—æ®µã€‚</p>
<h4 id="å¸¦å¤šä¸ªå‚æ•°çš„æ–¹æ³•"><a href="#å¸¦å¤šä¸ªå‚æ•°çš„æ–¹æ³•" class="headerlink" title="å¸¦å¤šä¸ªå‚æ•°çš„æ–¹æ³•"></a>å¸¦å¤šä¸ªå‚æ•°çš„æ–¹æ³•</h4><p>æ–¹æ³•å’Œå‡½æ•°ä¸€æ ·ï¼Œ å¯ä»¥ä½¿ç”¨å¤šä¸ªå‚æ•°:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">area</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">u32</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.width * <span class="keyword">self</span>.height</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">can_hold</span>(&amp;<span class="keyword">self</span>, other: &amp;Rectangle) <span class="punctuation">-&gt;</span> <span class="type">bool</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.width &gt; other.width &amp;&amp; <span class="keyword">self</span>.height &gt; other.height</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">rect1</span> = Rectangle &#123; width: <span class="number">30</span>, height: <span class="number">50</span> &#125;;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">rect2</span> = Rectangle &#123; width: <span class="number">10</span>, height: <span class="number">40</span> &#125;;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">rect3</span> = Rectangle &#123; width: <span class="number">60</span>, height: <span class="number">45</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Can rect1 hold rect2? &#123;&#125;&quot;</span>, rect1.<span class="title function_ invoke__">can_hold</span>(&amp;rect2));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Can rect1 hold rect3? &#123;&#125;&quot;</span>, rect1.<span class="title function_ invoke__">can_hold</span>(&amp;rect3));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h4 id="å…³è”å‡½æ•°"><a href="#å…³è”å‡½æ•°" class="headerlink" title="å…³è”å‡½æ•°"></a>å…³è”å‡½æ•°</h4><p>å¦‚ä½•ä¸ºä¸€ä¸ªç»“æ„ä½“å®šä¹‰ä¸€ä¸ªæ„é€ å™¨æ–¹æ³•ï¼Ÿä¹Ÿå°±æ˜¯æ¥å—å‡ ä¸ªå‚æ•°ï¼Œç„¶åæ„é€ å¹¶è¿”å›è¯¥ç»“æ„ä½“çš„å®ä¾‹ï¼Œå¾ˆç®€å•ï¼Œå‚æ•°ä¸­ä¸åŒ…å« <code>self</code> å³å¯</p>
<p>è¿™ç§å®šä¹‰åœ¨ <code>impl</code> ä¸­ä¸”æ²¡æœ‰ <code>self</code> çš„å‡½æ•°è¢«ç§°ä¹‹ä¸º<strong>å…³è”å‡½æ•°</strong>ï¼š å› ä¸ºå®ƒæ²¡æœ‰ <code>self</code>ï¼Œä¸èƒ½ç”¨ <code>f.read()</code> çš„å½¢å¼è°ƒç”¨ï¼Œå› æ­¤å®ƒæ˜¯ä¸€ä¸ªå‡½æ•°è€Œä¸æ˜¯æ–¹æ³•ï¼Œä½†å®ƒåˆåœ¨implä¸­ï¼Œä¸ç»“æ„ä½“ç´§å¯†å…³è”ï¼Œå› æ­¤ç§°ä¸ºå…³è”å‡½æ•°</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">new</span>(w: <span class="type">u32</span>, h: <span class="type">u32</span>) <span class="punctuation">-&gt;</span> Rectangle &#123;</span><br><span class="line">        Rectangle &#123; width: w, height: h &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="å¤šä¸ªimplå®šä¹‰"><a href="#å¤šä¸ªimplå®šä¹‰" class="headerlink" title="å¤šä¸ªimplå®šä¹‰."></a>å¤šä¸ªimplå®šä¹‰.</h4><p>Rust å…è®¸æˆ‘ä»¬ä¸ºä¸€ä¸ªç»“æ„ä½“å®šä¹‰å¤šä¸ª <code>impl</code> å—ï¼Œç›®çš„æ˜¯æä¾›æ›´å¤šçš„çµæ´»æ€§å’Œä»£ç ç»„ç»‡æ€§ï¼Œä¾‹å¦‚å½“æ–¹æ³•å¤šäº†åï¼Œå¯ä»¥æŠŠç›¸å…³çš„æ–¹æ³•ç»„ç»‡åœ¨åŒä¸€ä¸ª <code>impl</code> å—ä¸­ï¼Œé‚£ä¹ˆå°±å¯ä»¥å½¢æˆå¤šä¸ª <code>impl</code> å—ï¼Œå„è‡ªå®Œæˆä¸€å—å„¿ç›®æ ‡ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">area</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">u32</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.width * <span class="keyword">self</span>.height</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Rectangle</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">can_hold</span>(&amp;<span class="keyword">self</span>, other: &amp;Rectangle) <span class="punctuation">-&gt;</span> <span class="type">bool</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.width &gt; other.width &amp;&amp; <span class="keyword">self</span>.height &gt; other.height</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="ä¸ºæšä¸¾å®ç°æ–¹æ³•"><a href="#ä¸ºæšä¸¾å®ç°æ–¹æ³•" class="headerlink" title="ä¸ºæšä¸¾å®ç°æ–¹æ³•"></a>ä¸ºæšä¸¾å®ç°æ–¹æ³•</h4><p>æšä¸¾ç±»å‹ä¹‹æ‰€ä»¥å¼ºå¤§ï¼Œä¸ä»…ä»…åœ¨äºå®ƒå¥½ç”¨ã€å¯ä»¥<a target="_blank" rel="noopener" href="https://course.rs/basic/compound-type/enum.html#%E5%90%8C%E4%B8%80%E5%8C%96%E7%B1%BB%E5%9E%8B">åŒä¸€åŒ–ç±»å‹</a>ï¼Œè¿˜åœ¨äºï¼Œæˆ‘ä»¬å¯ä»¥åƒç»“æ„ä½“ä¸€æ ·ï¼Œä¸ºæšä¸¾å®ç°æ–¹æ³•ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#![allow(unused)]</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Message</span> &#123;</span><br><span class="line">    Quit,</span><br><span class="line">    Move &#123; x: <span class="type">i32</span>, y: <span class="type">i32</span> &#125;,</span><br><span class="line">    <span class="title function_ invoke__">Write</span>(<span class="type">String</span>),</span><br><span class="line">    <span class="title function_ invoke__">ChangeColor</span>(<span class="type">i32</span>, <span class="type">i32</span>, <span class="type">i32</span>),</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Message</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">call</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="comment">// åœ¨è¿™é‡Œå®šä¹‰æ–¹æ³•ä½“</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">m</span> = Message::<span class="title function_ invoke__">Write</span>(<span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;hello&quot;</span>));</span><br><span class="line">    m.<span class="title function_ invoke__">call</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é™¤äº†ç»“æ„ä½“å’Œæšä¸¾ï¼Œæˆ‘ä»¬è¿˜èƒ½ä¸ºç‰¹å¾(trait)å®ç°æ–¹æ³•ï¼Œåœ¨æ­¤ä¹‹å‰ï¼Œå…ˆæ¥çœ‹çœ‹æ³›å‹ã€‚</p>
<h3 id="æ³›å‹å’Œç‰¹å¾"><a href="#æ³›å‹å’Œç‰¹å¾" class="headerlink" title="æ³›å‹å’Œç‰¹å¾"></a>æ³›å‹å’Œç‰¹å¾</h3><h4 id="æ³›å‹Generics"><a href="#æ³›å‹Generics" class="headerlink" title="æ³›å‹Generics"></a>æ³›å‹Generics</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">add</span>&lt;T&gt;(a:T, b:T) <span class="punctuation">-&gt;</span> T &#123;</span><br><span class="line">    a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;add i8: &#123;&#125;&quot;</span>, <span class="title function_ invoke__">add</span>(<span class="number">2i8</span>, <span class="number">3i8</span>));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;add i32: &#123;&#125;&quot;</span>, <span class="title function_ invoke__">add</span>(<span class="number">20</span>, <span class="number">30</span>));</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;add f64: &#123;&#125;&quot;</span>, <span class="title function_ invoke__">add</span>(<span class="number">1.23</span>, <span class="number">1.23</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„ä»£ç Tå°±æ˜¯æ³›å‹å‚æ•°ï¼Œå®é™…ä¸Šåœ¨Rustä¸­ï¼Œæ³›å‹å‚æ•°çš„åç§°å¯ä»¥éšä¾¿èµ·ï¼Œä½†æ˜¯å‡ºäºæƒ¯ä¾‹ï¼Œæˆ‘ä»¬éƒ½æ˜¯ç”¨Tæ¥ä½œä¸ºé¦–é€‰</p>
<p>ä½¿ç”¨æ³›å‹å‚æ•°ï¼Œæœ‰ä¸€ä¸ªå…ˆå†³æ¡ä»¶ï¼Œå¿…éœ€åœ¨ä½¿ç”¨å‰å¯¹å…¶è¿›è¡Œå£°æ˜ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fn largest&lt;T&gt;(list: &amp;[T]) -&gt; T &#123;</span><br></pre></td></tr></table></figure>

<p> è¯¥æ³›å‹å‡½æ•°çš„ä½œç”¨æ˜¯ä»åˆ—è¡¨ä¸­æ‰¾å‡ºæœ€å¤§çš„å€¼ï¼Œå…¶ä¸­åˆ—è¡¨ä¸­çš„å…ƒç´ ç±»å‹ä¸º Tã€‚é¦–å…ˆ <code>largest&lt;T&gt;</code> å¯¹æ³›å‹å‚æ•° <code>T</code> è¿›è¡Œäº†å£°æ˜ï¼Œç„¶åæ‰åœ¨å‡½æ•°å‚æ•°ä¸­è¿›è¡Œä½¿ç”¨è¯¥æ³›å‹å‚æ•° <code>list: &amp;[T]</code> ï¼ˆè¿˜è®°å¾— <code>&amp;[T]</code> ç±»å‹å§ï¼Ÿè¿™æ˜¯<a target="_blank" rel="noopener" href="https://course.rs/basic/compound-type/array.html#%E6%95%B0%E7%BB%84%E5%88%87%E7%89%87">æ•°ç»„åˆ‡ç‰‡</a>ï¼‰ã€‚</p>
<p>æ€»ä¹‹ï¼Œæˆ‘ä»¬å¯ä»¥è¿™æ ·ç†è§£è¿™ä¸ªå‡½æ•°å®šä¹‰ï¼šå‡½æ•° <code>largest</code> æœ‰æ³›å‹ç±»å‹ <code>T</code>ï¼Œå®ƒæœ‰ä¸ªå‚æ•° <code>list</code>ï¼Œå…¶ç±»å‹æ˜¯å…ƒç´ ä¸º <code>T</code> çš„æ•°ç»„åˆ‡ç‰‡ï¼Œæœ€åï¼Œè¯¥å‡½æ•°è¿”å›å€¼çš„ç±»å‹ä¹Ÿæ˜¯ <code>T</code>ã€‚</p>
<h5 id="æ˜¾å¼åœ°æŒ‡å®šæ³›å‹çš„ç±»å‹å‚æ•°"><a href="#æ˜¾å¼åœ°æŒ‡å®šæ³›å‹çš„ç±»å‹å‚æ•°" class="headerlink" title="æ˜¾å¼åœ°æŒ‡å®šæ³›å‹çš„ç±»å‹å‚æ•°"></a>æ˜¾å¼åœ°æŒ‡å®šæ³›å‹çš„ç±»å‹å‚æ•°</h5><p>æœ‰æ—¶å€™ï¼Œç¼–è¯‘å™¨æ— æ³•æ¨æ–­ä½ æƒ³è¦çš„æ³›å‹å‚æ•°:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fmt::Display;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">create_and_print</span>&lt;T&gt;() <span class="keyword">where</span> T: <span class="built_in">From</span>&lt;<span class="type">i32</span>&gt; + Display &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span>: T = <span class="number">100</span>.<span class="title function_ invoke__">into</span>(); <span class="comment">// åˆ›å»ºäº†ç±»å‹ä¸º T çš„å˜é‡ aï¼Œå®ƒçš„åˆå§‹å€¼ç”± 100 è½¬æ¢è€Œæ¥</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a is: &#123;&#125;&quot;</span>, a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="title function_ invoke__">create_and_print</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç ç›´æ¥è¿è¡Œä¼šæŠ¥é”™ï¼Œæˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œä½¿ç”¨æ˜¾å¼æŒ‡å®šç±»å‹:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fmt::Display;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">create_and_print</span>&lt;T&gt;() <span class="keyword">where</span> T: <span class="built_in">From</span>&lt;<span class="type">i32</span>&gt; + Display &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">a</span>: T = <span class="number">100</span>.<span class="title function_ invoke__">into</span>(); <span class="comment">// åˆ›å»ºäº†ç±»å‹ä¸º T çš„å˜é‡ aï¼Œå®ƒçš„åˆå§‹å€¼ç”± 100 è½¬æ¢è€Œæ¥</span></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;a is: &#123;&#125;&quot;</span>, a);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    create_and_print::&lt;<span class="type">i64</span>&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="ç»“æ„ä½“ä¸­ä½¿ç”¨æ³›å‹"><a href="#ç»“æ„ä½“ä¸­ä½¿ç”¨æ³›å‹" class="headerlink" title="ç»“æ„ä½“ä¸­ä½¿ç”¨æ³›å‹"></a>ç»“æ„ä½“ä¸­ä½¿ç”¨æ³›å‹</h5><p>ç»“æ„ä½“ä¸­çš„å­—æ®µç±»å‹ä¹Ÿå¯ä»¥ç”¨æ³›å‹æ¥å®šä¹‰ï¼Œä¸‹é¢çš„ä»£ç å®šä¹‰äº†ä¸€ä¸ªåæ ‡ç‚¹Pointï¼Œå®ƒå¯ä»¥å­˜æ”¾ä»»ä½•ç±»å‹çš„åæ ‡å€¼</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span>&lt;T&gt;&#123;</span><br><span class="line">	x:T,</span><br><span class="line">	y:T,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>()&#123;</span><br><span class="line">	<span class="keyword">let</span> <span class="variable">integer</span>=Point&#123;x:<span class="number">5</span>,y:<span class="number">10</span>&#125;;</span><br><span class="line">	<span class="keyword">let</span> <span class="variable">float</span>=Point&#123;x:<span class="number">1.0</span>,y:<span class="number">4.0</span>&#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œæœ‰ä¸¤ç‚¹éœ€è¦æ³¨æ„</p>
<ul>
<li><strong>æå‰å£°æ˜</strong>ï¼Œè·Ÿæ³›å‹å‡½æ•°å®šä¹‰ç±»ä¼¼ï¼Œé¦–å…ˆæˆ‘ä»¬åœ¨ä½¿ç”¨æ³›å‹å‚æ•°ä¹‹å‰å¿…éœ€è¦è¿›è¡Œå£°æ˜ <code>Point&lt;T&gt;</code>ï¼Œæ¥ç€å°±å¯ä»¥åœ¨ç»“æ„ä½“çš„å­—æ®µç±»å‹ä¸­ä½¿ç”¨ <code>T</code> æ¥æ›¿ä»£å…·ä½“çš„ç±»å‹</li>
<li><strong>x å’Œ y æ˜¯ç›¸åŒçš„ç±»å‹</strong></li>
</ul>
<p>ç¬¬äºŒç‚¹éå¸¸é‡è¦ï¼Œå¦‚æœä½¿ç”¨ä¸åŒçš„ç±»å‹ï¼Œé‚£ä¹ˆå®ƒä¼šå¯¼è‡´ä¸‹é¢ä»£ç çš„æŠ¥é”™:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span>&lt;T&gt; &#123;</span><br><span class="line">    x: T,</span><br><span class="line">    y: T,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">p</span> = Point&#123;x: <span class="number">1</span>, y :<span class="number">1.1</span>&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>xæ˜¯æ•´æ•°ç±»å‹ï¼Œyæ˜¯æµ®ç‚¹æ•°ç±»å‹çš„ï¼Œä¼šå‘ç”ŸæŠ¥é”™</p>
<p>å¦‚æœæˆ‘ä»¬æƒ³è¦x,yæ—¢èƒ½ç±»å‹ç›¸åŒï¼Œåˆèƒ½ç±»å‹ä¸åŒï¼Œé‚£æˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸åŒçš„æ³›å‹å‚æ•°:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span>&lt;T,U&gt; &#123;</span><br><span class="line">    x: T,</span><br><span class="line">    y: U,</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">p</span> = Point&#123;x: <span class="number">1</span>, y :<span class="number">1.1</span>&#125;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åˆ‡è®°ï¼Œæ‰€æœ‰çš„æ³›å‹å‚æ•°éƒ½è¦æå‰å£°æ˜ï¼š<code>Point&lt;T,U&gt;</code> ! ä½†æ˜¯å¦‚æœä½ çš„ç»“æ„ä½“å˜æˆè¿™é¬¼æ ·ï¼š<code>struct Woo&lt;T,U,V,W,X&gt;</code>ï¼Œé‚£ä¹ˆä½ éœ€è¦è€ƒè™‘æ‹†åˆ†è¿™ä¸ªç»“æ„ä½“ï¼Œå‡å°‘æ³›å‹å‚æ•°çš„ä¸ªæ•°å’Œä»£ç å¤æ‚åº¦ã€‚</p>
<h5 id="æšä¸¾ä¸­ä½¿ç”¨æ³›å‹"><a href="#æšä¸¾ä¸­ä½¿ç”¨æ³›å‹" class="headerlink" title="æšä¸¾ä¸­ä½¿ç”¨æ³›å‹"></a>æšä¸¾ä¸­ä½¿ç”¨æ³›å‹</h5><p>æåˆ°æšä¸¾ç±»å‹ï¼Œ<code>Option</code>æ°¸è¿œæ˜¯ç¬¬ä¸€ä¸ªåº”è¯¥è¢«æƒ³èµ·æ¥çš„</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Option</span>&lt;T&gt; &#123;</span><br><span class="line">    <span class="title function_ invoke__">Some</span>(T),</span><br><span class="line">    <span class="literal">None</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Option<T>æ˜¯ä¸€ä¸ªæ‹¥æœ‰æ³›å‹Tçš„æšä¸¾ç±»å‹ï¼Œå®ƒçš„ç¬¬ä¸€ä¸ªæˆå‘˜æ˜¯Some(T)ï¼Œå­˜æ”¾äº†ä¸€ä¸ªç±»å‹ä¸ºTçš„å€¼ã€‚</p>
<p>å¾—ç›Šäºæ³›å‹çš„å¼•å…¥ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ä»»ä½•ä¸€ä¸ªéœ€è¦è¿”å›å€¼çš„å‡½æ•°ä¸­ï¼Œå»ä½¿ç”¨ <code>Option&lt;T&gt;</code> æšä¸¾ç±»å‹æ¥åšä¸ºè¿”å›å€¼ï¼Œç”¨äºè¿”å›ä¸€ä¸ªä»»æ„ç±»å‹çš„å€¼ <code>Some(T)</code>ï¼Œæˆ–è€…æ²¡æœ‰å€¼ <code>None</code>ã€‚</p>
<p>å¯¹äºæšä¸¾è€Œè¨€ï¼Œå§é¾™å‡¤é›æ°¸è¿œæ˜¯ç»•ä¸è¿‡å»çš„å­˜åœ¨ï¼šå¦‚æœæ˜¯ <code>Option</code> æ˜¯å§é¾™ï¼Œé‚£ä¹ˆ <code>Result</code> å°±ä¸€å®šæ˜¯å‡¤é›ï¼Œå¾—ä¸¤è€…å¯å¾—å¤©ä¸‹ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Result</span>&lt;T, E&gt; &#123;</span><br><span class="line">    <span class="title function_ invoke__">Ok</span>(T),</span><br><span class="line">    <span class="title function_ invoke__">Err</span>(E),</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™ä¸ªæšä¸¾å’ŒOptionä¸€æ ·ï¼Œä¸»è¦ç”¨äºå‡½æ•°è¿”å›å€¼ï¼Œä¸<code>Option</code>ç”¨äºå€¼çš„å­˜åœ¨ä¸å¦ä¸åŒï¼Œ<code>Result</code>å…³æ³¨çš„ä¸»è¦æ˜¯å€¼çš„æ­£ç¡®æ€§ã€‚</p>
<h5 id="æ–¹æ³•ä¸­ä½¿ç”¨æ³›å‹"><a href="#æ–¹æ³•ä¸­ä½¿ç”¨æ³›å‹" class="headerlink" title="æ–¹æ³•ä¸­ä½¿ç”¨æ³›å‹"></a>æ–¹æ³•ä¸­ä½¿ç”¨æ³›å‹</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Point</span>&lt;T&gt; &#123;</span><br><span class="line">    x: T,</span><br><span class="line">    y: T,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span>&lt;T&gt; Point&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">x</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> &amp;T &#123;</span><br><span class="line">        &amp;<span class="keyword">self</span>.x</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">p</span> = Point &#123; x: <span class="number">5</span>, y: <span class="number">10</span> &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;p.x = &#123;&#125;&quot;</span>, p.<span class="title function_ invoke__">x</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä½¿ç”¨æ³›å‹å‚æ•°å‰ï¼Œä¾ç„¶éœ€è¦æå‰å£°æ˜ï¼šimpl&lt;T&gt;,åªæœ‰æå‰å£°æ˜äº†ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨Point&lt;T&gt;ä¸­ä½¿ç”¨å®ƒï¼Œè¿™æ ·Rustå°±çŸ¥é“Pointçš„å°–æ‹¬å·ä¸­çš„ç±»å‹æ˜¯æ³›å‹è€Œä¸æ˜¯å…·ä½“ç±»å‹ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™é‡Œçš„Point&lt;T&gt;ä¸åœ¨æ˜¯æ³›å‹å£°æ˜ï¼Œè€Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„ç»“æ„ä½“ç±»å‹ï¼Œå› ä¸ºæˆ‘ä»¬å®šä¹‰çš„ç»“æ„ä½“æ˜¯Point&lt;T&gt;,è€Œä¸æ˜¯Point</p>
<h5 id="ä¸ºå…·ä½“çš„æ³›å‹å®ç°æ–¹æ³•"><a href="#ä¸ºå…·ä½“çš„æ³›å‹å®ç°æ–¹æ³•" class="headerlink" title="ä¸ºå…·ä½“çš„æ³›å‹å®ç°æ–¹æ³•"></a>ä¸ºå…·ä½“çš„æ³›å‹å®ç°æ–¹æ³•</h5><p>å¯¹äº <code>Point&lt;T&gt;</code> ç±»å‹ï¼Œä½ ä¸ä»…èƒ½å®šä¹‰åŸºäº <code>T</code> çš„æ–¹æ³•ï¼Œè¿˜èƒ½é’ˆå¯¹ç‰¹å®šçš„å…·ä½“ç±»å‹ï¼Œè¿›è¡Œæ–¹æ³•å®šä¹‰ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> <span class="title class_">Point</span>&lt;<span class="type">f32</span>&gt; &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">distance_from_origin</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">f32</span> &#123;</span><br><span class="line">        (<span class="keyword">self</span>.x.<span class="title function_ invoke__">powi</span>(<span class="number">2</span>) + <span class="keyword">self</span>.y.<span class="title function_ invoke__">powi</span>(<span class="number">2</span>)).<span class="title function_ invoke__">sqrt</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™æ®µä»£ç æ„å‘³ç€ <code>Point&lt;f32&gt;</code> ç±»å‹ä¼šæœ‰ä¸€ä¸ªæ–¹æ³• <code>distance_from_origin</code>ï¼Œè€Œå…¶ä»– <code>T</code> ä¸æ˜¯ <code>f32</code> ç±»å‹çš„ <code>Point&lt;T&gt; </code>å®ä¾‹åˆ™æ²¡æœ‰å®šä¹‰æ­¤æ–¹æ³•ã€‚è¿™ä¸ªæ–¹æ³•è®¡ç®—ç‚¹å®ä¾‹ä¸åæ ‡<code>(0.0, 0.0)</code> ä¹‹é—´çš„è·ç¦»ï¼Œå¹¶ä½¿ç”¨äº†åªèƒ½ç”¨äºæµ®ç‚¹å‹çš„æ•°å­¦è¿ç®—ç¬¦ã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å°±èƒ½é’ˆå¯¹ç‰¹å®šçš„æ³›å‹ç±»å‹å®ç°æŸä¸ªç‰¹å®šçš„æ–¹æ³•ï¼Œå¯¹äºå…¶å®ƒæ³›å‹ç±»å‹åˆ™æ²¡æœ‰å®šä¹‰è¯¥æ–¹æ³•ã€‚</p>
<h5 id="constæ³›å‹-Rust1-51ç‰ˆæœ¬å¼•å…¥çš„ä¸»è¦ç‰¹å¾"><a href="#constæ³›å‹-Rust1-51ç‰ˆæœ¬å¼•å…¥çš„ä¸»è¦ç‰¹å¾" class="headerlink" title="constæ³›å‹(Rust1.51ç‰ˆæœ¬å¼•å…¥çš„ä¸»è¦ç‰¹å¾)"></a>constæ³›å‹(Rust1.51ç‰ˆæœ¬å¼•å…¥çš„ä¸»è¦ç‰¹å¾)</h5><p>ä»¥ä¸Šæ€»ç»“èµ·æ¥å°±æ˜¯ï¼šé’ˆå¯¹ç±»å‹å®ç°çš„æ³›å‹ï¼Œæ‰€æœ‰çš„æ³›å‹éƒ½æ˜¯ä¸ºäº†æŠ½è±¡ä¸åŒçš„ç±»å‹ï¼Œé‚£æœ‰æ²¡æœ‰é’ˆå¯¹å€¼çš„æ³›å‹ï¼Ÿ</p>
<p>æˆ‘ä»¬æ¥çœ‹ä¸‹é¢ï¼Œåœ¨æ•°ç»„ä¸­è¯´è¿‡[i32;2]å’Œ[i32;3]æ˜¯ä¸åŒçš„æ•°ç»„ç±»å‹ï¼Œæ¯”å¦‚ä¸‹é¢çš„ä»£ç </p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">display_array</span>(arr: [<span class="type">i32</span>; <span class="number">3</span>]) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, arr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">arr</span>: [<span class="type">i32</span>; <span class="number">3</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">    <span class="title function_ invoke__">display_array</span>(arr);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">arr</span>: [<span class="type">i32</span>; <span class="number">2</span>] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">    <span class="title function_ invoke__">display_array</span>(arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ç»“åˆä»£ç å’ŒæŠ¥é”™ï¼Œå¯ä»¥å¾ˆæ¸…æ¥šçš„çœ‹å‡ºï¼Œ<code>[i32; 3]</code> å’Œ <code>[i32; 2]</code> ç¡®å®æ˜¯ä¸¤ä¸ªå®Œå…¨ä¸åŒçš„ç±»å‹ï¼Œå› æ­¤æ— æ³•ç”¨åŒä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚</p>
<p>é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä¿®æ”¹ä»£ç ï¼Œè®©display_arrayèƒ½æ‰“å°ä»»æ„é•¿åº¦çš„i32æ•°ç»„:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">display_array</span>(arr: &amp;[<span class="type">i32</span>]) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, arr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">arr</span>: [<span class="type">i32</span>; <span class="number">3</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">    <span class="title function_ invoke__">display_array</span>(&amp;arr);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">arr</span>: [<span class="type">i32</span>; <span class="number">2</span>] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">    <span class="title function_ invoke__">display_array</span>(&amp;arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¾ˆç®€å•ï¼Œåªè¦ä½¿ç”¨æ•°ç»„åˆ‡ç‰‡ï¼Œç„¶åä¼ å…¥arrçš„ä¸å¯å˜å¼•ç”¨å³å¯</p>
<p>æ¥ç€ï¼Œå°†i32æ”¹æˆæ‰€æœ‰ç±»å‹çš„æ•°ç»„:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">display_array</span>&lt;T: std::fmt::<span class="built_in">Debug</span>&gt;(arr: &amp;[T]) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, arr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">arr</span>: [<span class="type">i32</span>; <span class="number">3</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">    <span class="title function_ invoke__">display_array</span>(&amp;arr);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">arr</span>: [<span class="type">i32</span>; <span class="number">2</span>] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">    <span class="title function_ invoke__">display_array</span>(&amp;arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯éœ€è¦å¯¹TåŠ ä¸€ä¸ªé™åˆ¶std::fmt::Debug,è¯¥é™åˆ¶è¡¨æ˜Tå¯ä»¥ç”¨åœ¨println!(â€œ{:?}â€,arr)ä¸­ï¼Œå› ä¸º{:?}å½¢å¼çš„æ ¼å¼åŒ–è¾“å‡ºéœ€è¦arrå®ç°è¯¥ç‰¹å¾</p>
<p>é€šè¿‡å¼•ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆè½»æ¾çš„è§£å†³å¤„ç†ä»»ä½•ç±»å‹æ•°ç»„çš„é—®é¢˜ï¼Œä½†æ˜¯å¦‚æœåœ¨æŸäº›åœºæ™¯ä¸‹å¼•ç”¨ä¸é€‚å®œç”¨æˆ–è€…å¹²è„†ä¸èƒ½ç”¨å‘¢ï¼Ÿä½ ä»¬çŸ¥é“ä¸ºä»€ä¹ˆä»¥å‰ Rust çš„ä¸€äº›æ•°ç»„åº“ï¼Œåœ¨ä½¿ç”¨çš„æ—¶å€™éƒ½é™å®šé•¿åº¦ä¸è¶…è¿‡ 32 å—ï¼Ÿå› ä¸ºå®ƒä»¬ä¼šä¸ºæ¯ä¸ªé•¿åº¦éƒ½å•ç‹¬å®ç°ä¸€ä¸ªå‡½æ•°ï¼Œç®€ç›´ã€‚ã€‚ã€‚æ¯«æ— äººæ€§ã€‚éš¾é“æ²¡æœ‰ä»€ä¹ˆåŠæ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜å—ï¼Ÿ</p>
<p>å¥½åœ¨ï¼Œç°åœ¨å’±ä»¬æœ‰äº† const æ³›å‹ï¼Œä¹Ÿå°±æ˜¯é’ˆå¯¹å€¼çš„æ³›å‹ï¼Œæ­£å¥½å¯ä»¥ç”¨äºå¤„ç†æ•°ç»„é•¿åº¦çš„é—®é¢˜ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">display_array</span>&lt;T: std::fmt::<span class="built_in">Debug</span>, <span class="keyword">const</span> N: <span class="type">usize</span>&gt;(arr: [T; N]) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>, arr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">arr</span>: [<span class="type">i32</span>; <span class="number">3</span>] = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">    <span class="title function_ invoke__">display_array</span>(arr);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">arr</span>: [<span class="type">i32</span>; <span class="number">2</span>] = [<span class="number">1</span>, <span class="number">2</span>];</span><br><span class="line">    <span class="title function_ invoke__">display_array</span>(arr);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚ä¸Šï¼Œæˆ‘ä»¬å¯¹äº†ä¸€è¯¥ç±»å‹ä¸º[T;N]çš„æ•°ç»„ï¼Œå…¶ä¸­Tæ˜¯ä¸€ä¸ªåŸºäºç±»å‹çš„æ³›å‹å‚æ•°ï¼Œè¿™ä¸ªå’Œä¹‹å‰è®²çš„æ³›å‹æ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œè€Œé‡ç‚¹åœ¨äºNï¼Œæ˜¯ä¸€ä¸ªåŸºäºå€¼çš„æ³›å‹å‚æ•°ï¼Œå› ä¸ºå®ƒç”¨æ¥æ›¿ä»£çš„æ˜¯æ•°ç»„çš„é•¿åº¦ã€‚</p>
<p>Nå°±æ˜¯constæ³›å‹ï¼Œå®šä¹‰çš„è¯­æ³•æ˜¯const Nï¼šusizeï¼Œè¡¨ç¤ºconstæ³›å‹N,å®ƒåŸºäºçš„å€¼æ˜¯usize</p>
<h5 id="constæ³›å‹è¡¨è¾¾å¼"><a href="#constæ³›å‹è¡¨è¾¾å¼" class="headerlink" title="constæ³›å‹è¡¨è¾¾å¼"></a>constæ³›å‹è¡¨è¾¾å¼</h5><p>å‡è®¾æˆ‘ä»¬æŸä¸ªä»£ç éœ€è¦å†å†…å­˜å¾ˆå°çš„å¹³å°ä¸Šå·¥ä½œï¼Œå› æ­¤éœ€è¦é™åˆ¶å‡½æ•°å‚æ•°å ç”¨çš„å†…å­˜å¤§å°ï¼Œæ­¤æ—¶å°±å¯ä»¥ä½¿ç”¨constæ³›å‹è¡¨è¾¾å¼æ¥å®ç°:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç›®å‰åªèƒ½åœ¨nightlyç‰ˆæœ¬ä¸‹ä½¿ç”¨</span></span><br><span class="line"><span class="meta">#![allow(incomplete_features)]</span></span><br><span class="line"><span class="meta">#![feature(generic_const_exprs)]</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">something</span>&lt;T&gt;(val: T)</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">    Assert&lt;&#123; core::mem::size_of::&lt;T&gt;() &lt; <span class="number">768</span> &#125;&gt;: IsTrue,</span><br><span class="line">    <span class="comment">//       ^-----------------------------^ è¿™é‡Œæ˜¯ä¸€ä¸ª const è¡¨è¾¾å¼ï¼Œæ¢æˆå…¶å®ƒçš„ const è¡¨è¾¾å¼ä¹Ÿå¯ä»¥</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="title function_ invoke__">something</span>([<span class="number">0u8</span>; <span class="number">0</span>]); <span class="comment">// ok</span></span><br><span class="line">    <span class="title function_ invoke__">something</span>([<span class="number">0u8</span>; <span class="number">512</span>]); <span class="comment">// ok</span></span><br><span class="line">    <span class="title function_ invoke__">something</span>([<span class="number">0u8</span>; <span class="number">1024</span>]); <span class="comment">// ç¼–è¯‘é”™è¯¯ï¼Œæ•°ç»„é•¿åº¦æ˜¯1024å­—èŠ‚ï¼Œè¶…è¿‡äº†768å­—èŠ‚çš„å‚æ•°é•¿åº¦é™åˆ¶</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ---</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">enum</span> <span class="title class_">Assert</span>&lt;<span class="keyword">const</span> CHECK: <span class="type">bool</span>&gt; &#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">trait</span> <span class="title class_">IsTrue</span> &#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">IsTrue</span> <span class="keyword">for</span> <span class="title class_">Assert</span>&lt;<span class="literal">true</span>&gt; &#123;</span><br><span class="line">    <span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="const-fn"><a href="#const-fn" class="headerlink" title="const  fn"></a>const  fn</h5><p>å¸¸é‡å‡½æ•°ï¼Œconst fnå…è®¸æˆ‘ä»¬åœ¨ç¼–è¯‘æœŸå¯¹å‡½æ•°è¿›è¡Œæ±‚å€¼ï¼Œè¿›è€Œå®ç°æ›´é«˜æ•ˆã€çµæ´»çš„ä»£ç è®¾è®¡</p>
<p>ä½œç”¨ï¼šåœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ç¼–è¯‘æœŸå°±è®¡ç®—å‡ºä¸€äº›å€¼ï¼Œä»¥æé«˜è¿è¡Œæ—¶çš„æ€§èƒ½æˆ–æ»¡è¶³æŸäº›ç¼–è¯‘æœŸçš„çº¦æŸæ¡ä»¶ã€‚ä¾‹å¦‚ï¼Œå®šä¹‰æ•°ç»„çš„é•¿åº¦ã€è®¡ç®—å¸¸é‡å€¼ç­‰ã€‚</p>
<p>const fnåŸºæœ¬ç”¨æ³•:</p>
<p>è¦å®šä¹‰ä¸€ä¸ªå¸¸é‡å‡½æ•°ï¼Œåªéœ€è¦åœ¨å‡½æ•°å£°æ˜å‰åŠ ä¸Šconstå…³é”®å­—</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="keyword">fn</span> <span class="title function_">add</span>(a: <span class="type">usize</span>, b: <span class="type">usize</span>) <span class="punctuation">-&gt;</span> <span class="type">usize</span> &#123;</span><br><span class="line">    a + b</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> RESULT: <span class="type">usize</span> = <span class="title function_ invoke__">add</span>(<span class="number">5</span>, <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;The result is: &#123;&#125;&quot;</span>, RESULT);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h5 id="const-fnçš„é™åˆ¶"><a href="#const-fnçš„é™åˆ¶" class="headerlink" title="const fnçš„é™åˆ¶"></a>const fnçš„é™åˆ¶</h5><p>ç”±äºå…¶åœ¨ç¼–è¯‘æœŸæ‰§è¡Œï¼Œä»¥ç¡®ä¿å‡½æ•°èƒ½åœ¨ç¼–è¯‘æœŸè¢«å®‰å…¨åœ°æ±‚å€¼ï¼Œå› æ­¤æœ‰ä¸€äº›é™åˆ¶ï¼Œä¾‹å¦‚ï¼Œä¸å¯å°†éšæœºæ•°ç”Ÿæˆå™¨å†™æˆ <code>const fn</code></p>
<p>æ— è®ºåœ¨ç¼–è¯‘æ—¶è¿˜æ˜¯è¿è¡Œæ—¶è°ƒç”¨const fnï¼Œå®ƒä»¬çš„ç»“æœæ€»æ˜¯ç›¸åŒçš„ï¼Œå³æ˜¯å¤šæ¬¡è°ƒç”¨ä¹Ÿä¸€æ ·ã€‚å”¯ä¸€çš„ä¾‹å¤–æ˜¯ï¼Œå¦‚æœä½ åœ¨æç«¯æƒ…å†µä¸‹è¿›è¡Œå¤æ‚çš„æµ®ç‚¹æ“ä½œï¼Œå¯èƒ½ä¼šå¾—åˆ°ï¼ˆéå¸¸è½»å¾®çš„ï¼‰ä¸åŒç»“æ„ã€‚å› æ­¤ï¼Œä¸å»ºè®®ä½¿ <code>æ•°ç»„é•¿åº¦ (arr.len())</code> å’Œ <code>Enumåˆ¤åˆ«å¼</code> ä¾èµ–äºæµ®ç‚¹è®¡ç®—ã€‚</p>
<h5 id="ç»“åˆconst-fnä¸constæ³›å‹"><a href="#ç»“åˆconst-fnä¸constæ³›å‹" class="headerlink" title="ç»“åˆconst fnä¸constæ³›å‹"></a>ç»“åˆconst fnä¸constæ³›å‹</h5><p>å°† <code>const fn</code> ä¸ <code>const æ³›å‹</code> ç»“åˆï¼Œå¯ä»¥å®ç°æ›´åŠ çµæ´»å’Œé«˜æ•ˆçš„ä»£ç è®¾è®¡ã€‚ä¾‹å¦‚ï¼Œåˆ›å»ºä¸€ä¸ªå›ºå®šå¤§å°çš„ç¼“å†²åŒºç»“æ„ï¼Œå…¶ä¸­ç¼“å†²åŒºå¤§å°ç”±ç¼–è¯‘æœŸè®¡ç®—ç¡®å®šï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">struct</span> <span class="title class_">Buffer</span>&lt;<span class="keyword">const</span> N: <span class="type">usize</span>&gt; &#123;</span><br><span class="line">    data: [<span class="type">u8</span>; N],</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="keyword">fn</span> <span class="title function_">compute_buffer_size</span>(factor: <span class="type">usize</span>) <span class="punctuation">-&gt;</span> <span class="type">usize</span> &#123;</span><br><span class="line">    factor * <span class="number">1024</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">const</span> SIZE: <span class="type">usize</span> = <span class="title function_ invoke__">compute_buffer_size</span>(<span class="number">4</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">buffer</span> = Buffer::&lt;SIZE&gt; &#123;</span><br><span class="line">        data: [<span class="number">0</span>; SIZE],</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Buffer size: &#123;&#125; bytes&quot;</span>, buffer.data.<span class="title function_ invoke__">len</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œ<code>compute_buffer_size</code> æ˜¯ä¸€ä¸ªå¸¸é‡å‡½æ•°ï¼Œå®ƒæ ¹æ®ä¼ å…¥çš„ <code>factor</code> è®¡ç®—ç¼“å†²åŒºçš„å¤§å°ã€‚åœ¨ <code>main</code> å‡½æ•°ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ <code>compute_buffer_size(4)</code> æ¥è®¡ç®—ç¼“å†²åŒºå¤§å°ä¸º 4096 å­—èŠ‚ï¼Œå¹¶å°†å…¶ä½œä¸ºæ³›å‹å‚æ•°ä¼ é€’ç»™ <code>Buffer</code> ç»“æ„ä½“ã€‚è¿™æ ·ï¼Œç¼“å†²åŒºçš„å¤§å°åœ¨ç¼–è¯‘æœŸå°±è¢«ç¡®å®šä¸‹æ¥ï¼Œé¿å…äº†è¿è¡Œæ—¶çš„è®¡ç®—å¼€é”€ã€‚</p>
<h5 id="æ³›å‹çš„æ€§èƒ½"><a href="#æ³›å‹çš„æ€§èƒ½" class="headerlink" title="æ³›å‹çš„æ€§èƒ½"></a>æ³›å‹çš„æ€§èƒ½</h5><p>Rusté€šè¿‡åœ¨ç¼–è¯‘æ—¶è¿›è¡Œæ³›å‹ä»£ç çš„å•æ€åŒ–æ¥ä¿è¯æ•ˆç‡ã€‚å•æ€åŒ–æ˜¯ä¸€ä¸ªé€šè¿‡å¡«å……ç¼–è¯‘æ—¶ä½¿ç”¨çš„å…·ä½“ç±»å‹ï¼Œå°†é€šç”¨çš„ä»£ç è½¬æ¢ä¸ºç‰¹å®šä»£ç çš„å›½åŸ</p>
<p>ç¼–è¯‘å™¨æ‰€åšçš„å·¥ä½œæ­£å¥½ä¸æˆ‘ä»¬åˆ›å»ºæ³›å‹å‡½æ•°çš„æ­¥éª¤ç›¸åï¼Œç¼–è¯‘å™¨å¯»æ‰¾æ‰€æœ‰æ³›å‹ä»£ç è¢«è°ƒç”¨çš„ä½ç½®å¹¶é’ˆå¯¹å…·ä½“ç±»å‹ç”Ÿæˆä»£ç ã€‚</p>
<p>æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€ä¸ªä½¿ç”¨æ ‡å‡†åº“ä¸­Optionæšä¸¾çš„ä¾‹å­:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#![allow(unused)]</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line"><span class="keyword">let</span> <span class="variable">integer</span> = <span class="title function_ invoke__">Some</span>(<span class="number">5</span>);</span><br><span class="line"><span class="keyword">let</span> <span class="variable">float</span> = <span class="title function_ invoke__">Some</span>(<span class="number">5.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å½“ Rust ç¼–è¯‘è¿™äº›ä»£ç çš„æ—¶å€™ï¼Œå®ƒä¼šè¿›è¡Œå•æ€åŒ–ã€‚ç¼–è¯‘å™¨ä¼šè¯»å–ä¼ é€’ç»™ <code>Option&lt;T&gt;</code> çš„å€¼å¹¶å‘ç°æœ‰ä¸¤ç§ <code>Option&lt;T&gt;</code>ï¼šä¸€ç§å¯¹åº” <code>i32</code> å¦ä¸€ç§å¯¹åº” <code>f64</code>ã€‚ä¸ºæ­¤ï¼Œå®ƒä¼šå°†æ³›å‹å®šä¹‰ <code>Option&lt;T&gt;</code> å±•å¼€ä¸º <code>Option_i32</code> å’Œ <code>Option_f64</code>ï¼Œæ¥ç€å°†æ³›å‹å®šä¹‰æ›¿æ¢ä¸ºè¿™ä¸¤ä¸ªå…·ä½“çš„å®šä¹‰ã€‚</p>
<p>ç¼–è¯‘å™¨ç”Ÿæˆçš„å•æ€åŒ–ç‰ˆæœ¬çš„ä»£ç çœ‹èµ·æ¥åƒè¿™æ ·ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">Option_i32</span> &#123;</span><br><span class="line">    <span class="title function_ invoke__">Some</span>(<span class="type">i32</span>),</span><br><span class="line">    <span class="literal">None</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">Option_f64</span> &#123;</span><br><span class="line">    <span class="title function_ invoke__">Some</span>(<span class="type">f64</span>),</span><br><span class="line">    <span class="literal">None</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">integer</span> = Option_i32::<span class="title function_ invoke__">Some</span>(<span class="number">5</span>);</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">float</span> = Option_f64::<span class="title function_ invoke__">Some</span>(<span class="number">5.0</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ³›å‹æ¥ç¼–å†™ä¸é‡å¤çš„ä»£ç ï¼Œè€Œ Rust å°†ä¼šä¸ºæ¯ä¸€ä¸ªå®ä¾‹ç¼–è¯‘å…¶ç‰¹å®šç±»å‹çš„ä»£ç ã€‚è¿™æ„å‘³ç€åœ¨ä½¿ç”¨æ³›å‹æ—¶æ²¡æœ‰è¿è¡Œæ—¶å¼€é”€ï¼›å½“ä»£ç è¿è¡Œï¼Œå®ƒçš„æ‰§è¡Œæ•ˆç‡å°±è·Ÿå¥½åƒæ‰‹å†™æ¯ä¸ªå…·ä½“å®šä¹‰çš„é‡å¤ä»£ç ä¸€æ ·ã€‚è¿™ä¸ªå•æ€åŒ–è¿‡ç¨‹æ­£æ˜¯ Rust æ³›å‹åœ¨è¿è¡Œæ—¶æå…¶é«˜æ•ˆçš„åŸå› ã€‚</p>
<h4 id="ç‰¹å¾Trait"><a href="#ç‰¹å¾Trait" class="headerlink" title="ç‰¹å¾Trait"></a>ç‰¹å¾Trait</h4><p>è·Ÿæ¥å£ç±»ä¼¼</p>
<p>åœ¨ä¹‹å‰çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¹Ÿå¤šæ¬¡è§è¿‡ç‰¹å¾çš„ä½¿ç”¨ï¼Œä¾‹å¦‚ <code>#[derive(Debug)]</code>ï¼Œå®ƒåœ¨æˆ‘ä»¬å®šä¹‰çš„ç±»å‹(<code>struct</code>)ä¸Šè‡ªåŠ¨æ´¾ç”Ÿ <code>Debug</code> ç‰¹å¾ï¼Œæ¥ç€å¯ä»¥ä½¿ç”¨ <code>println!(&quot;&#123;:?&#125;&quot;, x)</code> æ‰“å°è¿™ä¸ªç±»å‹ï¼›å†ä¾‹å¦‚ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">add</span>&lt;T: std::ops::Add&lt;Output = T&gt;&gt;(a:T, b:T) <span class="punctuation">-&gt;</span> T &#123;</span><br><span class="line">    a + b</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>é€šè¿‡ <code>std::ops::Add</code> ç‰¹å¾æ¥é™åˆ¶ <code>T</code>ï¼Œåªæœ‰ <code>T</code> å®ç°äº† <code>std::ops::Add</code> æ‰èƒ½è¿›è¡Œåˆæ³•çš„åŠ æ³•æ“ä½œï¼Œæ¯•ç«Ÿä¸æ˜¯æ‰€æœ‰çš„ç±»å‹éƒ½èƒ½è¿›è¡Œç›¸åŠ ã€‚</p>
<p>è¿™äº›éƒ½è¯´æ˜ä¸€ä¸ªé“ç†ï¼Œç‰¹å¾å®šä¹‰äº†<strong>ä¸€ç»„å¯ä»¥è¢«å…±äº«çš„è¡Œä¸ºï¼Œåªè¦å®ç°äº†ç‰¹å¾ï¼Œä½ å°±èƒ½ä½¿ç”¨è¿™ç»„è¡Œä¸º</strong>ã€‚</p>
<h5 id="å®šä¹‰-1"><a href="#å®šä¹‰-1" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h5><p>å¦‚æœä¸åŒçš„ç±»å‹å…·æœ‰ç›¸åŒçš„è¡Œä¸ºï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªç‰¹å¾ï¼Œç„¶åä¸ºè¿™äº›ç±»å‹å®ç°è¯¥ç‰¹å¾ã€‚<strong>å®šä¹‰ç‰¹å¾</strong>æ˜¯æŠŠä¸€äº›æ–¹æ³•ç»„åˆåœ¨ä¸€èµ·ï¼Œç›®çš„æ˜¯å®šä¹‰ä¸€ä¸ªå®ç°æŸäº›ç›®æ ‡æ‰€å¿…éœ€çš„è¡Œä¸ºçš„é›†åˆã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">trait</span> <span class="title class_">Summary</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">summarize</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œä½¿ç”¨ <code>trait</code> å…³é”®å­—æ¥å£°æ˜ä¸€ä¸ªç‰¹å¾ï¼Œ<code>Summary</code> æ˜¯ç‰¹å¾åã€‚åœ¨å¤§æ‹¬å·ä¸­å®šä¹‰äº†è¯¥ç‰¹å¾çš„æ‰€æœ‰æ–¹æ³•ï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­æ˜¯ï¼š <code>fn summarize(&amp;self) -&gt; String</code>ã€‚</p>
<p>ç‰¹å¾åªå®šä¹‰è¡Œä¸ºçœ‹èµ·æ¥æ€ä¹ˆæ ·ï¼Œè€Œä¸å¯¹è¡Œä¸ºå…·ä½“æ˜¯æ€ä¹ˆæ ·çš„ã€‚å› æ­¤ï¼Œæˆ‘ä»¬åªå®šä¹‰ç‰¹å¾æ–¹æ³•çš„å‰é¢ï¼Œè€Œä¸è¿›è¡Œå®ç°ï¼Œæ­¤æ—¶æ–¹æ³•ç­¾åç»“å°¾æ˜¯<code>;</code>ï¼Œè€Œä¸æ˜¯ä¸€ä¸ª{}</p>
<h5 id="ä¸ºç±»å‹å®ç°ç‰¹å¾"><a href="#ä¸ºç±»å‹å®ç°ç‰¹å¾" class="headerlink" title="ä¸ºç±»å‹å®ç°ç‰¹å¾"></a>ä¸ºç±»å‹å®ç°ç‰¹å¾</h5><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">trait</span> <span class="title class_">Summary</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">summarize</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Post</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> title: <span class="type">String</span>, <span class="comment">// æ ‡é¢˜</span></span><br><span class="line">    <span class="keyword">pub</span> author: <span class="type">String</span>, <span class="comment">// ä½œè€…</span></span><br><span class="line">    <span class="keyword">pub</span> content: <span class="type">String</span>, <span class="comment">// å†…å®¹</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Summary</span> <span class="keyword">for</span> <span class="title class_">Post</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">summarize</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">        <span class="built_in">format!</span>(<span class="string">&quot;æ–‡ç« &#123;&#125;, ä½œè€…æ˜¯&#123;&#125;&quot;</span>, <span class="keyword">self</span>.title, <span class="keyword">self</span>.author)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Weibo</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> username: <span class="type">String</span>,</span><br><span class="line">    <span class="keyword">pub</span> content: <span class="type">String</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Summary</span> <span class="keyword">for</span> <span class="title class_">Weibo</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">summarize</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">        <span class="built_in">format!</span>(<span class="string">&quot;&#123;&#125;å‘è¡¨äº†å¾®åš&#123;&#125;&quot;</span>, <span class="keyword">self</span>.username, <span class="keyword">self</span>.content)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å®ç°ç‰¹å¾çš„è¯­æ³•ä¸ä¸ºç»“æ„ä½“ã€æšä¸¾å®ç°æ–¹æ³•å¾ˆåƒ:impl Summary for Postï¼Œæˆ‘ä»¬æŠŠå®ƒç§°åšâ€ä¸ºPostç±»å‹å®ç°Summaryç‰¹å¾â€ï¼Œç„¶ååœ¨implå†…å®ç°è¯¥ç‰¹å¾çš„å…·ä½“æ–¹æ³•</p>
<p>æ¥ä¸‹æ¥å°±æ˜¯è°ƒç”¨ç‰¹å¾æ–¹æ³•:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">post</span> = Post&#123;title: <span class="string">&quot;Rustè¯­è¨€ç®€ä»‹&quot;</span>.<span class="title function_ invoke__">to_string</span>(),author: <span class="string">&quot;Sunface&quot;</span>.<span class="title function_ invoke__">to_string</span>(), content: <span class="string">&quot;Rustæ£’æäº†!&quot;</span>.<span class="title function_ invoke__">to_string</span>()&#125;;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">weibo</span> = Weibo&#123;username: <span class="string">&quot;sunface&quot;</span>.<span class="title function_ invoke__">to_string</span>(),content: <span class="string">&quot;å¥½åƒå¾®åšæ²¡Tweetå¥½ç”¨&quot;</span>.<span class="title function_ invoke__">to_string</span>()&#125;;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>,post.<span class="title function_ invoke__">summarize</span>());</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;&#125;&quot;</span>,weibo.<span class="title function_ invoke__">summarize</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h6 id="ç‰¹æ€§å®šä¹‰ä¸å®ç°çš„ä½ç½®-å­¤å„¿æ³•åˆ™"><a href="#ç‰¹æ€§å®šä¹‰ä¸å®ç°çš„ä½ç½®-å­¤å„¿æ³•åˆ™" class="headerlink" title="ç‰¹æ€§å®šä¹‰ä¸å®ç°çš„ä½ç½®(å­¤å„¿æ³•åˆ™)"></a><strong>ç‰¹æ€§å®šä¹‰ä¸å®ç°çš„ä½ç½®(å­¤å„¿æ³•åˆ™)</strong></h6><p>ä¸Šé¢æˆ‘ä»¬å°†<code>Summary</code>å®šä¹‰æˆäº†pubå…¬å¼€çš„ï¼Œè¿™æ ·ï¼Œå¦‚æœä»–äººæƒ³è¦ä½¿ç”¨æˆ‘ä»¬çš„ <code>Summary</code> ç‰¹å¾ï¼Œåˆ™å¯ä»¥å¼•å…¥åˆ°ä»–ä»¬çš„åŒ…ä¸­ï¼Œç„¶åå†è¿›è¡Œå®ç°ã€‚</p>
<p>å…³äºç‰¹å¾å®ç°ä¸å®šä¹‰çš„ä½ç½®ï¼Œ<strong>å¦‚æœä½ æƒ³è¦ä¸ºç±»å‹Aå®ç°ç‰¹å¾Tï¼Œé‚£ä¹ˆAæˆ–è€…Tè‡³å°‘æœ‰ä¸€ä¸ªæ˜¯åœ¨å½“å‰ä½œç”¨åŸŸä¸­å®šä¹‰çš„</strong>ï¼Œä¾‹å¦‚æˆ‘ä»¬å¯ä»¥ä¸ºä¸Šé¢çš„ <code>Post</code> ç±»å‹å®ç°æ ‡å‡†åº“ä¸­çš„ <code>Display</code> ç‰¹å¾ï¼Œè¿™æ˜¯å› ä¸º <code>Post</code> ç±»å‹å®šä¹‰åœ¨å½“å‰çš„ä½œç”¨åŸŸä¸­ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨å½“å‰åŒ…ä¸­ä¸º <code>String</code> ç±»å‹å®ç° <code>Summary</code> ç‰¹å¾ï¼Œå› ä¸º <code>Summary</code> å®šä¹‰åœ¨å½“å‰ä½œç”¨åŸŸä¸­ã€‚</p>
<p>ä½†æ˜¯ä½ æ— æ³•åœ¨å½“å‰ä½œç”¨åŸŸä¸­ï¼Œä¸º <code>String</code> ç±»å‹å®ç° <code>Display</code> ç‰¹å¾ï¼Œå› ä¸ºå®ƒä»¬ä¿©éƒ½å®šä¹‰åœ¨æ ‡å‡†åº“ä¸­ï¼Œå…¶å®šä¹‰æ‰€åœ¨çš„ä½ç½®éƒ½ä¸åœ¨å½“å‰ä½œç”¨åŸŸï¼Œè·Ÿä½ åŠæ¯›é’±å…³ç³»éƒ½æ²¡æœ‰ï¼Œçœ‹çœ‹å°±è¡Œäº†ã€‚</p>
<p>è¯¥è§„åˆ™è¢«ç§°ä¸º<strong>å­¤å„¿è§„åˆ™</strong>ï¼Œå¯ä»¥ç¡®ä¿å…¶å®ƒäººç¼–å†™çš„ä»£ç ä¸ä¼šç ´åä½ çš„ä»£ç ï¼Œä¹Ÿç¡®ä¿äº†ä½ ä¸ä¼šè«åå…¶å¦™å°±ç ´åäº†é£é©¬ç‰›ä¸ç›¸åŠçš„ä»£ç </p>
<h6 id="é»˜è®¤å®ç°"><a href="#é»˜è®¤å®ç°" class="headerlink" title="é»˜è®¤å®ç°"></a>é»˜è®¤å®ç°</h6><p>æˆ‘ä»¬å¯ä»¥åœ¨ç‰¹å¾ä¸­å®šä¹‰å…·æœ‰é»˜è®¤å®ç°çš„æ–¹æ³•ï¼Œè¿™æ ·å…¶å®ƒç±»å‹æ— éœ€å†å®ç°è¯¥æ–¹æ³•ï¼Œæˆ–è€…ä¹Ÿå¯ä»¥é€‰æ‹©é‡è½½è¯¥æ–¹æ³•:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">trait</span> <span class="title class_">Summary</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">summarize</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">        <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;(Read more...)&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä¸ºSummaryå®šä¹‰äº†ä¸€ä¸ªé»˜è®¤å®ç°ï¼Œä¸‹é¢æˆ‘ä»¬ç¼–å†™æ®µä»£ç æ¥æµ‹è¯•ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> <span class="title class_">Summary</span> <span class="keyword">for</span> <span class="title class_">Post</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Summary</span> <span class="keyword">for</span> <span class="title class_">Weibo</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">summarize</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">        <span class="built_in">format!</span>(<span class="string">&quot;&#123;&#125;å‘è¡¨äº†å¾®åš&#123;&#125;&quot;</span>, <span class="keyword">self</span>.username, <span class="keyword">self</span>.content)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å‘ç°postä½¿ç”¨äº†é»˜è®¤å®ç°ï¼Œè€ŒWeiboé‡è½½äº†è¯¥æ–¹æ³•</p>
<p>é»˜è®¤å®ç°å…è®¸è°ƒç”¨ç›¸åŒç‰¹å¾ä¸­çš„å…¶ä»–æ–¹æ³•ï¼Œå“ªæ€•è¿™äº›æ–¹æ³•æ²¡æœ‰é»˜è®¤å®ç°ã€‚å¦‚æ­¤ï¼Œç‰¹å¾å¯ä»¥æä¾›å¾ˆå¤šæœ‰ç”¨çš„åŠŸèƒ½è€Œåªéœ€è¦å®ç°æŒ‡å®šçš„ä¸€å°éƒ¨åˆ†å†…å®¹ã€‚</p>
<h5 id="ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°å‚æ•°"><a href="#ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°å‚æ•°" class="headerlink" title="ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°å‚æ•°"></a><strong>ä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°å‚æ•°</strong></h5><p>ä¹‹å‰æåˆ°ï¼Œç‰¹å¾ä»…ä»…æ˜¯ç”¨æ¥å®ç°æ–¹æ³•ï¼Œæœ‰äº›æµªè´¹</p>
<p>ç°åœ¨æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œä½¿ç”¨ç‰¹å¾ä½œä¸ºå‡½æ•°å‚æ•°ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">notify</span>(item: &amp;<span class="keyword">impl</span> <span class="title class_">Summary</span>) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Breaking news! &#123;&#125;&quot;</span>, item.<span class="title function_ invoke__">summarize</span>());</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><code>impl Summary </code>ï¼Œæ„æ€æ˜¯å®ç°äº†Summaryç‰¹å¾çš„ itemå‚æ•°</p>
<h5 id="ç‰¹å¾çº¦æŸ"><a href="#ç‰¹å¾çº¦æŸ" class="headerlink" title="ç‰¹å¾çº¦æŸ"></a>ç‰¹å¾çº¦æŸ</h5><p>è™½ç„¶impl Traitè¿™ç§è¯­æ³•éå¸¸å¥½ç†è§£ï¼Œä½†å®ƒå®é™…ä¸ŠçŸ¥è¯†ä¸€ä¸ªè¯­æ³•ç³–</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">notify</span>&lt;T: Summary&gt;(item:&amp;T)&#123;</span><br><span class="line"><span class="built_in">println!</span>(<span class="string">&quot;Breaking news!&#123;&#125;&quot;</span>,item.<span class="title function_ invoke__">summarize</span>());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>çœŸæ­£å®Œæ•´ä¹¦å†™å½¢å¼å¦‚ä¸Šæ‰€ç¤ºï¼Œå½¢å¦‚Tï¼šSummaryè¢«ç§°ä¸º<strong>ç‰¹å¾çº¦æŸ</strong></p>
<p>åœ¨å¤æ‚çš„åœºæ™¯ï¼Œç‰¹å¾çº¦æŸå¯ä»¥è®©æˆ‘ä»¬æ‹¥æœ‰æ›´å¤§çš„çµæ´»æ€§å’Œè¯­æ³•è¡¨ç°èƒ½åŠ›ï¼Œä¾‹å¦‚ä¸€ä¸ªå‡½æ•°æ¥å—ä¸¤ä¸ª <code>impl Summary</code> çš„å‚æ•°ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">notify</span>(item1: &amp;<span class="keyword">impl</span> <span class="title class_">Summary</span>, item2: &amp;<span class="keyword">impl</span> <span class="title class_">Summary</span>) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>å¦‚æœå‡½æ•°ä¸¤ä¸ªå‚æ•°æ˜¯ä¸åŒçš„ç±»å‹ï¼Œé‚£ä¹ˆä¸Šé¢çš„æ–¹æ³•å¾ˆå¥½ï¼Œåªè¦è¿™ä¸¤ä¸ªç±»å‹éƒ½å®ç°äº† <code>Summary</code> ç‰¹å¾å³å¯ã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦å¼ºåˆ¶å‡½æ•°çš„ä¸¤ä¸ªå‚æ•°æ˜¯åŒä¸€ç±»å‹å‘¢ï¼Ÿä¸Šé¢çš„è¯­æ³•å°±æ— æ³•åšåˆ°è¿™ç§é™åˆ¶ï¼Œæ­¤æ—¶æˆ‘ä»¬åªèƒ½ä½¿ç‰¹å¾çº¦æŸæ¥å®ç°ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">notify</span>&lt;T: Summary&gt;(item1: &amp;T, item2: &amp;T) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>æ³›å‹ç±»å‹ <code>T</code> è¯´æ˜äº† <code>item1</code> å’Œ <code>item2</code> å¿…é¡»æ‹¥æœ‰åŒæ ·çš„ç±»å‹ï¼ŒåŒæ—¶ <code>T: Summary</code> è¯´æ˜äº† <code>T</code> å¿…é¡»å®ç° <code>Summary</code> ç‰¹å¾ã€‚</p>
<h6 id="å¤šé‡çº¦æŸ"><a href="#å¤šé‡çº¦æŸ" class="headerlink" title="å¤šé‡çº¦æŸ"></a>å¤šé‡çº¦æŸ</h6><p>é™¤äº†å½“çº¦æŸæ¡ä»¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥æŒ‡å®šå¤šä¸ªçº¦æŸæ¡ä»¶ï¼Œä¾‹å¦‚é™¤äº†è®©å‚æ•°å®ç°Summaryç‰¹å¾å¤– ï¼Œè¿˜å¯ä»¥è®©å‚æ•°å®ç°Displayç‰¹å¾ä»¥æ§åˆ¶å®ƒçš„æ ¼å¼åŒ–è¾“å‡ºï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">notify</span>(item: &amp;(<span class="keyword">impl</span> <span class="title class_">Summary</span> + Display)) &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>é™¤äº†ä¸Šè¿°çš„è¯­æ³•ç³–å½¢å¼ï¼Œè¿˜èƒ½ä½¿ç”¨ç‰¹å¾çº¦æŸçš„å½¢å¼ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pub fn notify&lt;T: Summary + Display&gt;(item: &amp;T) &#123;&#125;</span><br></pre></td></tr></table></figure>



<h6 id="Whereçº¦æŸ"><a href="#Whereçº¦æŸ" class="headerlink" title="Whereçº¦æŸ"></a>Whereçº¦æŸ</h6><p>å½“ç‰¹å¾çº¦æŸå˜å¾—å¾ˆå¤šæ—¶ï¼Œå‡½æ•°çš„ç­¾åå°†å˜å¾—å¾ˆå¤æ‚ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">some_function</span>&lt;T: Display + <span class="built_in">Clone</span>, U: <span class="built_in">Clone</span> + <span class="built_in">Debug</span>&gt;(t: &amp;T, u: &amp;U) <span class="punctuation">-&gt;</span> <span class="type">i32</span> &#123;&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸¥æ ¼æ¥è¯´ï¼Œä¸Šé¢çš„ä¾‹å­è¿˜æ˜¯ä¸å¤Ÿå¤æ‚ï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜æ˜¯èƒ½å¯¹å…¶åšä¸€äº›å½¢å¼ä¸Šçš„æ”¹è¿›ï¼Œé€šè¿‡ <code>where</code>ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">some_function</span>&lt;T, U&gt;(t: &amp;T, u: &amp;U) <span class="punctuation">-&gt;</span> <span class="type">i32</span></span><br><span class="line">    <span class="keyword">where</span> T: Display + <span class="built_in">Clone</span>,</span><br><span class="line">          U: <span class="built_in">Clone</span> + <span class="built_in">Debug</span></span><br><span class="line">&#123;&#125;</span><br></pre></td></tr></table></figure>



<h6 id="ä½¿ç”¨ç‰¹å¾çº¦æŸæœ‰æ¡ä»¶åœ°å®ç°æ–¹æ³•æˆ–ç‰¹å¾"><a href="#ä½¿ç”¨ç‰¹å¾çº¦æŸæœ‰æ¡ä»¶åœ°å®ç°æ–¹æ³•æˆ–ç‰¹å¾" class="headerlink" title="ä½¿ç”¨ç‰¹å¾çº¦æŸæœ‰æ¡ä»¶åœ°å®ç°æ–¹æ³•æˆ–ç‰¹å¾"></a>ä½¿ç”¨ç‰¹å¾çº¦æŸæœ‰æ¡ä»¶åœ°å®ç°æ–¹æ³•æˆ–ç‰¹å¾</h6><p>ç‰¹å¾çº¦æŸï¼Œå¯ä»¥è®©æˆ‘ä»¬åœ¨æŒ‡å®šç±»å‹ + æŒ‡å®šç‰¹å¾çš„æ¡ä»¶ä¸‹å»å®ç°æ–¹æ³•ï¼Œä¾‹å¦‚ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::fmt::Display;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Pair</span>&lt;T&gt; &#123;</span><br><span class="line">    x: T,</span><br><span class="line">    y: T,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span>&lt;T&gt; Pair&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">new</span>(x: T, y: T) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">Self</span> &#123;</span><br><span class="line">            x,</span><br><span class="line">            y,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span>&lt;T: Display + <span class="built_in">PartialOrd</span>&gt; Pair&lt;T&gt; &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">cmp_display</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.x &gt;= <span class="keyword">self</span>.y &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;The largest member is x = &#123;&#125;&quot;</span>, <span class="keyword">self</span>.x);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">println!</span>(<span class="string">&quot;The largest member is y = &#123;&#125;&quot;</span>, <span class="keyword">self</span>.y);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>cmp_display</code> æ–¹æ³•ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„ <code>Pair&lt;T&gt;</code> ç»“æ„ä½“å¯¹è±¡éƒ½å¯ä»¥æ‹¥æœ‰ï¼Œåªæœ‰ <code>T</code> åŒæ—¶å®ç°äº† <code>Display + PartialOrd</code> çš„ <code>Pair&lt;T&gt;</code> æ‰å¯ä»¥æ‹¥æœ‰æ­¤æ–¹æ³•ã€‚ è¯¥å‡½æ•°å¯è¯»æ€§ä¼šæ›´å¥½ï¼Œå› ä¸ºæ³›å‹å‚æ•°ã€å‚æ•°ã€è¿”å›å€¼éƒ½åœ¨ä¸€èµ·ï¼Œå¯ä»¥å¿«é€Ÿçš„é˜…è¯»ï¼ŒåŒæ—¶æ¯ä¸ªæ³›å‹å‚æ•°çš„ç‰¹å¾ä¹Ÿåœ¨æ–°çš„ä»£ç è¡Œä¸­é€šè¿‡<strong>ç‰¹å¾çº¦æŸ</strong>è¿›è¡Œäº†çº¦æŸã€‚</p>
<p><strong>ä¹Ÿå¯ä»¥æœ‰æ¡ä»¶åœ°å®ç°ç‰¹å¾</strong>ï¼Œä¾‹å¦‚ï¼Œæ ‡å‡†åº“ä¸ºä»»ä½•å®ç°äº† <code>Display</code> ç‰¹å¾çš„ç±»å‹å®ç°äº† <code>ToString</code> ç‰¹å¾ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span>&lt;T: Display&gt; <span class="built_in">ToString</span> <span class="keyword">for</span> <span class="title class_">T</span> &#123;</span><br><span class="line">    <span class="comment">// --snip--</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬å¯ä»¥å¯¹ä»»ä½•å®ç°äº† <code>Display</code> ç‰¹å¾çš„ç±»å‹è°ƒç”¨ç”± <code>ToString</code> å®šä¹‰çš„ <code>to_string</code> æ–¹æ³•ã€‚ä¾‹å¦‚ï¼Œå¯ä»¥å°†æ•´å‹è½¬æ¢ä¸ºå¯¹åº”çš„ <code>String</code> å€¼ï¼Œå› ä¸ºæ•´å‹å®ç°äº† <code>Display</code>ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="variable">s</span> = <span class="number">3</span>.<span class="title function_ invoke__">to_string</span>();</span><br></pre></td></tr></table></figure>



<h5 id="å‡½æ•°è¿”å›ä¸­çš„impl-Trait"><a href="#å‡½æ•°è¿”å›ä¸­çš„impl-Trait" class="headerlink" title="å‡½æ•°è¿”å›ä¸­çš„impl Trait"></a>å‡½æ•°è¿”å›ä¸­çš„impl Trait</h5><p>å¯ä»¥é€šè¿‡impl Traitæ¥è¯´æ˜ä¸€ä¸ªå‡½æ•°è¿”å›äº†ä¸€ä¸ªç±»å‹ï¼Œè¯¥ç±»å‹å®ç°äº†æŸä¸ªç‰¹å¾ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fn returns_summarizable() -&gt; impl Summary &#123;</span><br><span class="line">    Weibo &#123;</span><br><span class="line">        username: String::from(&quot;sunface&quot;),</span><br><span class="line">        content: String::from(</span><br><span class="line">            &quot;m1 maxå¤ªå‰å®³äº†ï¼Œç”µè„‘å†ä¹Ÿä¸ä¼šå¡&quot;,</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>å› ä¸º <code>Weibo</code> å®ç°äº† <code>Summary</code>ï¼Œå› æ­¤è¿™é‡Œå¯ä»¥ç”¨å®ƒæ¥ä½œä¸ºè¿”å›å€¼ã€‚è¦æ³¨æ„çš„æ˜¯ï¼Œè™½ç„¶æˆ‘ä»¬çŸ¥é“è¿™é‡Œæ˜¯ä¸€ä¸ª <code>Weibo</code> ç±»å‹ï¼Œä½†æ˜¯å¯¹äº <code>returns_summarizable</code> çš„è°ƒç”¨è€…è€Œè¨€ï¼Œä»–åªçŸ¥é“è¿”å›äº†ä¸€ä¸ªå®ç°äº† <code>Summary</code> ç‰¹å¾çš„å¯¹è±¡ï¼Œä½†æ˜¯å¹¶ä¸çŸ¥é“è¿”å›äº†ä¸€ä¸ª <code>Weibo</code> ç±»å‹ã€‚</p>
<p>è¿™ç§ <code>impl Trait</code> å½¢å¼çš„è¿”å›å€¼ï¼Œåœ¨ä¸€ç§åœºæ™¯ä¸‹éå¸¸éå¸¸æœ‰ç”¨ï¼Œé‚£å°±æ˜¯è¿”å›çš„çœŸå®ç±»å‹éå¸¸å¤æ‚ï¼Œä½ ä¸çŸ¥é“è¯¥æ€ä¹ˆå£°æ˜æ—¶ï¼ˆæ¯•ç«Ÿ Rust è¦æ±‚ä½ å¿…é¡»æ ‡å‡ºæ‰€æœ‰çš„ç±»å‹ï¼‰ï¼Œæ­¤æ—¶å°±å¯ä»¥ç”¨ <code>impl Trait</code> çš„æ–¹å¼ç®€å•è¿”å›ã€‚ä¾‹å¦‚ï¼Œé—­åŒ…å’Œè¿­ä»£å™¨å°±æ˜¯å¾ˆå¤æ‚ï¼Œåªæœ‰ç¼–è¯‘å™¨æ‰çŸ¥é“é‚£ç©æ„çš„çœŸå®ç±»å‹ï¼Œå¦‚æœè®©ä½ å†™å‡ºæ¥å®ƒä»¬çš„å…·ä½“ç±»å‹ï¼Œä¼°è®¡å†…å¿ƒæœ‰ä¸€ä¸‡åªè‰æ³¥é©¬å¥”è…¾ï¼Œå¥½åœ¨ä½ å¯ä»¥ç”¨ <code>impl Iterator</code> æ¥å‘Šè¯‰è°ƒç”¨è€…ï¼Œè¿”å›äº†ä¸€ä¸ªè¿­ä»£å™¨ï¼Œå› ä¸ºæ‰€æœ‰è¿­ä»£å™¨éƒ½ä¼šå®ç° <code>Iterator</code> ç‰¹å¾ã€‚</p>
<p>ä½†æ˜¯è¿™ç§è¿”å›å€¼æ–¹å¼æœ‰ä¸€ä¸ªå¾ˆå¤§çš„é™åˆ¶ï¼šåªèƒ½æœ‰ä¸€æ›´å…·ä½“çš„ç±»å‹ï¼Œä¾‹å¦‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">returns_summarizable</span>(switch: <span class="type">bool</span>) <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Summary</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> switch &#123;</span><br><span class="line">        Post &#123;</span><br><span class="line">            title: <span class="type">String</span>::<span class="title function_ invoke__">from</span>(</span><br><span class="line">                <span class="string">&quot;Penguins win the Stanley Cup Championship!&quot;</span>,</span><br><span class="line">            ),</span><br><span class="line">            author: <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Iceburgh&quot;</span>),</span><br><span class="line">            content: <span class="type">String</span>::<span class="title function_ invoke__">from</span>(</span><br><span class="line">                <span class="string">&quot;The Pittsburgh Penguins once again are the best \</span></span><br><span class="line"><span class="string">                 hockey team in the NHL.&quot;</span>,</span><br><span class="line">            ),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Weibo &#123;</span><br><span class="line">            username: <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;horse_ebooks&quot;</span>),</span><br><span class="line">            content: <span class="type">String</span>::<span class="title function_ invoke__">from</span>(</span><br><span class="line">                <span class="string">&quot;of course, as you probably already know, people&quot;</span>,</span><br><span class="line">            ),</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä»¥ä¸Šçš„ä»£ç å°±æ— æ³•é€šè¿‡ç¼–è¯‘ï¼Œå› ä¸ºå®ƒè¿”å›äº†ä¸¤ä¸ªä¸åŒçš„ç±»å‹ <code>Post</code> å’Œ <code>Weibo</code>ã€‚</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">`if` and `else` have incompatible types</span><br><span class="line">expected struct `Post`, found struct `Weibo`</span><br></pre></td></tr></table></figure>

<p>æŠ¥é”™æç¤ºæˆ‘ä»¬ <code>if</code> å’Œ <code>else</code> è¿”å›äº†ä¸åŒçš„ç±»å‹ã€‚å¦‚æœæƒ³è¦å®ç°è¿”å›ä¸åŒçš„ç±»å‹ï¼Œéœ€è¦ä½¿ç”¨ä¸‹ä¸€ç« èŠ‚ä¸­çš„<a target="_blank" rel="noopener" href="https://course.rs/basic/trait/trait-object.html">ç‰¹å¾å¯¹è±¡</a>ã€‚</p>
<h5 id="é€šè¿‡deriveæ´¾ç”Ÿç‰¹å¾"><a href="#é€šè¿‡deriveæ´¾ç”Ÿç‰¹å¾" class="headerlink" title="é€šè¿‡deriveæ´¾ç”Ÿç‰¹å¾"></a>é€šè¿‡deriveæ´¾ç”Ÿç‰¹å¾</h5><p>å½¢å¦‚ <code>#[derive(Debug)]</code> çš„ä»£ç å·²ç»å‡ºç°äº†å¾ˆå¤šæ¬¡ï¼Œè¿™ç§æ˜¯ä¸€ç§ç‰¹å¾æ´¾ç”Ÿè¯­æ³•ï¼Œè¢« <code>derive</code> æ ‡è®°çš„å¯¹è±¡ä¼šè‡ªåŠ¨å®ç°å¯¹åº”çš„é»˜è®¤ç‰¹å¾ä»£ç ï¼Œç»§æ‰¿ç›¸åº”çš„åŠŸèƒ½ã€‚</p>
<p>ä¾‹å¦‚ <code>Debug</code> ç‰¹å¾ï¼Œå®ƒæœ‰ä¸€å¥—è‡ªåŠ¨å®ç°çš„é»˜è®¤ä»£ç ï¼Œå½“ä½ ç»™ä¸€ä¸ªç»“æ„ä½“æ ‡è®°åï¼Œå°±å¯ä»¥ä½¿ç”¨ <code>println!(&quot;&#123;:?&#125;&quot;, s)</code> çš„å½¢å¼æ‰“å°è¯¥ç»“æ„ä½“çš„å¯¹è±¡ã€‚</p>
<p>å†å¦‚ <code>Copy</code> ç‰¹å¾ï¼Œå®ƒä¹Ÿæœ‰ä¸€å¥—è‡ªåŠ¨å®ç°çš„é»˜è®¤ä»£ç ï¼Œå½“æ ‡è®°åˆ°ä¸€ä¸ªç±»å‹ä¸Šæ—¶ï¼Œå¯ä»¥è®©è¿™ä¸ªç±»å‹è‡ªåŠ¨å®ç° <code>Copy</code> ç‰¹å¾ï¼Œè¿›è€Œå¯ä»¥è°ƒç”¨ <code>copy</code> æ–¹æ³•ï¼Œè¿›è¡Œè‡ªæˆ‘å¤åˆ¶ã€‚</p>
<p>æ€»ä¹‹ï¼Œ<code>derive</code> æ´¾ç”Ÿå‡ºæ¥çš„æ˜¯ Rust é»˜è®¤ç»™æˆ‘ä»¬æä¾›çš„ç‰¹å¾ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­æå¤§çš„ç®€åŒ–äº†è‡ªå·±æ‰‹åŠ¨å®ç°ç›¸åº”ç‰¹å¾çš„éœ€æ±‚ï¼Œå½“ç„¶ï¼Œå¦‚æœä½ æœ‰ç‰¹æ®Šçš„éœ€æ±‚ï¼Œè¿˜å¯ä»¥è‡ªå·±æ‰‹åŠ¨é‡è½½è¯¥å®ç°ã€‚</p>
<p>è¯¦ç»†çš„ <code>derive</code> åˆ—è¡¨å‚è§<a target="_blank" rel="noopener" href="https://course.rs/appendix/derive.html">é™„å½•-æ´¾ç”Ÿç‰¹å¾</a>ã€‚</p>
<h5 id="è°ƒç”¨æ–¹æ³•éœ€è¦å¼•å…¥ç‰¹å¾"><a href="#è°ƒç”¨æ–¹æ³•éœ€è¦å¼•å…¥ç‰¹å¾" class="headerlink" title="è°ƒç”¨æ–¹æ³•éœ€è¦å¼•å…¥ç‰¹å¾"></a>è°ƒç”¨æ–¹æ³•éœ€è¦å¼•å…¥ç‰¹å¾</h5><p>åœ¨ä¸€äº›åœºæ™¯ä¸­ï¼Œä½¿ç”¨aså…³é”®å­—åšç±»å‹è½¬æ¢ä¼šæœ‰æ¯”è¾ƒå¤§çš„é™åˆ¶ï¼Œå› ä¸ºä½ æƒ³è¦åœ¨ç±»å‹è½¬æ¢ä¸Šæ‹¥æœ‰å®Œå…¨çš„æ§åˆ¶ï¼Œä¾‹å¦‚å¤„ç†è½¬æ¢é”™è¯¯ï¼Œé‚£ä¹ˆä½ å°†éœ€è¦TryInto:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> std::convert::TryInto;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">  <span class="keyword">let</span> <span class="variable">a</span>: <span class="type">i32</span> = <span class="number">10</span>;</span><br><span class="line">  <span class="keyword">let</span> <span class="variable">b</span>: <span class="type">u16</span> = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> <span class="variable">b_</span> = b.<span class="title function_ invoke__">try_into</span>()</span><br><span class="line">            .<span class="title function_ invoke__">unwrap</span>();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> a &lt; b_ &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;Ten is less than one hundred.&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç ä¸­å¼•å…¥äº† <code>std::convert::TryInto</code> ç‰¹å¾ï¼Œä½†æ˜¯å´æ²¡æœ‰ä½¿ç”¨å®ƒï¼Œå¯èƒ½æœ‰äº›åŒå­¦ä¼šä¸ºæ­¤å›°æƒ‘ï¼Œä¸»è¦åŸå› åœ¨äº<strong>å¦‚æœä½ è¦ä½¿ç”¨ä¸€ä¸ªç‰¹å¾çš„æ–¹æ³•ï¼Œé‚£ä¹ˆä½ éœ€è¦å°†è¯¥ç‰¹å¾å¼•å…¥å½“å‰çš„ä½œç”¨åŸŸä¸­</strong>ï¼Œæˆ‘ä»¬åœ¨ä¸Šé¢ç”¨åˆ°äº† <code>try_into</code> æ–¹æ³•ï¼Œå› æ­¤éœ€è¦å¼•å…¥å¯¹åº”çš„ç‰¹å¾ã€‚</p>
<p>ä½†æ˜¯ Rust åˆæä¾›äº†ä¸€ä¸ªéå¸¸ä¾¿åˆ©çš„åŠæ³•ï¼Œå³æŠŠæœ€å¸¸ç”¨çš„æ ‡å‡†åº“ä¸­çš„ç‰¹å¾é€šè¿‡ <a target="_blank" rel="noopener" href="https://course.rs/appendix/prelude.html"><code>std::prelude</code></a> æ¨¡å—æå‰å¼•å…¥åˆ°å½“å‰ä½œç”¨åŸŸä¸­ï¼Œå…¶ä¸­åŒ…æ‹¬äº† <code>std::convert::TryInto</code>ï¼Œä½ å¯ä»¥å°è¯•åˆ é™¤ç¬¬ä¸€è¡Œçš„ä»£ç  <code>use ...</code>ï¼Œçœ‹çœ‹æ˜¯å¦ä¼šæŠ¥é”™ã€‚</p>
<h4 id="ç‰¹å¾å¯¹è±¡"><a href="#ç‰¹å¾å¯¹è±¡" class="headerlink" title="ç‰¹å¾å¯¹è±¡"></a>ç‰¹å¾å¯¹è±¡</h4><figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">returns_summarizable</span>(switch: <span class="type">bool</span>) <span class="punctuation">-&gt;</span> <span class="keyword">impl</span> <span class="title class_">Summary</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> switch &#123;</span><br><span class="line">        Post &#123;</span><br><span class="line">           <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        Weibo &#123;</span><br><span class="line">            <span class="comment">// ...</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Postå’ŒWeiboéƒ½å®ç°äº†Summaryç‰¹å¾ï¼Œå› æ­¤ä¸Šé¢çš„å‡½æ•°è¯†å›¾é€šè¿‡è¿”å›impl Summaryæ¥è¿”å›è¿™ä¸¤ä¸ªç±»å‹ï¼Œä½†æ˜¯ç¼–è¯‘å™¨æŠ¥é”™äº†ï¼ŒåŸå› æ˜¯impl Traitçš„è¿”å›å€¼ç±»å‹å¹¶ä¸æ”¯æŒå¤šç§ä¸åŒç±»å‹è¿”å›ï¼Œé‚£æˆ‘ä»¬å‘è¿”å›å¤šç§ç±»å‹ï¼Œè¯¥æ€ä¹ˆåŠ</p>
<p>å†æ¥è€ƒè™‘ä¸€ä¸ªé—®é¢˜ï¼šç°åœ¨åœ¨åšä¸€æ¬¾æ¸¸æˆï¼Œéœ€è¦å°†å¤šä¸ªå¯¹è±¡æ¸²æŸ“åœ¨å±å¹•ä¸Šï¼Œè¿™äº›å¯¹è±¡å±äºä¸åŒçš„ç±»å‹ï¼Œå­˜å‚¨åœ¨åˆ—è¡¨ä¸­ï¼Œæ¸²æŸ“çš„æ—¶å€™ï¼Œéœ€è¦å¾ªç¯è¯¥åˆ—è¡¨å¹¶é¡ºåºæ¸²æŸ“æ¯ä¸ªå¯¹è±¡ï¼Œåœ¨ Rust ä¸­è¯¥æ€ä¹ˆå®ç°ï¼Ÿ</p>
<p>èªæ˜çš„åŒå­¦å¯èƒ½å·²ç»èƒ½æƒ³åˆ°ä¸€ä¸ªåŠæ³•ï¼Œåˆ©ç”¨æšä¸¾ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#[derive(Debug)]</span></span><br><span class="line"><span class="keyword">enum</span> <span class="title class_">UiObject</span> &#123;</span><br><span class="line">    Button,</span><br><span class="line">    SelectBox,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">objects</span> = [</span><br><span class="line">        UiObject::Button,</span><br><span class="line">        UiObject::SelectBox</span><br><span class="line">    ];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> <span class="variable">o</span> <span class="keyword">in</span> objects &#123;</span><br><span class="line">        <span class="title function_ invoke__">draw</span>(o)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">draw</span>(o: UiObject) &#123;</span><br><span class="line">    <span class="built_in">println!</span>(<span class="string">&quot;&#123;:?&#125;&quot;</span>,o);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Bingoï¼Œè¿™ä¸ªç¡®å®æ˜¯ä¸€ä¸ªåŠæ³•ï¼Œä½†æ˜¯é—®é¢˜æ¥äº†ï¼Œå¦‚æœä½ çš„å¯¹è±¡é›†åˆå¹¶ä¸èƒ½äº‹å…ˆæ˜ç¡®åœ°çŸ¥é“å‘¢ï¼Ÿæˆ–è€…åˆ«äººæƒ³è¦å®ç°ä¸€ä¸ª UI ç»„ä»¶å‘¢ï¼Ÿæ­¤æ—¶æšä¸¾ä¸­çš„ç±»å‹æ˜¯æœ‰äº›ç¼ºå°‘çš„ï¼Œæ˜¯ä¸æ˜¯è¿˜è¦ä¿®æ”¹ä½ çš„ä»£ç å¢åŠ ä¸€ä¸ªæšä¸¾æˆå‘˜ï¼Ÿ</p>
<p>æ€»ä¹‹ï¼Œåœ¨ç¼–å†™è¿™ä¸ª UI åº“æ—¶ï¼Œæˆ‘ä»¬æ— æ³•çŸ¥é“æ‰€æœ‰çš„ UI å¯¹è±¡ç±»å‹ï¼ŒåªçŸ¥é“çš„æ˜¯ï¼š</p>
<ul>
<li>UI å¯¹è±¡çš„ç±»å‹ä¸åŒ</li>
<li>éœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„ç±»å‹æ¥å¤„ç†è¿™äº›å¯¹è±¡ï¼Œæ— è®ºæ˜¯ä½œä¸ºå‡½æ•°å‚æ•°è¿˜æ˜¯ä½œä¸ºåˆ—è¡¨ä¸­çš„ä¸€å‘˜</li>
<li>éœ€è¦å¯¹æ¯ä¸€ä¸ªå¯¹è±¡è°ƒç”¨ <code>draw</code> æ–¹æ³•</li>
</ul>
<p>åœ¨æ‹¥æœ‰ç»§æ‰¿çš„è¯­è¨€ä¸­ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªåä¸º <code>Component</code> çš„ç±»ï¼Œè¯¥ç±»ä¸Šæœ‰ä¸€ä¸ª <code>draw</code> æ–¹æ³•ã€‚å…¶ä»–çš„ç±»æ¯”å¦‚ <code>Button</code>ã€<code>Image</code> å’Œ <code>SelectBox</code> ä¼šä» <code>Component</code> æ´¾ç”Ÿå¹¶å› æ­¤ç»§æ‰¿ <code>draw</code> æ–¹æ³•ã€‚å®ƒä»¬å„è‡ªéƒ½å¯ä»¥è¦†ç›– <code>draw</code> æ–¹æ³•æ¥å®šä¹‰è‡ªå·±çš„è¡Œä¸ºï¼Œä½†æ˜¯æ¡†æ¶ä¼šæŠŠæ‰€æœ‰è¿™äº›ç±»å‹å½“ä½œæ˜¯ <code>Component</code> çš„å®ä¾‹ï¼Œå¹¶åœ¨å…¶ä¸Šè°ƒç”¨ <code>draw</code>ã€‚ä¸è¿‡ Rust å¹¶æ²¡æœ‰ç»§æ‰¿ï¼Œæˆ‘ä»¬å¾—å¦å¯»å‡ºè·¯ã€‚</p>
<h5 id="ç‰¹å¾å¯¹è±¡å®šä¹‰"><a href="#ç‰¹å¾å¯¹è±¡å®šä¹‰" class="headerlink" title="ç‰¹å¾å¯¹è±¡å®šä¹‰"></a>ç‰¹å¾å¯¹è±¡å®šä¹‰</h5><p>åœ¨ä»‹ç»ç‰¹å¾å¯¹è±¡ä¹‹å‰ï¼Œå…ˆæ¥ä¸ºä¹‹å‰çš„UIç»„ä»¶å®šä¹‰ä¸€ä¸ªç‰¹å¾:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">trait</span> <span class="title class_">Draw</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">draw</span>(&amp;<span class="keyword">self</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åªè¦ç»„ä»¶å®ç°äº†Drawç‰¹å¾ï¼Œå°±å¯ä»¥è°ƒç”¨Drawæ–¹æ³•æ¥è¿›è¡Œæ¸²æŸ“ã€‚å‡è®¾æœ‰ä¸€ä¸ªButtonå’ŒSelectBoxç»„ä»¶å®ç°äº†Drawç‰¹å¾</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Button</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> width: <span class="type">u32</span>,</span><br><span class="line">    <span class="keyword">pub</span> height: <span class="type">u32</span>,</span><br><span class="line">    <span class="keyword">pub</span> label: <span class="type">String</span>,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Draw</span> <span class="keyword">for</span> <span class="title class_">Button</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">draw</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="comment">// ç»˜åˆ¶æŒ‰é’®çš„ä»£ç </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">SelectBox</span> &#123;</span><br><span class="line">    width: <span class="type">u32</span>,</span><br><span class="line">    height: <span class="type">u32</span>,</span><br><span class="line">    options: <span class="type">Vec</span>&lt;<span class="type">String</span>&gt;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Draw</span> <span class="keyword">for</span> <span class="title class_">SelectBox</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">draw</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="comment">// ç»˜åˆ¶SelectBoxçš„ä»£ç </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æ­¤æ—¶ï¼Œè¿˜éœ€è¦ä¸€ä¸ªåŠ¨æ€æ•°ç»„æ¥å­˜å‚¨è¿™äº›UIå¯¹è±¡:</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Screen</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> components: <span class="type">Vec</span>&lt;?&gt;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>æ³¨æ„åˆ°ä¸Šé¢çš„?ï¼Œå®ƒçš„æ„æ€æ˜¯æˆ‘ä»¬åº”è¯¥å¡«å…¥ä»€ä¹ˆç±»å‹ï¼Œåœ¨ä¹‹å‰çš„å†…å®¹ä¸­ï¼Œæˆ‘ä»¬æ‰¾ä¸åˆ°é‚£ä¸ªç±»å‹å¯ä»¥å¡«å…¥ï¼Œä½†æ˜¯å› ä¸ºButtonå’ŒSelectBoxéƒ½å®ç°äº†Drawç‰¹å¾ï¼Œé‚£æˆ‘ä»¬å°±å¯ä»¥æŠŠDrawç‰¹å¾çš„å¯¹è±¡ä½œä¸ºç±»å‹ï¼Œå¡«å…¥æ•°ç»„ä¸­</p>
<p>ç‰¹å¾å¯¹è±¡æŒ‡å‘å®ç°äº†Drawç‰¹å¾çš„ç±»å‹çš„å®åŠ›ï¼Œä¹Ÿå°±æ˜¯æŒ‡å‘äº†Buttonå’ŒSelectBoxçš„å®ä¾‹ï¼Œè¿™ç§æ˜ å°„å…³ç³»æ˜¯å­˜å‚¨åœ¨ä¸€å¼ è¡¨ä¸­ï¼Œå¯ä»¥åœ¨è¿è¡Œæ—¶é€šè¿‡ç‰¹å¾å¯¹è±¡æ‰¾åˆ°å…·ä½“è°ƒç”¨çš„ç±»å‹æ–¹æ³•</p>
<p>å¯ä»¥é€šè¿‡&amp;å¼•ç”¨æˆ–è€…Box&lt;T&gt;æ™ºèƒ½æŒ‡é’ˆæ¥åˆ›å»ºç‰¹å¾å¯¹è±¡</p>
<blockquote>
<p><code>Box&lt;T&gt;</code> åœ¨åé¢ä¼š<a target="_blank" rel="noopener" href="https://course.rs/advance/smart-pointer/box.html">è¯¦ç»†è®²è§£</a>ï¼Œå¤§å®¶ç°åœ¨æŠŠå®ƒå½“æˆä¸€ä¸ªå¼•ç”¨å³å¯ï¼Œåªä¸è¿‡å®ƒåŒ…è£¹çš„å€¼ä¼šè¢«å¼ºåˆ¶åˆ†é…åœ¨å †ä¸Šã€‚</p>
<p><code>dyn</code> å…³é”®å­—ç”¨äºè¡¨ç¤º<strong>åŠ¨æ€åˆ†å‘</strong>ï¼ˆdynamic dispatchï¼‰çš„ç‰¹å¾å¯¹è±¡ã€‚å®ƒå…è®¸ä½ åœ¨è¿è¡Œæ—¶ç¡®å®šè°ƒç”¨å“ªä¸ªæ–¹æ³•ï¼Œè€Œä¸æ˜¯åœ¨ç¼–è¯‘æ—¶ç¡®å®šã€‚è¿™æ˜¯ Rust ä¸­å®ç°å¤šæ€çš„ä¸€ç§æ–¹å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†å…·æœ‰å…±åŒæ¥å£ï¼ˆç‰¹å¾ï¼‰çš„ä¸åŒç±»å‹æ—¶ã€‚</p>
</blockquote>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Draw</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">draw</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Draw</span> <span class="keyword">for</span> <span class="title class_">u8</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">draw</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">        <span class="built_in">format!</span>(<span class="string">&quot;u8: &#123;&#125;&quot;</span>, *<span class="keyword">self</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Draw</span> <span class="keyword">for</span> <span class="title class_">f64</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">draw</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">String</span> &#123;</span><br><span class="line">        <span class="built_in">format!</span>(<span class="string">&quot;f64: &#123;&#125;&quot;</span>, *<span class="keyword">self</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è‹¥ T å®ç°äº† Draw ç‰¹å¾ï¼Œ åˆ™è°ƒç”¨è¯¥å‡½æ•°æ—¶ä¼ å…¥çš„ Box&lt;T&gt; å¯ä»¥è¢«éšå¼è½¬æ¢æˆå‡½æ•°å‚æ•°ç­¾åä¸­çš„ Box&lt;dyn Draw&gt;</span></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">draw1</span>(x: <span class="type">Box</span>&lt;<span class="keyword">dyn</span> Draw&gt;) &#123;</span><br><span class="line">    <span class="comment">// ç”±äºå®ç°äº† Deref ç‰¹å¾ï¼ŒBox æ™ºèƒ½æŒ‡é’ˆä¼šè‡ªåŠ¨è§£å¼•ç”¨ä¸ºå®ƒæ‰€åŒ…è£¹çš„å€¼ï¼Œç„¶åè°ƒç”¨è¯¥å€¼å¯¹åº”çš„ç±»å‹ä¸Šå®šä¹‰çš„ `draw` æ–¹æ³•</span></span><br><span class="line">    x.<span class="title function_ invoke__">draw</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">draw2</span>(x: &amp;<span class="keyword">dyn</span> Draw) &#123;</span><br><span class="line">    x.<span class="title function_ invoke__">draw</span>();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">x</span> = <span class="number">1.1f64</span>;</span><br><span class="line">    <span class="comment">// do_something(&amp;x);</span></span><br><span class="line">    <span class="keyword">let</span> <span class="variable">y</span> = <span class="number">8u8</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// x å’Œ y çš„ç±»å‹ T éƒ½å®ç°äº† `Draw` ç‰¹å¾ï¼Œå› ä¸º Box&lt;T&gt; å¯ä»¥åœ¨å‡½æ•°è°ƒç”¨æ—¶éšå¼åœ°è¢«è½¬æ¢ä¸ºç‰¹å¾å¯¹è±¡ Box&lt;dyn Draw&gt; </span></span><br><span class="line">    <span class="comment">// åŸºäº x çš„å€¼åˆ›å»ºä¸€ä¸ª Box&lt;f64&gt; ç±»å‹çš„æ™ºèƒ½æŒ‡é’ˆï¼ŒæŒ‡é’ˆæŒ‡å‘çš„æ•°æ®è¢«æ”¾ç½®åœ¨äº†å †ä¸Š</span></span><br><span class="line">    <span class="title function_ invoke__">draw1</span>(<span class="type">Box</span>::<span class="title function_ invoke__">new</span>(x));</span><br><span class="line">    <span class="comment">// åŸºäº y çš„å€¼åˆ›å»ºä¸€ä¸ª Box&lt;u8&gt; ç±»å‹çš„æ™ºèƒ½æŒ‡é’ˆ</span></span><br><span class="line">    <span class="title function_ invoke__">draw1</span>(<span class="type">Box</span>::<span class="title function_ invoke__">new</span>(y));</span><br><span class="line">    <span class="title function_ invoke__">draw2</span>(&amp;x);</span><br><span class="line">    <span class="title function_ invoke__">draw2</span>(&amp;y);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç ï¼Œæœ‰å‡ ä¸ªéå¸¸é‡è¦çš„ç‚¹ï¼š</p>
<ul>
<li><code>draw1</code> å‡½æ•°çš„å‚æ•°æ˜¯ <code>Box&lt;dyn Draw&gt;</code> å½¢å¼çš„ç‰¹å¾å¯¹è±¡ï¼Œè¯¥ç‰¹å¾å¯¹è±¡æ˜¯é€šè¿‡ <code>Box::new(x)</code> çš„æ–¹å¼åˆ›å»ºçš„</li>
<li><code>draw2</code> å‡½æ•°çš„å‚æ•°æ˜¯ <code>&amp;dyn Draw</code> å½¢å¼çš„ç‰¹å¾å¯¹è±¡ï¼Œè¯¥ç‰¹å¾å¯¹è±¡æ˜¯é€šè¿‡ <code>&amp;x</code> çš„æ–¹å¼åˆ›å»ºçš„</li>
<li><code>dyn</code> å…³é”®å­—åªç”¨åœ¨ç‰¹å¾å¯¹è±¡çš„ç±»å‹å£°æ˜ä¸Šï¼Œåœ¨åˆ›å»ºæ—¶æ— éœ€ä½¿ç”¨ <code>dyn</code></li>
</ul>
<p>å› æ­¤ï¼Œå¯ä»¥ä½¿ç”¨ç‰¹å¾å¯¹è±¡æ¥ä»£è¡¨æ³›å‹æˆ–å…·ä½“çš„ç±»å‹ã€‚</p>
<p>ç»§ç»­æ¥å®Œå–„ä¹‹å‰çš„ UI ç»„ä»¶ä»£ç ï¼Œé¦–å…ˆæ¥å®ç° <code>Screen</code>ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Screen</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> components: <span class="type">Vec</span>&lt;<span class="type">Box</span>&lt;<span class="keyword">dyn</span> Draw&gt;&gt;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> å…¶ä¸­å­˜å‚¨äº†ä¸€ä¸ªåŠ¨æ€æ•°ç»„ï¼Œé‡Œé¢çš„å…ƒç´ ç±»å‹æ˜¯Drawç‰¹å¾å¯¹è±¡:Box&lt;dyn Draw&gt;ï¼Œä»»ä½•å®ç°äº†Drawç‰¹å¾çš„ç±»å‹éƒ½å¯ä»¥å­˜æ”¾å…¶ä¸­</p>
<p>æˆ‘ä»¬å†æ¥ä¸ºScreenå®šä¹‰runæ–¹æ³•ï¼Œç”¨äºå°†åˆ—è¡¨ä¸­çš„UIç»„ä»¶æ¸²æŸ“åˆ°å±å¹•ä¸Š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> <span class="title class_">Screen</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">run</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> <span class="variable">component</span> <span class="keyword">in</span> <span class="keyword">self</span>.components.<span class="title function_ invoke__">iter</span>() &#123;</span><br><span class="line">            component.<span class="title function_ invoke__">draw</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>è‡³æ­¤ï¼Œæˆ‘ä»¬å°±å®Œæˆäº†ä¹‹å‰çš„ç›®æ ‡ï¼šåœ¨åˆ—è¡¨ä¸­å­˜å‚¨å¤šç§ä¸åŒç±»å‹çš„å®åŠ›ï¼Œç„¶åå°†ä»–ä»¬ä½¿ç”¨åŒä¸€ä¸ªæ–¹æ³•é€ä¸€æ¸²æŸ“åˆ°å±å¹•ä¸Š</p>
<p>æˆ‘ä»¬å†æ¥çœ‹çœ‹ï¼Œå¦‚æœé€šè¿‡æ³›å‹å®ç°ï¼Œä¼šå¦‚ä½•ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Screen</span>&lt;T: Draw&gt; &#123;</span><br><span class="line">    <span class="keyword">pub</span> components: <span class="type">Vec</span>&lt;T&gt;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">impl</span>&lt;T&gt; Screen&lt;T&gt;</span><br><span class="line">    <span class="keyword">where</span> T: Draw &#123;</span><br><span class="line">    <span class="keyword">pub</span> <span class="keyword">fn</span> <span class="title function_">run</span>(&amp;<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">for</span> <span class="variable">component</span> <span class="keyword">in</span> <span class="keyword">self</span>.components.<span class="title function_ invoke__">iter</span>() &#123;</span><br><span class="line">            component.<span class="title function_ invoke__">draw</span>();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢çš„Screençš„åˆ—è¡¨ä¸­ï¼Œå­˜å‚¨äº†ç±»å‹ä¸ºTçš„å…ƒç´ ï¼Œç„¶åå†Screenä¸­ä½¿ç”¨ç‰¹å¾çº¦æŸè®©Tå®ç°äº† <code>Draw</code> ç‰¹å¾ï¼Œè¿›è€Œå¯ä»¥è°ƒç”¨ <code>draw</code> æ–¹æ³•ã€‚                                               </p>
<p>ä½†æ˜¯è¿™ç§å†™æ³•é™åˆ¶äº† <code>Screen</code> å®ä¾‹çš„ <code>Vec&lt;T&gt;</code> ä¸­çš„æ¯ä¸ªå…ƒç´ å¿…é¡»æ˜¯ <code>Button</code> ç±»å‹æˆ–è€…å…¨æ˜¯ <code>SelectBox</code> ç±»å‹ã€‚å¦‚æœåªéœ€è¦åŒè´¨ï¼ˆç›¸åŒç±»å‹ï¼‰é›†åˆï¼Œæ›´å€¾å‘äºé‡‡ç”¨æ³›å‹+ç‰¹å¾çº¦æŸè¿™ç§å†™æ³•ï¼Œå› å…¶å®ç°æ›´æ¸…æ™°ï¼Œä¸”æ€§èƒ½æ›´å¥½(ç‰¹å¾å¯¹è±¡ï¼Œéœ€è¦åœ¨è¿è¡Œæ—¶ä» <code>vtable</code> åŠ¨æ€æŸ¥æ‰¾éœ€è¦è°ƒç”¨çš„æ–¹æ³•)ã€‚</p>
<p>ç°åœ¨æ¥è¿è¡Œæ¸²æŸ“ä¸‹å’±ä»¬ç²¾å¿ƒè®¾è®¡çš„ UI ç»„ä»¶åˆ—è¡¨ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">screen</span> = Screen &#123;</span><br><span class="line">        components: <span class="built_in">vec!</span>[</span><br><span class="line">            <span class="type">Box</span>::<span class="title function_ invoke__">new</span>(SelectBox &#123;</span><br><span class="line">                width: <span class="number">75</span>,</span><br><span class="line">                height: <span class="number">10</span>,</span><br><span class="line">                options: <span class="built_in">vec!</span>[</span><br><span class="line">                    <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Yes&quot;</span>),</span><br><span class="line">                    <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Maybe&quot;</span>),</span><br><span class="line">                    <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;No&quot;</span>)</span><br><span class="line">                ],</span><br><span class="line">            &#125;),</span><br><span class="line">            <span class="type">Box</span>::<span class="title function_ invoke__">new</span>(Button &#123;</span><br><span class="line">                width: <span class="number">50</span>,</span><br><span class="line">                height: <span class="number">10</span>,</span><br><span class="line">                label: <span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;OK&quot;</span>),</span><br><span class="line">            &#125;),</span><br><span class="line">        ],</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    screen.<span class="title function_ invoke__">run</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä½¿ç”¨ <code>Box::new(T)</code> çš„æ–¹å¼æ¥åˆ›å»ºäº†ä¸¤ä¸ª <code>Box&lt;dyn Draw&gt;</code> ç‰¹å¾å¯¹è±¡ï¼Œå¦‚æœä»¥åè¿˜éœ€è¦å¢åŠ ä¸€ä¸ª UI ç»„ä»¶ï¼Œé‚£ä¹ˆè®©è¯¥ç»„ä»¶å®ç° <code>Draw</code> ç‰¹å¾ï¼Œåˆ™å¯ä»¥å¾ˆè½»æ¾çš„å°†å…¶æ¸²æŸ“åœ¨å±å¹•ä¸Šï¼Œç”šè‡³ç”¨æˆ·å¯ä»¥å¼•å…¥æˆ‘ä»¬çš„åº“ä½œä¸ºä¸‰æ–¹åº“ï¼Œç„¶ååœ¨è‡ªå·±çš„åº“ä¸­ä¸ºè‡ªå·±çš„ç±»å‹å®ç° <code>Draw</code> ç‰¹å¾ï¼Œç„¶åè¿›è¡Œæ¸²æŸ“ã€‚</p>
<p>åœ¨åŠ¨æ€ç±»å‹è¯­è¨€ä¸­ï¼Œæœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„æ¦‚å¿µï¼š<strong>é¸­å­ç±»å‹</strong>(<em>duck typing</em>)ï¼Œç®€å•æ¥è¯´ï¼Œå°±æ˜¯åªå…³å¿ƒå€¼é•¿å•¥æ ·ï¼Œè€Œä¸å…³å¿ƒå®ƒå®é™…æ˜¯ä»€ä¹ˆã€‚å½“ä¸€ä¸ªä¸œè¥¿èµ°èµ·æ¥åƒé¸­å­ï¼Œå«èµ·æ¥åƒé¸­å­ï¼Œé‚£ä¹ˆå®ƒå°±æ˜¯ä¸€åªé¸­å­ï¼Œå°±ç®—å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªå¥¥ç‰¹æ›¼ï¼Œä¹Ÿä¸é‡è¦ï¼Œæˆ‘ä»¬å°±å½“å®ƒæ˜¯é¸­å­ã€‚</p>
<p>åœ¨ä¸Šä¾‹ä¸­ï¼Œ<code>Screen</code> åœ¨ <code>run</code> çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¹¶ä¸éœ€è¦çŸ¥é“å„ä¸ªç»„ä»¶çš„å…·ä½“ç±»å‹æ˜¯ä»€ä¹ˆã€‚å®ƒä¹Ÿä¸æ£€æŸ¥ç»„ä»¶åˆ°åº•æ˜¯ <code>Button</code> è¿˜æ˜¯ <code>SelectBox</code> çš„å®ä¾‹ï¼Œåªè¦å®ƒå®ç°äº† <code>Draw</code> ç‰¹å¾ï¼Œå°±èƒ½é€šè¿‡ <code>Box::new</code> åŒ…è£…æˆ <code>Box&lt;dyn Draw&gt;</code> ç‰¹å¾å¯¹è±¡ï¼Œç„¶åè¢«æ¸²æŸ“åœ¨å±å¹•ä¸Šã€‚</p>
<p>ä½¿ç”¨ç‰¹å¾å¯¹è±¡å’Œ Rust ç±»å‹ç³»ç»Ÿæ¥è¿›è¡Œç±»ä¼¼é¸­å­ç±»å‹æ“ä½œçš„ä¼˜åŠ¿æ˜¯ï¼Œæ— éœ€åœ¨è¿è¡Œæ—¶æ£€æŸ¥ä¸€ä¸ªå€¼æ˜¯å¦å®ç°äº†ç‰¹å®šæ–¹æ³•æˆ–è€…æ‹…å¿ƒåœ¨è°ƒç”¨æ—¶å› ä¸ºå€¼æ²¡æœ‰å®ç°æ–¹æ³•è€Œäº§ç”Ÿé”™è¯¯ã€‚å¦‚æœå€¼æ²¡æœ‰å®ç°ç‰¹å¾å¯¹è±¡æ‰€éœ€çš„ç‰¹å¾ï¼Œ é‚£ä¹ˆ Rust æ ¹æœ¬å°±ä¸ä¼šç¼–è¯‘è¿™äº›ä»£ç ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">screen</span> = Screen &#123;</span><br><span class="line">        components: <span class="built_in">vec!</span>[</span><br><span class="line">            <span class="type">Box</span>::<span class="title function_ invoke__">new</span>(<span class="type">String</span>::<span class="title function_ invoke__">from</span>(<span class="string">&quot;Hi&quot;</span>)),</span><br><span class="line">        ],</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    screen.<span class="title function_ invoke__">run</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› ä¸º <code>String</code> ç±»å‹æ²¡æœ‰å®ç° <code>Draw</code> ç‰¹å¾ï¼Œç¼–è¯‘å™¨ç›´æ¥å°±ä¼šæŠ¥é”™ï¼Œä¸ä¼šè®©ä¸Šè¿°ä»£ç è¿è¡Œã€‚å¦‚æœæƒ³è¦ <code>String</code> ç±»å‹è¢«æ¸²æŸ“åœ¨å±å¹•ä¸Šï¼Œé‚£ä¹ˆåªéœ€è¦ä¸ºå…¶å®ç° <code>Draw</code> ç‰¹å¾å³å¯ï¼Œéå¸¸å®¹æ˜“ã€‚</p>
<p>æ³¨æ„ <code>dyn</code> ä¸èƒ½å•ç‹¬ä½œä¸ºç‰¹å¾å¯¹è±¡çš„å®šä¹‰ï¼Œä¾‹å¦‚ä¸‹é¢çš„ä»£ç ç¼–è¯‘å™¨ä¼šæŠ¥é”™ï¼ŒåŸå› æ˜¯ç‰¹å¾å¯¹è±¡å¯ä»¥æ˜¯ä»»æ„å®ç°äº†æŸä¸ªç‰¹å¾çš„ç±»å‹ï¼Œç¼–è¯‘å™¨åœ¨ç¼–è¯‘æœŸä¸çŸ¥é“è¯¥ç±»å‹çš„å¤§å°ï¼Œä¸åŒçš„ç±»å‹å¤§å°æ˜¯ä¸åŒçš„ã€‚</p>
<p>è€Œ <code>&amp;dyn</code> å’Œ <code>Box&lt;dyn&gt;</code> åœ¨ç¼–è¯‘æœŸéƒ½æ˜¯å·²çŸ¥å¤§å°ï¼Œæ‰€ä»¥å¯ä»¥ç”¨ä½œç‰¹å¾å¯¹è±¡çš„å®šä¹‰ã€‚</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fn</span> <span class="title function_">draw2</span>(x: <span class="keyword">dyn</span> Draw) &#123;</span><br><span class="line">    x.<span class="title function_ invoke__">draw</span>();</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">10</span> | <span class="keyword">fn</span> <span class="title function_">draw2</span>(x: <span class="keyword">dyn</span> Draw) &#123;</span><br><span class="line">   |          ^ doesn<span class="symbol">&#x27;t</span> have a size known at compile-time</span><br><span class="line">   |</span><br><span class="line">   = help: the <span class="keyword">trait</span> `<span class="built_in">Sized</span>` is not implemented <span class="keyword">for</span> `(<span class="keyword">dyn</span> Draw + <span class="symbol">&#x27;static</span>)`</span><br><span class="line">help: function arguments must have a statically known size, borrowed types always have a known size</span><br></pre></td></tr></table></figure>

<h5 id="ç‰¹å¾å¯¹è±¡çš„åŠ¨æ€åˆ†å‘"><a href="#ç‰¹å¾å¯¹è±¡çš„åŠ¨æ€åˆ†å‘" class="headerlink" title="ç‰¹å¾å¯¹è±¡çš„åŠ¨æ€åˆ†å‘"></a>ç‰¹å¾å¯¹è±¡çš„åŠ¨æ€åˆ†å‘</h5><p>æˆ‘ä»¬ä¹‹å‰å­¦è¿‡æ³›å‹ï¼Œæ˜¯åœ¨ç¼–è¯‘æœŸå®Œæˆå¤„ç†çš„:ç¼–è¯‘æœŸä¼šä¸ºæ¯ä¸€ä¸ªæ³›å‹å‚æ•°å¯¹åº”çš„å…·ä½“ç±»å‹ç”Ÿæˆä¸€ä»½ä»£ç ï¼Œè¿™ç§æ–¹å¼æ˜¯<strong>é™æ€åˆ†å‘</strong>ï¼Œç”±äºæ˜¯åœ¨ç¼–è¯‘æœŸå®Œæˆçš„ï¼Œå¯¹äºè¿è¡ŒæœŸæ€§èƒ½å®Œå…¨æ²¡æœ‰å½±å“</p>
<p>ä¸é™æ€åˆ†å‘ç›¸å¯¹åº”çš„æ˜¯<strong>åŠ¨æ€åˆ†å‘</strong>ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç›´åˆ°è¿è¡Œæ—¶ï¼Œæ‰èƒ½ç¡®å®šéœ€è¦è°ƒç”¨ä»€ä¹ˆæ–¹æ³•ï¼Œä¹‹å‰ä»£ç çš„dynæ­£æ˜¯åœ¨å¼ºè°ƒè¿™ä¸€â€åŠ¨æ€ç‰¹ç‚¹â€</p>
<p>å½“ä½¿ç”¨ç‰¹å¾å¯¹è±¡æ—¶ï¼ŒRustå¿…é¡»ä½¿ç”¨åŠ¨æ€åˆ†å‘ã€‚ç¼–è¯‘å™¨æ— æ³•çŸ¥æ™“æ‰€æœ‰å¯èƒ½ç”¨äºç‰¹å¾å¯¹è±¡ä»£ç çš„ç±»å‹ï¼Œæ‰€ä»¥å®ƒä¹Ÿä¸çŸ¥é“åº”è¯¥è°ƒç”¨å“ªä¸ªç±»å‹çš„å“ªä¸ªæ–¹æ³•å®ç°ã€‚ä¸ºæ­¤ï¼ŒRust åœ¨è¿è¡Œæ—¶ä½¿ç”¨ç‰¹å¾å¯¹è±¡ä¸­çš„æŒ‡é’ˆæ¥çŸ¥æ™“éœ€è¦è°ƒç”¨å“ªä¸ªæ–¹æ³•ã€‚åŠ¨æ€åˆ†å‘ä¹Ÿé˜»æ­¢ç¼–è¯‘å™¨æœ‰é€‰æ‹©çš„å†…è”æ–¹æ³•ä»£ç ï¼Œè¿™ä¼šç›¸åº”çš„ç¦ç”¨ä¸€äº›ä¼˜åŒ–ã€‚</p>
<p>ä¸‹é¢è¿™å¼ å›¾å¾ˆå¥½çš„è§£é‡Šäº†é™æ€åˆ†å‘ <code>Box&lt;T&gt;</code> å’ŒåŠ¨æ€åˆ†å‘ <code>Box&lt;dyn Trait&gt;</code> çš„åŒºåˆ«ï¼š</p>
<p><img src="https://insey.oss-cn-shenzhen.aliyuncs.com/kin/202504162034162.png" alt="image-20250416203409035" loading="lazy"></p>
<p>ç»“åˆä¸Šæ–‡çš„å†…å®¹å’Œè¿™å¼ å›¾å¯ä»¥äº†è§£ï¼š</p>
<ul>
<li><strong>ç‰¹å¾å¯¹è±¡å¤§å°ä¸å›ºå®š</strong>ï¼šè¿™æ˜¯å› ä¸ºï¼Œå¯¹äºç‰¹å¾ <code>Draw</code>ï¼Œç±»å‹ <code>Button</code> å¯ä»¥å®ç°ç‰¹å¾ <code>Draw</code>ï¼Œç±»å‹ <code>SelectBox</code> ä¹Ÿå¯ä»¥å®ç°ç‰¹å¾ <code>Draw</code>ï¼Œå› æ­¤ç‰¹å¾æ²¡æœ‰å›ºå®šå¤§å°</li>
<li>å‡ ä¹æ€»æ˜¯ä½¿ç”¨ç‰¹å¾å¯¹è±¡çš„å¼•ç”¨æ–¹å¼ï¼Œå¦‚&amp;dyn Drawã€Box&lt;dyn Draw&gt;<ul>
<li>è™½ç„¶ç‰¹å¾å¯¹è±¡æ²¡æœ‰å›ºå®šå¤§å°ï¼Œä½†å®ƒçš„å¼•ç”¨ç±»å‹çš„å¤§å°æ˜¯å›ºå®šçš„ï¼Œå®ƒç”±ä¸¤ä¸ªæŒ‡é’ˆç»„æˆï¼ˆ<code>ptr</code> å’Œ <code>vptr</code>ï¼‰ï¼Œå› æ­¤å ç”¨ä¸¤ä¸ªæŒ‡é’ˆå¤§å°</li>
<li>ä¸€ä¸ªæŒ‡é’ˆ <code>ptr</code> æŒ‡å‘å®ç°äº†ç‰¹å¾ <code>Draw</code> çš„å…·ä½“ç±»å‹çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯å½“ä½œç‰¹å¾ <code>Draw</code> æ¥ç”¨çš„ç±»å‹çš„å®ä¾‹ï¼Œæ¯”å¦‚ç±»å‹ <code>Button</code> çš„å®ä¾‹ã€ç±»å‹ <code>SelectBox</code> çš„å®ä¾‹</li>
<li>å¦ä¸€ä¸ªæŒ‡é’ˆ <code>vptr</code> æŒ‡å‘ä¸€ä¸ªè™šè¡¨ <code>vtable</code>ï¼Œ<code>vtable</code> ä¸­ä¿å­˜äº†ç±»å‹ <code>Button</code> æˆ–ç±»å‹ <code>SelectBox</code> çš„å®ä¾‹å¯¹äºå¯ä»¥è°ƒç”¨çš„å®ç°äºç‰¹å¾ <code>Draw</code> çš„æ–¹æ³•ã€‚å½“è°ƒç”¨æ–¹æ³•æ—¶ï¼Œç›´æ¥ä» <code>vtable</code> ä¸­æ‰¾åˆ°æ–¹æ³•å¹¶è°ƒç”¨ã€‚ä¹‹æ‰€ä»¥è¦ä½¿ç”¨ä¸€ä¸ª <code>vtable</code> æ¥ä¿å­˜å„å®ä¾‹çš„æ–¹æ³•ï¼Œæ˜¯å› ä¸ºå®ç°äº†ç‰¹å¾ <code>Draw</code> çš„ç±»å‹æœ‰å¤šç§ï¼Œè¿™äº›ç±»å‹æ‹¥æœ‰çš„æ–¹æ³•å„ä¸ç›¸åŒï¼Œå½“å°†è¿™äº›ç±»å‹çš„å®ä¾‹éƒ½å½“ä½œç‰¹å¾ <code>Draw</code> æ¥ä½¿ç”¨æ—¶(æ­¤æ—¶ï¼Œå®ƒä»¬å…¨éƒ½çœ‹ä½œæ˜¯ç‰¹å¾ <code>Draw</code> ç±»å‹çš„å®ä¾‹)ï¼Œæœ‰å¿…è¦åŒºåˆ†è¿™äº›å®ä¾‹å„è‡ªæœ‰å“ªäº›æ–¹æ³•å¯è°ƒç”¨</li>
</ul>
</li>
</ul>
<p>ç®€è€Œè¨€ä¹‹ï¼Œå½“ç±»å‹ <code>Button</code> å®ç°äº†ç‰¹å¾ <code>Draw</code> æ—¶ï¼Œç±»å‹ <code>Button</code> çš„å®ä¾‹å¯¹è±¡ <code>btn</code> å¯ä»¥å½“ä½œç‰¹å¾ <code>Draw</code> çš„ç‰¹å¾å¯¹è±¡ç±»å‹æ¥ä½¿ç”¨ï¼Œ<code>btn</code> ä¸­ä¿å­˜äº†ä½œä¸ºç‰¹å¾å¯¹è±¡çš„æ•°æ®æŒ‡é’ˆï¼ˆæŒ‡å‘ç±»å‹ <code>Button</code> çš„å®ä¾‹æ•°æ®ï¼‰å’Œè¡Œä¸ºæŒ‡é’ˆï¼ˆæŒ‡å‘ <code>vtable</code>ï¼‰ã€‚</p>
<p>ä¸€å®šè¦æ³¨æ„ï¼Œæ­¤æ—¶çš„ <code>btn</code> æ˜¯ <code>Draw</code> çš„ç‰¹å¾å¯¹è±¡çš„å®ä¾‹ï¼Œè€Œä¸å†æ˜¯å…·ä½“ç±»å‹ <code>Button</code> çš„å®ä¾‹ï¼Œè€Œä¸” <code>btn</code> çš„ <code>vtable</code> åªåŒ…å«äº†å®ç°è‡ªç‰¹å¾ <code>Draw</code> çš„é‚£äº›æ–¹æ³•ï¼ˆæ¯”å¦‚ <code>draw</code>ï¼‰ï¼Œå› æ­¤ <code>btn</code> åªèƒ½è°ƒç”¨å®ç°äºç‰¹å¾ <code>Draw</code> çš„ <code>draw</code> æ–¹æ³•ï¼Œè€Œä¸èƒ½è°ƒç”¨ç±»å‹ <code>Button</code> æœ¬èº«å®ç°çš„æ–¹æ³•å’Œç±»å‹ <code>Button</code> å®ç°äºå…¶ä»–ç‰¹å¾çš„æ–¹æ³•ã€‚<strong>ä¹Ÿå°±æ˜¯è¯´ï¼Œ<code>btn</code> æ˜¯å“ªä¸ªç‰¹å¾å¯¹è±¡çš„å®ä¾‹ï¼Œå®ƒçš„ <code>vtable</code> ä¸­å°±åŒ…å«äº†è¯¥ç‰¹å¾çš„æ–¹æ³•ã€‚</strong></p>
<h5 id="Self-ä¸-self"><a href="#Self-ä¸-self" class="headerlink" title="Self ä¸ self"></a>Self ä¸ self</h5><p>åœ¨ Rust ä¸­ï¼Œæœ‰ä¸¤ä¸ª<code>self</code>ï¼Œä¸€ä¸ªæŒ‡ä»£å½“å‰çš„å®ä¾‹å¯¹è±¡ï¼Œä¸€ä¸ªæŒ‡ä»£ç‰¹å¾æˆ–è€…æ–¹æ³•ç±»å‹çš„åˆ«åï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">trait</span> <span class="title class_">Draw</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">draw</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">#[derive(Clone)]</span></span><br><span class="line"><span class="keyword">struct</span> <span class="title class_">Button</span>;</span><br><span class="line"><span class="keyword">impl</span> <span class="title class_">Draw</span> <span class="keyword">for</span> <span class="title class_">Button</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">draw</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span>.<span class="title function_ invoke__">clone</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">button</span> = Button;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">newb</span> = button.<span class="title function_ invoke__">draw</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šè¿°ä»£ç ä¸­ï¼Œ<code>self</code>æŒ‡ä»£çš„å°±æ˜¯å½“å‰çš„å®ä¾‹å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ <code>button.draw()</code> ä¸­çš„ <code>button</code> å®ä¾‹ï¼Œ<code>Self</code> åˆ™æŒ‡ä»£çš„æ˜¯ <code>Button</code> ç±»å‹ã€‚</p>
<p>å½“ç†è§£äº† <code>self</code> ä¸ <code>Self</code> çš„åŒºåˆ«åï¼Œæˆ‘ä»¬å†æ¥çœ‹çœ‹ä½•ä¸ºå¯¹è±¡å®‰å…¨ã€‚</p>
<h5 id="ç‰¹å¾å¯¹è±¡çš„é™åˆ¶"><a href="#ç‰¹å¾å¯¹è±¡çš„é™åˆ¶" class="headerlink" title="ç‰¹å¾å¯¹è±¡çš„é™åˆ¶"></a>ç‰¹å¾å¯¹è±¡çš„é™åˆ¶</h5><p>ä¸æ˜¯æ‰€æœ‰ç‰¹å¾éƒ½èƒ½æ‹¥æœ‰ç‰¹å¾å¯¹è±¡ï¼Œåªæœ‰å¯¹è±¡å®‰å…¨çš„ç‰¹å¾æ‰è¡Œã€‚å½“ä¸€ä¸ªç‰¹å¾çš„æ‰€æœ‰æ–¹æ³•éƒ½æœ‰å¦‚ä¸‹å±æ€§æ—¶ï¼Œå®ƒçš„å¯¹è±¡æ‰æ˜¯å®‰å…¨çš„ï¼š</p>
<ul>
<li>æ–¹æ³•çš„è¿”å›ç±»å‹ä¸èƒ½æ˜¯ <code>Self</code></li>
<li>æ–¹æ³•æ²¡æœ‰ä»»ä½•æ³›å‹å‚æ•°</li>
</ul>
<p>å¯¹è±¡å®‰å…¨å¯¹äºç‰¹å¾å¯¹è±¡æ˜¯å¿…é¡»çš„ï¼Œå› ä¸ºä¸€æ—¦æœ‰äº†ç‰¹å¾å¯¹è±¡ï¼Œå°±ä¸å†éœ€è¦çŸ¥é“å®ç°è¯¥ç‰¹å¾çš„å…·ä½“ç±»å‹æ˜¯ä»€ä¹ˆäº†ã€‚å¦‚æœç‰¹å¾æ–¹æ³•è¿”å›äº†å…·ä½“çš„ <code>Self</code> ç±»å‹ï¼Œä½†æ˜¯ç‰¹å¾å¯¹è±¡å¿˜è®°äº†å…¶çœŸæ­£çš„ç±»å‹ï¼Œé‚£è¿™ä¸ª <code>Self</code> å°±éå¸¸å°´å°¬ï¼Œå› ä¸ºæ²¡äººçŸ¥é“å®ƒæ˜¯è°äº†ã€‚ä½†æ˜¯å¯¹äºæ³›å‹ç±»å‹å‚æ•°æ¥è¯´ï¼Œå½“ä½¿ç”¨ç‰¹å¾æ—¶å…¶ä¼šæ”¾å…¥å…·ä½“çš„ç±»å‹å‚æ•°ï¼šæ­¤å…·ä½“ç±»å‹å˜æˆäº†å®ç°è¯¥ç‰¹å¾çš„ç±»å‹çš„ä¸€éƒ¨åˆ†ã€‚è€Œå½“ä½¿ç”¨ç‰¹å¾å¯¹è±¡æ—¶å…¶å…·ä½“ç±»å‹è¢«æŠ¹å»äº†ï¼Œæ•…è€Œæ— ä»å¾—çŸ¥æ”¾å…¥æ³›å‹å‚æ•°ç±»å‹åˆ°åº•æ˜¯ä»€ä¹ˆã€‚</p>
<p>æ ‡å‡†åº“ä¸­çš„ <code>Clone</code> ç‰¹å¾å°±ä¸ç¬¦åˆå¯¹è±¡å®‰å…¨çš„è¦æ±‚ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">trait</span> <span class="title class_">Clone</span> &#123;</span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">clone</span>(&amp;<span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="keyword">Self</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å› ä¸ºå®ƒçš„å…¶ä¸­ä¸€ä¸ªæ–¹æ³•ï¼Œè¿”å›äº† <code>Self</code> ç±»å‹ï¼Œå› æ­¤å®ƒæ˜¯å¯¹è±¡ä¸å®‰å…¨çš„ã€‚</p>
<p><code>String</code> ç±»å‹å®ç°äº† <code>Clone</code> ç‰¹å¾ï¼Œ <code>String</code> å®ä¾‹ä¸Šè°ƒç”¨ <code>clone</code> æ–¹æ³•æ—¶ä¼šå¾—åˆ°ä¸€ä¸ª <code>String</code> å®ä¾‹ã€‚ç±»ä¼¼çš„ï¼Œå½“è°ƒç”¨ <code>Vec&lt;T&gt;</code> å®ä¾‹çš„ <code>clone</code> æ–¹æ³•ä¼šå¾—åˆ°ä¸€ä¸ª <code>Vec&lt;T&gt;</code> å®ä¾‹ã€‚<code>clone</code> çš„ç­¾åéœ€è¦çŸ¥é“ä»€ä¹ˆç±»å‹ä¼šä»£æ›¿ <code>Self</code>ï¼Œå› ä¸ºè¿™æ˜¯å®ƒçš„è¿”å›å€¼ã€‚</p>
<p>å¦‚æœè¿åäº†å¯¹è±¡å®‰å…¨çš„è§„åˆ™ï¼Œç¼–è¯‘å™¨ä¼šæç¤ºä½ ã€‚ä¾‹å¦‚ï¼Œå¦‚æœå°è¯•ä½¿ç”¨ä¹‹å‰çš„ <code>Screen</code> ç»“æ„ä½“æ¥å­˜æ”¾å®ç°äº† <code>Clone</code> ç‰¹å¾çš„ç±»å‹ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">struct</span> <span class="title class_">Screen</span> &#123;</span><br><span class="line">    <span class="keyword">pub</span> components: <span class="type">Vec</span>&lt;<span class="type">Box</span>&lt;<span class="keyword">dyn</span> <span class="built_in">Clone</span>&gt;&gt;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>å°†ä¼šå¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">error[E0038]: the trait `std::clone::Clone` cannot be made into an object</span><br><span class="line"> --&gt; src/lib.rs:2:5</span><br><span class="line">  |</span><br><span class="line">2 |     pub components: Vec&lt;Box&lt;dyn Clone&gt;&gt;,</span><br><span class="line">  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ the trait `std::clone::Clone`</span><br><span class="line">  cannot be made into an object</span><br><span class="line">  |</span><br><span class="line">  = note: the trait cannot require that `Self : Sized`</span><br></pre></td></tr></table></figure>

<p>è¿™æ„å‘³ç€ä¸èƒ½ä»¥è¿™ç§æ–¹å¼ä½¿ç”¨æ­¤ç‰¹å¾ä½œä¸ºç‰¹å¾å¯¹è±¡ã€‚</p>
<h5 id="æ·±å…¥äº†è§£ç‰¹å¾"><a href="#æ·±å…¥äº†è§£ç‰¹å¾" class="headerlink" title="æ·±å…¥äº†è§£ç‰¹å¾"></a>æ·±å…¥äº†è§£ç‰¹å¾</h5><h6 id="å…³è”ç±»å‹"><a href="#å…³è”ç±»å‹" class="headerlink" title="å…³è”ç±»å‹"></a>å…³è”ç±»å‹</h6><p>å…³è”ç±»å‹æ˜¯åœ¨ç‰¹å¾å®šä¹‰çš„è¯­å¥å—ä¸­å£°æ˜ä¸€ä¸ªè‡ªå®šä¹‰ç±»å‹ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨ç‰¹å¾çš„æ–¹æ³•ç­¾åä¸­ä½¿ç”¨è¯¥ç±»å‹ï¼š</p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">pub</span> <span class="keyword">trait</span> <span class="title class_">pub</span> <span class="keyword">trait</span> <span class="title class_">Iterator</span> &#123;</span><br><span class="line">    <span class="keyword">type</span> <span class="title class_">Item</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">next</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">Option</span>&lt;<span class="keyword">Self</span>::Item&gt;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢æ˜¯æ ‡å‡†åº“ä¸­è¿­ä»£å™¨ç‰¹å¾Iteratorï¼Œå®ƒæœ‰ä¸€ä¸ªItemå…³è”ç±»å‹ï¼Œç”¨äºæ›¿ä»£éå†çš„å€¼çš„ç±»å‹</p>
<p>åŒæ—¶ï¼Œnextä¹Ÿè¿”å›äº†ä¸€ä¸ªItemç±»å‹ï¼Œä¸è¿‡ä½¿ç”¨äº†Optionæšä¸¾è¿›è¡Œäº†åŒ…è£¹ï¼Œå‡å¦‚è¿­ä»£å™¨ä¸­çš„å€¼æ˜¯i32ç±»å‹ï¼Œé‚£ä¹ˆè°ƒç”¨nextæ–¹æ³•å°±å°†è·å–åˆ°ä¸€ä¸ªOption&lt;i32&gt;çš„å€¼</p>
<p><strong>Selfç”¨æ¥æŒ‡ä»£å½“å‰è°ƒç”¨è€…çš„å…·ä½“ç±»å‹ï¼Œé‚£ä¹ˆSelf::Itemå°±ç”¨æ¥æŒ‡ä»£è¯¥ç±»å‹å®ç°ä¸­å®šä¹‰çš„Itemç±»å‹ï¼š</strong></p>
<figure class="highlight rust"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">impl</span> <span class="title class_">Iterator</span> <span class="keyword">for</span> <span class="title class_">Counter</span> &#123;</span><br><span class="line">    <span class="keyword">type</span> <span class="title class_">Item</span> = <span class="type">u32</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">fn</span> <span class="title function_">next</span>(&amp;<span class="keyword">mut</span> <span class="keyword">self</span>) <span class="punctuation">-&gt;</span> <span class="type">Option</span>&lt;<span class="keyword">Self</span>::Item&gt; &#123;</span><br><span class="line">        <span class="comment">// --snip--</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">fn</span> <span class="title function_">main</span>() &#123;</span><br><span class="line">    <span class="keyword">let</span> <span class="variable">c</span> = Counter&#123;..&#125;</span><br><span class="line">    c.<span class="title function_ invoke__">next</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>åœ¨ä¸Šè¿°ä»£ç ä¸­ï¼Œæˆ‘ä»¬ä¸ºCounterç±»å‹å®ç°äº†Iteratorç‰¹å¾ï¼Œå˜é‡cæ˜¯ç‰¹å¾Iteratorçš„å®åŠ›ï¼Œä¹Ÿæ˜¯nextæ–¹æ³•çš„è°ƒç”¨è€…ã€‚ç»“åˆä¹‹å‰çš„é»‘ä½“å†…å®¹å¯ä»¥å¾—åˆ°ï¼šå¯¹äºnextæ–¹æ³•è€Œè¨€ï¼ŒSelfæ˜¯è°ƒç”¨è€…cçš„å…·ä½“ç±»å‹ <code>Counter</code>ï¼Œè€Œ <code>Self::Item</code> æ˜¯ <code>Counter</code> ä¸­å®šä¹‰çš„ <code>Item</code> ç±»å‹: <code>u32</code>ã€‚</p>
</div></section><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>kinsey</li><li class="post-copyright-link"><strong>Post link: </strong><a href="https://kinseyy.github.io/2025/03/26/rust%E5%AD%A6%E4%B9%A0/" title="rustå­¦ä¹ ">https://kinseyy.github.io/2025/03/26/rust%E5%AD%A6%E4%B9%A0/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener" title="CC BY-NC-SA 4.0 "><span class="icon iconify" data-icon="ri:creative-commons-line"></span><span class="icon iconify" data-icon="ri:creative-commons-by-line"></span><span class="icon iconify" data-icon="ri:creative-commons-nc-line"></span><span class="icon iconify" data-icon="ri:creative-commons-sa-line"></span></a> unless otherwise stated.</li></ul></article><div class="post-nav"><div class="post-nav-item"><a class="post-nav-prev" href="/2025/04/02/sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93/" rel="prev" title="sqlæ³¨å…¥æ€»ç»“"><span class="icon iconify" data-icon="ri:arrow-left-s-line"></span><span class="post-nav-text">sqlæ³¨å…¥æ€»ç»“</span></a></div><div class="post-nav-item"><a class="post-nav-next" href="/2025/03/25/NCTF-2024/" rel="next" title="NCTF 2024"><span class="post-nav-text">NCTF 2024</span><span class="icon iconify" data-icon="ri:arrow-right-s-line"></span></a></div></div></div><div class="hty-card" id="comment"><div class="comment-tooltip text-center"><span>å¦‚æœæ‚¨æœ‰ä»»ä½•å…³äºåšå®¢å†…å®¹çš„ç›¸å…³è®¨è®ºï¼Œæ¬¢è¿å‰å¾€ <a href="https://github.com/kinseyy/kinseyy.github.io/discussions" target="_blank">GitHub Discussions</a> ä¸æˆ‘äº¤æµã€‚</span><br></div><div id="waline"></div><link rel="stylesheet" href="https://fastly.jsdelivr.net/npm/@waline/client@v2/dist/waline.css"><script>window.CONFIG.waline.config.path = "/2025/03/26/rust%E5%AD%A6%E4%B9%A0/"</script><div class="js-Pjax"><script src="/js/comments/waline.js" type="module" defer></script></div></div></main><footer class="sidebar-translate" id="footer"><div class="beian"><a rel="noopener" href="https://beian.miit.gov.cn/" target="_blank">è‹ICPå¤‡17038157å·</a></div><div class="copyright"><span>&copy; 2023 â€“ 2025 </span><a class="with-love" id="animate" target="_blank" rel="noopener" href="https://github.com/kinseyy" title="Github"><span class="icon iconify" data-icon="ri:github-line"></span></a><span class="author"> kinsey</span></div><div class="powered"><span>Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> v7.2.0</span><span class="footer-separator">|</span><span>Theme - <a rel="noopener" href="https://github.com/YunYouJun/hexo-theme-yun" target="_blank"><span>Yun</span></a> v1.10.11</span></div><div class="footer-custom-text"><a href="https://www.travellings.cn/go.html" target="_blank" rel="noopener" title="å¼€å¾€-å‹é“¾æ¥åŠ›"><img src="https://www.travellings.cn/assets/logo.gif" alt="å¼€å¾€-å‹é“¾æ¥åŠ›" width="120"></a></div></footer></div><a class="hty-icon-button" id="back-to-top" aria-label="back-to-top" href="#"><span class="icon iconify" data-icon="ri:arrow-up-s-line"></span><svg class="progress-circle-container" viewBox="0 0 100 100"><circle class="progress-circle" id="progressCircle" cx="50" cy="50" r="48" fill="none" stroke="#0078E7" stroke-width="2" stroke-linecap="round"></circle></svg></a><a class="popup-trigger hty-icon-button icon-search" id="search" href="javascript:;" title="Search"><span class="site-state-item-icon"><span class="icon iconify" data-icon="ri:search-line"></span></span></a><script>window.addEventListener("DOMContentLoaded", () => {
  // Handle and trigger popup window
  document.querySelector(".popup-trigger").addEventListener("click", () => {
    document.querySelector(".popup").classList.add("show");
    setTimeout(() => {
      document.querySelector(".search-input").focus();
    }, 100);
  });

  // Monitor main search box
  const onPopupClose = () => {
    document.querySelector(".popup").classList.remove("show");
  };

  document.querySelector(".popup-btn-close").addEventListener("click", () => {
    onPopupClose();
  });

  window.addEventListener("keyup", event => {
    if (event.key === "Escape") {
      onPopupClose();
    }
  });
});
</script><script defer src="https://fastly.jsdelivr.net/npm/algoliasearch@4/dist/algoliasearch-lite.umd.js"></script><script defer src="https://fastly.jsdelivr.net/npm/instantsearch.js@4/dist/instantsearch.production.min.js"></script><script defer src="/js/search/algolia-search.js" type="module"></script><div class="popup search-popup"><div class="search-header"><span class="popup-btn-close close-icon hty-icon-button"><span class="icon iconify" data-icon="ri:close-line"></span></span></div><div class="search-input-container"></div><div class="algolia-results"><div id="algolia-stats"></div><div id="algolia-hits"></div><div class="algolia-pagination" id="algolia-pagination"></div></div></div><script>function initMourn() {
  const date = new Date();
  const today = (date.getMonth() + 1) + "-" + date.getDate()
  const mourn_days = ["4-4","9-18"]
  if (mourn_days.includes(today)) {
    document.documentElement.style.filter = "grayscale(1)";
  }
}
initMourn();</script></body></html>